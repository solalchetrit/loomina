{
    "name": "Loomina Test Antigravity",
    "flow": [
        {
            "id": 1,
            "module": "gateway:CustomWebHook",
            "version": 1,
            "parameters": {
                "hook": 2188533,
                "maxResults": 1
            },
            "mapper": {},
            "metadata": {
                "designer": {
                    "x": 0,
                    "y": 1800
                },
                "restore": {
                    "parameters": {
                        "hook": {
                            "data": {
                                "editable": "true"
                            },
                            "label": "My gateway-webhook webhook"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "hook",
                        "type": "hook:gateway-webhook",
                        "label": "Webhook",
                        "required": true
                    },
                    {
                        "name": "maxResults",
                        "type": "number",
                        "label": "Maximum number of results"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 5,
            "module": "builtin:BasicRouter",
            "version": 1,
            "mapper": null,
            "metadata": {
                "designer": {
                    "x": 300,
                    "y": 1800
                }
            },
            "routes": [
                {
                    "flow": [
                        {
                            "id": 28,
                            "module": "supabase:searchRows",
                            "version": 1,
                            "parameters": {
                                "__IMTCONN__": 3941672
                            },
                            "filter": {
                                "name": "assistant-request",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{1.message.type}}",
                                            "b": "assistant-request",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "limit": "1",
                                "table": "Client",
                                "search": [
                                    [
                                        {
                                            "a": "phone_number",
                                            "b": "{{ifempty(1.message.call.customer.number; 1.phone)}}",
                                            "o": "text:eq."
                                        }
                                    ]
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 600,
                                    "y": 450
                                },
                                "restore": {
                                    "expect": {
                                        "table": {
                                            "mode": "chose",
                                            "label": "Client",
                                            "nested": [
                                                {
                                                    "name": "search",
                                                    "type": "filter",
                                                    "label": "Search criteria",
                                                    "options": {
                                                        "logic": "and",
                                                        "store": [
                                                            {
                                                                "label": "id",
                                                                "value": "id"
                                                            },
                                                            {
                                                                "label": "created_at",
                                                                "value": "created_at"
                                                            },
                                                            {
                                                                "label": "phone_number",
                                                                "value": "phone_number"
                                                            },
                                                            {
                                                                "label": "first_name",
                                                                "value": "first_name"
                                                            },
                                                            {
                                                                "label": "last_name",
                                                                "value": "last_name"
                                                            },
                                                            {
                                                                "label": "phase",
                                                                "value": "phase"
                                                            },
                                                            {
                                                                "label": "email",
                                                                "value": "email"
                                                            }
                                                        ],
                                                        "operators": [
                                                            {
                                                                "label": "Text",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "text:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "text:neq."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case sensitive)",
                                                                        "value": "text:like."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case insensitive)",
                                                                        "value": "text:ilike."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Numbers",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "number:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "number:neq."
                                                                    },
                                                                    {
                                                                        "label": "Greater than",
                                                                        "value": "number:gt."
                                                                    },
                                                                    {
                                                                        "label": "Less than",
                                                                        "value": "number:lt."
                                                                    },
                                                                    {
                                                                        "label": "Greater than or equal to",
                                                                        "value": "number:gte."
                                                                    },
                                                                    {
                                                                        "label": "Less than or equal to",
                                                                        "value": "number:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Date",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "date:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "date:neq."
                                                                    },
                                                                    {
                                                                        "label": "Later than",
                                                                        "value": "date:gt."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than",
                                                                        "value": "date:lt."
                                                                    },
                                                                    {
                                                                        "label": "Later than or equal to",
                                                                        "value": "date:gte."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than or equal to",
                                                                        "value": "date:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Boolean",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "boolean:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "boolean:neq."
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    "parameters": {
                                        "__IMTCONN__": {
                                            "data": {
                                                "scoped": "true",
                                                "connection": "supabase"
                                            },
                                            "label": "My Supabase connection"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "__IMTCONN__",
                                        "type": "account:supabase",
                                        "label": "Connection",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "table",
                                        "type": "select",
                                        "label": "Table",
                                        "required": true
                                    },
                                    {
                                        "name": "limit",
                                        "type": "uinteger",
                                        "label": "Limit"
                                    },
                                    {
                                        "name": "search",
                                        "type": "filter",
                                        "label": "Search criteria",
                                        "options": {
                                            "logic": "and",
                                            "store": [
                                                {
                                                    "label": "id",
                                                    "value": "id"
                                                },
                                                {
                                                    "label": "created_at",
                                                    "value": "created_at"
                                                },
                                                {
                                                    "label": "phone_number",
                                                    "value": "phone_number"
                                                },
                                                {
                                                    "label": "name",
                                                    "value": "name"
                                                },
                                                {
                                                    "label": "phase",
                                                    "value": "phase"
                                                },
                                                {
                                                    "label": "email",
                                                    "value": "email"
                                                }
                                            ],
                                            "operators": [
                                                {
                                                    "label": "Text",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "text:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "text:neq."
                                                        },
                                                        {
                                                            "label": "Contains (case sensitive)",
                                                            "value": "text:like."
                                                        },
                                                        {
                                                            "label": "Contains (case insensitive)",
                                                            "value": "text:ilike."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Numbers",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "number:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "number:neq."
                                                        },
                                                        {
                                                            "label": "Greater than",
                                                            "value": "number:gt."
                                                        },
                                                        {
                                                            "label": "Less than",
                                                            "value": "number:lt."
                                                        },
                                                        {
                                                            "label": "Greater than or equal to",
                                                            "value": "number:gte."
                                                        },
                                                        {
                                                            "label": "Less than or equal to",
                                                            "value": "number:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Date",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "date:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "date:neq."
                                                        },
                                                        {
                                                            "label": "Later than",
                                                            "value": "date:gt."
                                                        },
                                                        {
                                                            "label": "Earlier than",
                                                            "value": "date:lt."
                                                        },
                                                        {
                                                            "label": "Later than or equal to",
                                                            "value": "date:gte."
                                                        },
                                                        {
                                                            "label": "Earlier than or equal to",
                                                            "value": "date:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Boolean",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "boolean:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "boolean:neq."
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    }
                                ],
                                "interface": [
                                    {
                                        "name": "__IMTLENGTH__",
                                        "type": "uinteger",
                                        "label": "Total number of bundles"
                                    },
                                    {
                                        "name": "__IMTINDEX__",
                                        "type": "uinteger",
                                        "label": "Bundle order position"
                                    },
                                    {
                                        "name": "id",
                                        "type": "text",
                                        "label": "id"
                                    },
                                    {
                                        "name": "created_at",
                                        "type": "text",
                                        "label": "created_at"
                                    },
                                    {
                                        "name": "phone_number",
                                        "type": "text",
                                        "label": "phone_number"
                                    },
                                    {
                                        "name": "name",
                                        "type": "text",
                                        "label": "name"
                                    },
                                    {
                                        "name": "phase",
                                        "type": "text",
                                        "label": "phase"
                                    },
                                    {
                                        "name": "email",
                                        "type": "text",
                                        "label": "email"
                                    }
                                ]
                            }
                        },
                        {
                            "id": 14,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 900,
                                    "y": 450
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 29,
                                            "module": "supabase:createARow",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "filter": {
                                                "name": "Client Inconnu",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{28.id}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "table": "Client",
                                                "phone_number": "{{ifempty(1.message.call.customer.number; 1.phone)}}",
                                                "phase": "Onboarding"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1200,
                                                    "y": 0
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "My Supabase connection",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "nested": [
                                                                {
                                                                    "help": "Defaults to gen_random_uuid(). Note:\nThis is a Primary Key.<pk/>",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Defaults to now(). ",
                                                                    "name": "created_at",
                                                                    "type": "text",
                                                                    "label": "created_at",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "phone_number",
                                                                    "type": "text",
                                                                    "label": "phone_number",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "name",
                                                                    "type": "text",
                                                                    "label": "name",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "phase",
                                                                    "type": "text",
                                                                    "label": "phase",
                                                                    "options": null,
                                                                    "required": false
                                                                }
                                                            ],
                                                            "label": "Client"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "phone_number",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "name",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "phase",
                                                        "type": "text"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "phone_number",
                                                        "type": "text",
                                                        "label": "phone_number"
                                                    },
                                                    {
                                                        "name": "phase",
                                                        "type": "text",
                                                        "label": "phase"
                                                    },
                                                    {
                                                        "name": "email",
                                                        "type": "text",
                                                        "label": "email"
                                                    },
                                                    {
                                                        "name": "otp_code",
                                                        "type": "text",
                                                        "label": "otp_code"
                                                    },
                                                    {
                                                        "name": "politeness_preference",
                                                        "type": "text",
                                                        "label": "politeness_preference"
                                                    },
                                                    {
                                                        "name": "target_audience",
                                                        "type": "text",
                                                        "label": "target_audience"
                                                    },
                                                    {
                                                        "name": "writing_style",
                                                        "type": "text",
                                                        "label": "writing_style"
                                                    },
                                                    {
                                                        "name": "narrative_scope",
                                                        "type": "text",
                                                        "label": "narrative_scope"
                                                    },
                                                    {
                                                        "name": "onboarding_status",
                                                        "type": "boolean",
                                                        "label": "onboarding_status"
                                                    },
                                                    {
                                                        "name": "first_name",
                                                        "type": "text",
                                                        "label": "first_name"
                                                    },
                                                    {
                                                        "name": "last_name",
                                                        "type": "text",
                                                        "label": "last_name"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 15,
                                            "module": "gateway:WebhookRespond",
                                            "version": 1,
                                            "parameters": {},
                                            "mapper": {
                                                "body": "{\n  \"assistant\": {\n    \"transcriber\": {\"provider\": \"deepgram\", \"model\": \"nova-2\", \"language\": \"fr\"}, \"silenceTimeoutSeconds\": 60,\n    \"firstMessageMode\": \"assistant-speaks-first\",\n    \"name\": \"Loomina-Unknown\",\n    \"voice\": {\"provider\": \"11labs\", \"voiceId\": \"Qrl71rx6Yg8RvyPYRGCQ\", \"model\": \"eleven_turbo_v2_5\"},\n    \"firstMessage\": \"Bonjour ! Ici Loomina, votre biographe personnelle. Je ne crois pas avoir déjà ce numéro dans mes carnets. C'est la toute première fois que nous nous parlons, n'est-ce pas ? Quel est votre prénom ?\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es Loomina, une IA biographe.\\n\\n# RÈGLES CRITIQUES\\n- Tes réponses doivent faire 1 à 2 phrases MAX.\\n- Ne répète jamais ce message d'accueil si l'utilisateur a déjà répondu.\\n- Sois directe et chaleureuse.\\n\\n# OBJECTIF\\nAccueille l'inconnu et demande son prénom. Ensuite, explique ton rôle (IA biographe) et demande quel style d'écriture il préfère.\"}\n      ]\n    }\n  }\n}",
                                                "status": "200",
                                                "headers": []
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1500,
                                                    "y": 0
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "headers": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "expect": [
                                                    {
                                                        "name": "status",
                                                        "type": "uinteger",
                                                        "label": "Status",
                                                        "required": true,
                                                        "validate": {
                                                            "min": 100
                                                        }
                                                    },
                                                    {
                                                        "name": "body",
                                                        "type": "any",
                                                        "label": "Body"
                                                    },
                                                    {
                                                        "name": "headers",
                                                        "spec": [
                                                            {
                                                                "name": "key",
                                                                "type": "text",
                                                                "label": "Key",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 256
                                                                }
                                                            },
                                                            {
                                                                "name": "value",
                                                                "type": "text",
                                                                "label": "Value",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 4096
                                                                }
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Custom headers",
                                                        "validate": {
                                                            "maxItems": 16
                                                        }
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 17,
                                            "module": "builtin:BasicRouter",
                                            "version": 1,
                                            "parameters": {
                                                "else": 0
                                            },
                                            "filter": {
                                                "name": "Client Trouvé",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{28.id}}",
                                                            "o": "exist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": null,
                                            "metadata": {
                                                "designer": {
                                                    "x": 1200,
                                                    "y": 600
                                                }
                                            },
                                            "routes": [
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 32,
                                                            "module": "supabase:searchRows",
                                                            "version": 1,
                                                            "parameters": {
                                                                "__IMTCONN__": 3941672
                                                            },
                                                            "filter": {
                                                                "name": "Phase = Interview",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{28.phase}}",
                                                                            "b": "Interview",
                                                                            "o": "text:equal"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "limit": "100",
                                                                "table": "Books",
                                                                "search": [
                                                                    [
                                                                        {
                                                                            "a": "client_id",
                                                                            "b": "{{28.id}}",
                                                                            "o": "text:eq."
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1500,
                                                                    "y": 300
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "table": {
                                                                            "mode": "chose",
                                                                            "label": "Books",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "search",
                                                                                    "type": "filter",
                                                                                    "label": "Search criteria",
                                                                                    "options": {
                                                                                        "logic": "and",
                                                                                        "store": [
                                                                                            {
                                                                                                "label": "id",
                                                                                                "value": "id"
                                                                                            },
                                                                                            {
                                                                                                "label": "created_at",
                                                                                                "value": "created_at"
                                                                                            },
                                                                                            {
                                                                                                "label": "client_id",
                                                                                                "value": "client_id"
                                                                                            },
                                                                                            {
                                                                                                "label": "title",
                                                                                                "value": "title"
                                                                                            },
                                                                                            {
                                                                                                "label": "full_manuscript",
                                                                                                "value": "full_manuscript"
                                                                                            },
                                                                                            {
                                                                                                "label": "style",
                                                                                                "value": "style"
                                                                                            },
                                                                                            {
                                                                                                "label": "context",
                                                                                                "value": "context"
                                                                                            },
                                                                                            {
                                                                                                "label": "timeline",
                                                                                                "value": "timeline"
                                                                                            },
                                                                                            {
                                                                                                "label": "status",
                                                                                                "value": "status"
                                                                                            },
                                                                                            {
                                                                                                "label": "current_subject",
                                                                                                "value": "current_subject"
                                                                                            },
                                                                                            {
                                                                                                "label": "next_question",
                                                                                                "value": "next_question"
                                                                                            }
                                                                                        ],
                                                                                        "operators": [
                                                                                            {
                                                                                                "label": "Text",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "text:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "text:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Contains (case sensitive)",
                                                                                                        "value": "text:like."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Contains (case insensitive)",
                                                                                                        "value": "text:ilike."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Numbers",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "number:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "number:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Greater than",
                                                                                                        "value": "number:gt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Less than",
                                                                                                        "value": "number:lt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Greater than or equal to",
                                                                                                        "value": "number:gte."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Less than or equal to",
                                                                                                        "value": "number:lte."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Date",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "date:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "date:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Later than",
                                                                                                        "value": "date:gt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Earlier than",
                                                                                                        "value": "date:lt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Later than or equal to",
                                                                                                        "value": "date:gte."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Earlier than or equal to",
                                                                                                        "value": "date:lte."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Boolean",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "boolean:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "boolean:neq."
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "parameters": {
                                                                        "__IMTCONN__": {
                                                                            "data": {
                                                                                "scoped": "true",
                                                                                "connection": "supabase"
                                                                            },
                                                                            "label": "My Supabase connection"
                                                                        }
                                                                    }
                                                                },
                                                                "parameters": [
                                                                    {
                                                                        "name": "__IMTCONN__",
                                                                        "type": "account:supabase",
                                                                        "label": "Connection",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "expect": [
                                                                    {
                                                                        "name": "table",
                                                                        "type": "select",
                                                                        "label": "Table",
                                                                        "required": true
                                                                    },
                                                                    {
                                                                        "name": "limit",
                                                                        "type": "uinteger",
                                                                        "label": "Limit"
                                                                    },
                                                                    {
                                                                        "name": "search",
                                                                        "type": "filter",
                                                                        "label": "Search criteria",
                                                                        "options": {
                                                                            "logic": "and",
                                                                            "store": [
                                                                                {
                                                                                    "label": "id",
                                                                                    "value": "id"
                                                                                },
                                                                                {
                                                                                    "label": "created_at",
                                                                                    "value": "created_at"
                                                                                },
                                                                                {
                                                                                    "label": "client_id",
                                                                                    "value": "client_id"
                                                                                },
                                                                                {
                                                                                    "label": "title",
                                                                                    "value": "title"
                                                                                },
                                                                                {
                                                                                    "label": "full_manuscript",
                                                                                    "value": "full_manuscript"
                                                                                },
                                                                                {
                                                                                    "label": "style",
                                                                                    "value": "style"
                                                                                },
                                                                                {
                                                                                    "label": "context",
                                                                                    "value": "context"
                                                                                },
                                                                                {
                                                                                    "label": "timeline",
                                                                                    "value": "timeline"
                                                                                },
                                                                                {
                                                                                    "label": "status",
                                                                                    "value": "status"
                                                                                },
                                                                                {
                                                                                    "label": "current_subject",
                                                                                    "value": "current_subject"
                                                                                },
                                                                                {
                                                                                    "label": "next_question",
                                                                                    "value": "next_question"
                                                                                }
                                                                            ],
                                                                            "operators": [
                                                                                {
                                                                                    "label": "Text",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "text:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "text:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Contains (case sensitive)",
                                                                                            "value": "text:like."
                                                                                        },
                                                                                        {
                                                                                            "label": "Contains (case insensitive)",
                                                                                            "value": "text:ilike."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Numbers",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "number:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "number:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Greater than",
                                                                                            "value": "number:gt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Less than",
                                                                                            "value": "number:lt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Greater than or equal to",
                                                                                            "value": "number:gte."
                                                                                        },
                                                                                        {
                                                                                            "label": "Less than or equal to",
                                                                                            "value": "number:lte."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Date",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "date:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "date:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Later than",
                                                                                            "value": "date:gt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Earlier than",
                                                                                            "value": "date:lt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Later than or equal to",
                                                                                            "value": "date:gte."
                                                                                        },
                                                                                        {
                                                                                            "label": "Earlier than or equal to",
                                                                                            "value": "date:lte."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Boolean",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "boolean:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "boolean:neq."
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "interface": [
                                                                    {
                                                                        "name": "__IMTLENGTH__",
                                                                        "type": "uinteger",
                                                                        "label": "Total number of bundles"
                                                                    },
                                                                    {
                                                                        "name": "__IMTINDEX__",
                                                                        "type": "uinteger",
                                                                        "label": "Bundle order position"
                                                                    },
                                                                    {
                                                                        "name": "id",
                                                                        "type": "text",
                                                                        "label": "id"
                                                                    },
                                                                    {
                                                                        "name": "created_at",
                                                                        "type": "text",
                                                                        "label": "created_at"
                                                                    },
                                                                    {
                                                                        "name": "client_id",
                                                                        "type": "text",
                                                                        "label": "client_id"
                                                                    },
                                                                    {
                                                                        "name": "title",
                                                                        "type": "text",
                                                                        "label": "title"
                                                                    },
                                                                    {
                                                                        "name": "full_manuscript",
                                                                        "type": "text",
                                                                        "label": "full_manuscript"
                                                                    },
                                                                    {
                                                                        "name": "style",
                                                                        "type": "text",
                                                                        "label": "style"
                                                                    },
                                                                    {
                                                                        "name": "context",
                                                                        "type": "text",
                                                                        "label": "context"
                                                                    },
                                                                    {
                                                                        "name": "timeline",
                                                                        "type": "text",
                                                                        "label": "timeline"
                                                                    },
                                                                    {
                                                                        "name": "status",
                                                                        "type": "text",
                                                                        "label": "status"
                                                                    },
                                                                    {
                                                                        "name": "current_subject",
                                                                        "type": "text",
                                                                        "label": "current_subject"
                                                                    },
                                                                    {
                                                                        "name": "next_question",
                                                                        "type": "text",
                                                                        "label": "next_question"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        {
                                                            "id": 7,
                                                            "module": "gateway:WebhookRespond",
                                                            "version": 1,
                                                            "parameters": {},
                                                            "mapper": {
                                                                "body": "{\n  \"assistant\": {\n    \"transcriber\": {\"provider\": \"deepgram\", \"model\": \"nova-2\", \"language\": \"fr\"}, \"silenceTimeoutSeconds\": 60,\n    \"firstMessageMode\": \"assistant-speaks-first\",\n    \"name\": \"Loomina-Biographe\",\n    \"voice\": {\"provider\": \"11labs\", \"voiceId\": \"Qrl71rx6Yg8RvyPYRGCQ\", \"model\": \"eleven_turbo_v2_5\"},\n    \"firstMessage\": \"Bonjour {{28.first_name}}. {{ifempty(32.next_question; \\\" \\\" + \\\"Je suis ravie de vous retrouver. Je relisais nos dernières notes... Prêt à replonger dans vos souvenirs ?\\\")}}\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es Loomina, biographe de {{28.first_name}} (Phase: Interview).\\n\\n# RÈGLES ABSOLUES (RÉDIBITOIRE)\\n1. FAIS COURT : 1 à 2 phrases MAXIMUM. C'est impératif.\\n2. UNE SEULE question à la fois.\\n3. ÉCOUTE et RELANCE simplement. Ne fais pas de monologue.\\n\\n# CONTEXTE\\nSujet du jour : **'{{32.current_subject}}'**.\\nStyle : '{{32.style}}'.\\n\\nPose une question simple sur le sujet pour lancer la discussion ou rebondir.\"}\n      ]\n    }\n  }\n}",
                                                                "status": "200",
                                                                "headers": []
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1800,
                                                                    "y": 300
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "headers": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "expect": [
                                                                    {
                                                                        "name": "status",
                                                                        "type": "uinteger",
                                                                        "label": "Status",
                                                                        "required": true,
                                                                        "validate": {
                                                                            "min": 100
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "body",
                                                                        "type": "any",
                                                                        "label": "Body"
                                                                    },
                                                                    {
                                                                        "name": "headers",
                                                                        "spec": [
                                                                            {
                                                                                "name": "key",
                                                                                "type": "text",
                                                                                "label": "Key",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 256
                                                                                }
                                                                            },
                                                                            {
                                                                                "name": "value",
                                                                                "type": "text",
                                                                                "label": "Value",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 4096
                                                                                }
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Custom headers",
                                                                        "validate": {
                                                                            "maxItems": 16
                                                                        }
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 18,
                                                            "module": "gateway:WebhookRespond",
                                                            "version": 1,
                                                            "parameters": {},
                                                            "filter": {
                                                                "name": "Phase = Onboarding",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{28.phase}}",
                                                                            "b": "Onboarding",
                                                                            "o": "text:equal"
                                                                        }
                                                                    ],
                                                                    [
                                                                        {
                                                                            "a": "{{28.phase}}",
                                                                            "o": "notexist"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "body": "{\n  \"assistant\": {\n    \"transcriber\": {\"provider\": \"deepgram\", \"model\": \"nova-2\", \"language\": \"fr\"}, \"silenceTimeoutSeconds\": 60,\n    \"firstMessageMode\": \"assistant-speaks-first\",\n    \"name\": \"Loomina-Onboarding\",\n    \"voice\": {\"provider\": \"11labs\", \"voiceId\": \"Qrl71rx6Yg8RvyPYRGCQ\", \"model\": \"eleven_turbo_v2_5\"},\n    \"firstMessage\": \"Bonjour {{28.first_name}}, et bienvenue sur Loomina. Je suis ravie de faire votre connaissance. Avant de commencer l'écriture de votre livre, j'aimerais apprendre à mieux vous connaître. Est-ce le bon moment ?\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es Loomina, l'IA biographe empathique, en phase d'Onboarding avec {{28.first_name}}.\\n\\n# OBJECTIF\\nTu dois obtenir 4 informations clés pour configurer le livre. Ne passe jamais à la suivante tant que l'info actuelle n'est pas claire.\\n\\n# LA CHECKLIST (Ordre de priorité)\\n1. POLITESSE : Tutoiement ou Vouvoiement ?\\n2. DESTINATAIRE : Famille, Grand Public ou Thérapie personnelle ?\\n3. STYLE : Naturel/Conversationnel ou Littéraire/Romancé ?\\n4. DÉMARRAGE : Par quel souvenir commencer ?\\n\\n# RÈGLES DE CONVERSATION (CRITIQUE)\\n- CONCISION EXTRÊME : 1 à 2 phrases maximum. Tu es au téléphone.\\n- ANTI-BRUIT : Si l'utilisateur bafouille, qu'il y a un silence ou un bruit non verbal, NE PASSE PAS À LA SUITE. Dis : 'Pardon, je n'ai pas bien entendu.'\\n- ADAPTATION : Dès que l'utilisateur choisit 'Tu' ou 'Vous', adapte ta grammaire IMMÉDIATEMENT pour le reste de la conversation.\\n- ACKNOWLEDGMENT : Valide brièvement la réponse précédente ('C'est noté', 'Entendu', 'Très beau choix') avant de poser la suivante.\\n\\n# SCRIPTS DE QUESTIONS (À adapter naturellement)\\n- Pour la Politesse : 'Pour que vous soyez à l'aise, préférez-vous que je vous vouvoie ou qu'on se tutoie ?'\\n- Pour le Destinataire : 'Pour qui écrivez-vous ce livre ? Vos enfants, le public, ou pour vous-même ?'\\n- Pour le Style : 'Quel ton préférez-vous : votre façon naturelle de parler, ou un style plus littéraire et romancé ?'\\n- Pour Finir (Une fois tout validé) : 'Excellent. Alors, détendez-vous. Pour notre première vraie séance, par quoi aimeriez-vous commencer ? Vos premiers souvenirs ou autre chose ?'\"}\n      ]\n    }\n  }\n}",
                                                                "status": "200",
                                                                "headers": []
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1500,
                                                                    "y": 600
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "headers": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "expect": [
                                                                    {
                                                                        "name": "status",
                                                                        "type": "uinteger",
                                                                        "label": "Status",
                                                                        "required": true,
                                                                        "validate": {
                                                                            "min": 100
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "body",
                                                                        "type": "any",
                                                                        "label": "Body"
                                                                    },
                                                                    {
                                                                        "name": "headers",
                                                                        "spec": [
                                                                            {
                                                                                "name": "key",
                                                                                "type": "text",
                                                                                "label": "Key",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 256
                                                                                }
                                                                            },
                                                                            {
                                                                                "name": "value",
                                                                                "type": "text",
                                                                                "label": "Value",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 4096
                                                                                }
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Custom headers",
                                                                        "validate": {
                                                                            "maxItems": 16
                                                                        }
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 40,
                                                            "module": "supabase:searchRows",
                                                            "version": 1,
                                                            "parameters": {
                                                                "__IMTCONN__": 3941672
                                                            },
                                                            "filter": {
                                                                "name": "Phase = Clôture",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{28.phase}}",
                                                                            "b": "Finalisation",
                                                                            "o": "text:equal"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "limit": "100",
                                                                "table": "Books",
                                                                "search": [
                                                                    [
                                                                        {
                                                                            "a": "client_id",
                                                                            "b": "{{28.id}}",
                                                                            "o": "text:eq."
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1500,
                                                                    "y": 900
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "table": {
                                                                            "mode": "chose",
                                                                            "label": "Books",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "search",
                                                                                    "type": "filter",
                                                                                    "label": "Search criteria",
                                                                                    "options": {
                                                                                        "logic": "and",
                                                                                        "store": [
                                                                                            {
                                                                                                "label": "id",
                                                                                                "value": "id"
                                                                                            },
                                                                                            {
                                                                                                "label": "created_at",
                                                                                                "value": "created_at"
                                                                                            },
                                                                                            {
                                                                                                "label": "client_id",
                                                                                                "value": "client_id"
                                                                                            },
                                                                                            {
                                                                                                "label": "title",
                                                                                                "value": "title"
                                                                                            },
                                                                                            {
                                                                                                "label": "full_manuscript",
                                                                                                "value": "full_manuscript"
                                                                                            },
                                                                                            {
                                                                                                "label": "style",
                                                                                                "value": "style"
                                                                                            },
                                                                                            {
                                                                                                "label": "context",
                                                                                                "value": "context"
                                                                                            },
                                                                                            {
                                                                                                "label": "timeline",
                                                                                                "value": "timeline"
                                                                                            },
                                                                                            {
                                                                                                "label": "status",
                                                                                                "value": "status"
                                                                                            },
                                                                                            {
                                                                                                "label": "current_subject",
                                                                                                "value": "current_subject"
                                                                                            },
                                                                                            {
                                                                                                "label": "next_question",
                                                                                                "value": "next_question"
                                                                                            }
                                                                                        ],
                                                                                        "operators": [
                                                                                            {
                                                                                                "label": "Text",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "text:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "text:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Contains (case sensitive)",
                                                                                                        "value": "text:like."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Contains (case insensitive)",
                                                                                                        "value": "text:ilike."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Numbers",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "number:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "number:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Greater than",
                                                                                                        "value": "number:gt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Less than",
                                                                                                        "value": "number:lt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Greater than or equal to",
                                                                                                        "value": "number:gte."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Less than or equal to",
                                                                                                        "value": "number:lte."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Date",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "date:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "date:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Later than",
                                                                                                        "value": "date:gt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Earlier than",
                                                                                                        "value": "date:lt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Later than or equal to",
                                                                                                        "value": "date:gte."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Earlier than or equal to",
                                                                                                        "value": "date:lte."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Boolean",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "boolean:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "boolean:neq."
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "parameters": {
                                                                        "__IMTCONN__": {
                                                                            "data": {
                                                                                "scoped": "true",
                                                                                "connection": "supabase"
                                                                            },
                                                                            "label": "My Supabase connection"
                                                                        }
                                                                    }
                                                                },
                                                                "parameters": [
                                                                    {
                                                                        "name": "__IMTCONN__",
                                                                        "type": "account:supabase",
                                                                        "label": "Connection",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "expect": [
                                                                    {
                                                                        "name": "table",
                                                                        "type": "select",
                                                                        "label": "Table",
                                                                        "required": true
                                                                    },
                                                                    {
                                                                        "name": "limit",
                                                                        "type": "uinteger",
                                                                        "label": "Limit"
                                                                    },
                                                                    {
                                                                        "name": "search",
                                                                        "type": "filter",
                                                                        "label": "Search criteria",
                                                                        "options": {
                                                                            "logic": "and",
                                                                            "store": [
                                                                                {
                                                                                    "label": "id",
                                                                                    "value": "id"
                                                                                },
                                                                                {
                                                                                    "label": "created_at",
                                                                                    "value": "created_at"
                                                                                },
                                                                                {
                                                                                    "label": "client_id",
                                                                                    "value": "client_id"
                                                                                },
                                                                                {
                                                                                    "label": "title",
                                                                                    "value": "title"
                                                                                },
                                                                                {
                                                                                    "label": "full_manuscript",
                                                                                    "value": "full_manuscript"
                                                                                },
                                                                                {
                                                                                    "label": "style",
                                                                                    "value": "style"
                                                                                },
                                                                                {
                                                                                    "label": "context",
                                                                                    "value": "context"
                                                                                },
                                                                                {
                                                                                    "label": "timeline",
                                                                                    "value": "timeline"
                                                                                },
                                                                                {
                                                                                    "label": "status",
                                                                                    "value": "status"
                                                                                },
                                                                                {
                                                                                    "label": "current_subject",
                                                                                    "value": "current_subject"
                                                                                },
                                                                                {
                                                                                    "label": "next_question",
                                                                                    "value": "next_question"
                                                                                }
                                                                            ],
                                                                            "operators": [
                                                                                {
                                                                                    "label": "Text",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "text:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "text:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Contains (case sensitive)",
                                                                                            "value": "text:like."
                                                                                        },
                                                                                        {
                                                                                            "label": "Contains (case insensitive)",
                                                                                            "value": "text:ilike."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Numbers",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "number:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "number:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Greater than",
                                                                                            "value": "number:gt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Less than",
                                                                                            "value": "number:lt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Greater than or equal to",
                                                                                            "value": "number:gte."
                                                                                        },
                                                                                        {
                                                                                            "label": "Less than or equal to",
                                                                                            "value": "number:lte."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Date",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "date:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "date:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Later than",
                                                                                            "value": "date:gt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Earlier than",
                                                                                            "value": "date:lt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Later than or equal to",
                                                                                            "value": "date:gte."
                                                                                        },
                                                                                        {
                                                                                            "label": "Earlier than or equal to",
                                                                                            "value": "date:lte."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Boolean",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "boolean:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "boolean:neq."
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "interface": [
                                                                    {
                                                                        "name": "__IMTLENGTH__",
                                                                        "type": "uinteger",
                                                                        "label": "Total number of bundles"
                                                                    },
                                                                    {
                                                                        "name": "__IMTINDEX__",
                                                                        "type": "uinteger",
                                                                        "label": "Bundle order position"
                                                                    },
                                                                    {
                                                                        "name": "id",
                                                                        "type": "text",
                                                                        "label": "id"
                                                                    },
                                                                    {
                                                                        "name": "created_at",
                                                                        "type": "text",
                                                                        "label": "created_at"
                                                                    },
                                                                    {
                                                                        "name": "client_id",
                                                                        "type": "text",
                                                                        "label": "client_id"
                                                                    },
                                                                    {
                                                                        "name": "title",
                                                                        "type": "text",
                                                                        "label": "title"
                                                                    },
                                                                    {
                                                                        "name": "full_manuscript",
                                                                        "type": "text",
                                                                        "label": "full_manuscript"
                                                                    },
                                                                    {
                                                                        "name": "style",
                                                                        "type": "text",
                                                                        "label": "style"
                                                                    },
                                                                    {
                                                                        "name": "context",
                                                                        "type": "text",
                                                                        "label": "context"
                                                                    },
                                                                    {
                                                                        "name": "timeline",
                                                                        "type": "text",
                                                                        "label": "timeline"
                                                                    },
                                                                    {
                                                                        "name": "status",
                                                                        "type": "text",
                                                                        "label": "status"
                                                                    },
                                                                    {
                                                                        "name": "current_subject",
                                                                        "type": "text",
                                                                        "label": "current_subject"
                                                                    },
                                                                    {
                                                                        "name": "next_question",
                                                                        "type": "text",
                                                                        "label": "next_question"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        {
                                                            "id": 19,
                                                            "module": "gateway:WebhookRespond",
                                                            "version": 1,
                                                            "parameters": {},
                                                            "mapper": {
                                                                "body": "{\n  \"assistant\": {\n    \"transcriber\": {\"provider\": \"deepgram\", \"model\": \"nova-2\", \"language\": \"fr\"}, \"silenceTimeoutSeconds\": 60,\n    \"firstMessageMode\": \"assistant-speaks-first\",\n    \"name\": \"Loomina-Final\",\n    \"voice\": {\"provider\": \"11labs\", \"voiceId\": \"Qrl71rx6Yg8RvyPYRGCQ\", \"model\": \"eleven_turbo_v2_5\"},\n    \"firstMessage\": \"Bonjour {{28.first_name}}, c'est Loomina. J'ai une nouvelle émouvante à vous annoncer : nous avons parcouru l'essentiel de votre histoire. Votre biographie est presque prête !\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es Loomina. Le livre de {{28.first_name}} est presque terminé (Phase: Finalisation).\\n\\n# TON CLIENT\\n- Nom : {{28.first_name}}\\n- Style d'écriture : {{40.style}}\\n\\n# OBJECTIFS DE L'APPEL\\n1. Célébration : Félicite-le chaleureusement pour tout ce chemin parcouru. C'est un accomplissement important.\\n2. Le Titre : Demande-lui s'il a choisi le TITRE définitif de son œuvre. S'il n'a pas d'idée, propose-lui de l'aider à en trouver un qui correspond au style '{{40.style}}'.\\n3. La Dédicace : Demande s'il souhaite dicter une dédicace spéciale qui sera imprimée sur la première page (pour ses enfants, son conjoint...).\\n4. Conclusion : Rassure-le sur la suite (mise en page et impression).\\n\\nIMPORTANT : Si le client se souvient soudainement d'une anecdote oubliée, écoute-le. Le livre reste ouvert tant qu'on ne raccroche pas.\"\n        }\n      ]\n    }\n  }\n}",
                                                                "status": "200",
                                                                "headers": []
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1800,
                                                                    "y": 900
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "headers": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "expect": [
                                                                    {
                                                                        "name": "status",
                                                                        "type": "uinteger",
                                                                        "label": "Status",
                                                                        "required": true,
                                                                        "validate": {
                                                                            "min": 100
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "body",
                                                                        "type": "any",
                                                                        "label": "Body"
                                                                    },
                                                                    {
                                                                        "name": "headers",
                                                                        "spec": [
                                                                            {
                                                                                "name": "key",
                                                                                "type": "text",
                                                                                "label": "Key",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 256
                                                                                }
                                                                            },
                                                                            {
                                                                                "name": "value",
                                                                                "type": "text",
                                                                                "label": "Value",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 4096
                                                                                }
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Custom headers",
                                                                        "validate": {
                                                                            "maxItems": 16
                                                                        }
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 34,
                            "module": "supabase:searchRows",
                            "version": 1,
                            "parameters": {
                                "__IMTCONN__": 3941672
                            },
                            "filter": {
                                "name": "end_of_call",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{1.message.type}}",
                                            "b": "end-of-call-report",
                                            "o": "text:equal"
                                        }
                                    ],
                                    [
                                        {
                                            "a": "{{1.message.call.durationSeconds}}",
                                            "b": "15",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "limit": "10",
                                "table": "Client",
                                "search": [
                                    [
                                        {
                                            "a": "phone_number",
                                            "b": "{{1.message.call.customer.number}}",
                                            "o": "text:eq."
                                        }
                                    ]
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 600,
                                    "y": 2100
                                },
                                "restore": {
                                    "expect": {
                                        "table": {
                                            "mode": "chose",
                                            "label": "Client",
                                            "nested": [
                                                {
                                                    "name": "search",
                                                    "type": "filter",
                                                    "label": "Search criteria",
                                                    "options": {
                                                        "logic": "and",
                                                        "store": [
                                                            {
                                                                "label": "id",
                                                                "value": "id"
                                                            },
                                                            {
                                                                "label": "created_at",
                                                                "value": "created_at"
                                                            },
                                                            {
                                                                "label": "phone_number",
                                                                "value": "phone_number"
                                                            },
                                                            {
                                                                "label": "name",
                                                                "value": "name"
                                                            },
                                                            {
                                                                "label": "phase",
                                                                "value": "phase"
                                                            },
                                                            {
                                                                "label": "email",
                                                                "value": "email"
                                                            }
                                                        ],
                                                        "operators": [
                                                            {
                                                                "label": "Text",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "text:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "text:neq."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case sensitive)",
                                                                        "value": "text:like."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case insensitive)",
                                                                        "value": "text:ilike."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Numbers",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "number:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "number:neq."
                                                                    },
                                                                    {
                                                                        "label": "Greater than",
                                                                        "value": "number:gt."
                                                                    },
                                                                    {
                                                                        "label": "Less than",
                                                                        "value": "number:lt."
                                                                    },
                                                                    {
                                                                        "label": "Greater than or equal to",
                                                                        "value": "number:gte."
                                                                    },
                                                                    {
                                                                        "label": "Less than or equal to",
                                                                        "value": "number:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Date",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "date:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "date:neq."
                                                                    },
                                                                    {
                                                                        "label": "Later than",
                                                                        "value": "date:gt."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than",
                                                                        "value": "date:lt."
                                                                    },
                                                                    {
                                                                        "label": "Later than or equal to",
                                                                        "value": "date:gte."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than or equal to",
                                                                        "value": "date:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Boolean",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "boolean:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "boolean:neq."
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    "parameters": {
                                        "__IMTCONN__": {
                                            "data": {
                                                "scoped": "true",
                                                "connection": "supabase"
                                            },
                                            "label": "My Supabase connection"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "__IMTCONN__",
                                        "type": "account:supabase",
                                        "label": "Connection",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "table",
                                        "type": "select",
                                        "label": "Table",
                                        "required": true
                                    },
                                    {
                                        "name": "limit",
                                        "type": "uinteger",
                                        "label": "Limit"
                                    },
                                    {
                                        "name": "search",
                                        "type": "filter",
                                        "label": "Search criteria",
                                        "options": {
                                            "logic": "and",
                                            "store": [
                                                {
                                                    "label": "id",
                                                    "value": "id"
                                                },
                                                {
                                                    "label": "created_at",
                                                    "value": "created_at"
                                                },
                                                {
                                                    "label": "phone_number",
                                                    "value": "phone_number"
                                                },
                                                {
                                                    "label": "name",
                                                    "value": "name"
                                                },
                                                {
                                                    "label": "phase",
                                                    "value": "phase"
                                                },
                                                {
                                                    "label": "email",
                                                    "value": "email"
                                                }
                                            ],
                                            "operators": [
                                                {
                                                    "label": "Text",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "text:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "text:neq."
                                                        },
                                                        {
                                                            "label": "Contains (case sensitive)",
                                                            "value": "text:like."
                                                        },
                                                        {
                                                            "label": "Contains (case insensitive)",
                                                            "value": "text:ilike."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Numbers",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "number:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "number:neq."
                                                        },
                                                        {
                                                            "label": "Greater than",
                                                            "value": "number:gt."
                                                        },
                                                        {
                                                            "label": "Less than",
                                                            "value": "number:lt."
                                                        },
                                                        {
                                                            "label": "Greater than or equal to",
                                                            "value": "number:gte."
                                                        },
                                                        {
                                                            "label": "Less than or equal to",
                                                            "value": "number:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Date",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "date:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "date:neq."
                                                        },
                                                        {
                                                            "label": "Later than",
                                                            "value": "date:gt."
                                                        },
                                                        {
                                                            "label": "Earlier than",
                                                            "value": "date:lt."
                                                        },
                                                        {
                                                            "label": "Later than or equal to",
                                                            "value": "date:gte."
                                                        },
                                                        {
                                                            "label": "Earlier than or equal to",
                                                            "value": "date:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Boolean",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "boolean:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "boolean:neq."
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    }
                                ],
                                "interface": [
                                    {
                                        "name": "__IMTLENGTH__",
                                        "type": "uinteger",
                                        "label": "Total number of bundles"
                                    },
                                    {
                                        "name": "__IMTINDEX__",
                                        "type": "uinteger",
                                        "label": "Bundle order position"
                                    },
                                    {
                                        "name": "id",
                                        "type": "text",
                                        "label": "id"
                                    },
                                    {
                                        "name": "created_at",
                                        "type": "text",
                                        "label": "created_at"
                                    },
                                    {
                                        "name": "phone_number",
                                        "type": "text",
                                        "label": "phone_number"
                                    },
                                    {
                                        "name": "name",
                                        "type": "text",
                                        "label": "name"
                                    },
                                    {
                                        "name": "phase",
                                        "type": "text",
                                        "label": "phase"
                                    },
                                    {
                                        "name": "email",
                                        "type": "text",
                                        "label": "email"
                                    }
                                ]
                            }
                        },
                        {
                            "id": 300,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "parameters": {
                                "else": 0
                            },
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 900,
                                    "y": 2100
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 200,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "filter": {
                                                "name": "Phase = Onboarding",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{34.phase}}",
                                                            "b": "Onboarding",
                                                            "o": "text:equal"
                                                        }
                                                    ],
                                                    [
                                                        {
                                                            "a": "{{34.phase}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "select": "chat",
                                                "temperature": "1",
                                                "top_p": "1",
                                                "n_completions": "1",
                                                "model": "gpt-4o",
                                                "max_tokens": "500",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "Analyze the transcript. Extract Onboarding Data.\\nOutput JSON ONLY: { \"politeness_preference\": \"tu\" | \"vous\", \"target_audience\": \"family\" | \"public\", \"writing_style\": \"conversational\" | \"literary\", \"narrative_scope\": \"string\", \"onboarding_complete\": boolean }"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "{{1.message.call.transcript}}",
                                                        "imageDetail": "auto"
                                                    }
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1200,
                                                    "y": 1200
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "My OpenAI connection",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o (system)Fast, intelligent, flexible GPT model"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "response_format": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "type": "array",
                                                        "label": "Token Probability",
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability",
                                                            "name": "value"
                                                        }
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        },
                                                        "spec": {
                                                            "type": "text",
                                                            "label": "Stop Sequence",
                                                            "name": "value"
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "type": "array",
                                                        "label": "Other Input Parameters",
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter",
                                                            "name": "value"
                                                        }
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true,
                                                        "spec": {
                                                            "label": "Message",
                                                            "type": "collection",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "required": true,
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "default": true,
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "mappable": false,
                                                                                        "options": [
                                                                                            {
                                                                                                "value": "url",
                                                                                                "label": "URL",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageUrl",
                                                                                                        "label": "Image URL",
                                                                                                        "type": "url",
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "value": "file",
                                                                                                "label": "Image File",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "label": "Image",
                                                                                                        "type": "collection",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ],
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`."
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ]
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ]
                                                                                    },
                                                                                    {
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "options": [
                                                                                            {
                                                                                                "value": "auto",
                                                                                                "default": true,
                                                                                                "label": "Auto"
                                                                                            },
                                                                                            {
                                                                                                "value": "high",
                                                                                                "label": "High"
                                                                                            },
                                                                                            {
                                                                                                "value": "low",
                                                                                                "label": "Low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "tool_calls",
                                                                                        "label": "Tool Calls",
                                                                                        "type": "array",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mode": "edit",
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        },
                                                                                        "spec": {
                                                                                            "label": "Tool Call",
                                                                                            "type": "collection",
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID",
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`."
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "type": "collection",
                                                                                                    "label": "Function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "name",
                                                                                                            "label": "Name",
                                                                                                            "type": "text",
                                                                                                            "required": true,
                                                                                                            "help": "The name of the function previously called."
                                                                                                        },
                                                                                                        {
                                                                                                            "name": "arguments",
                                                                                                            "label": "Arguments",
                                                                                                            "type": "text",
                                                                                                            "required": true,
                                                                                                            "help": "The arguments previously output by the AI."
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ],
                                                                                "value": "system"
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "label": "Tool Call ID.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "required": true,
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`."
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ],
                                                            "name": "value"
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 201,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "table": "Client",
                                                "id": "{{34.id}}",
                                                "row_id": "{{34.id}}",
                                                "politeness_preference": "{{200.choices[].message.content.politeness_preference}}",
                                                "target_audience": "{{200.choices[].message.content.target_audience}}",
                                                "writing_style": "{{200.choices[].message.content.writing_style}}",
                                                "narrative_scope": "{{200.choices[].message.content.narrative_scope}}",
                                                "onboarding_status": "{{200.choices[].message.content.onboarding_complete}}",
                                                "phase": "{{if(200.choices[].message.content.onboarding_complete = true; \"Interview\"; 34.phase)}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1500,
                                                    "y": 1200
                                                }
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 35,
                                            "module": "supabase:searchRows",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "filter": {
                                                "name": "Phase = Interview",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{34.phase}}",
                                                            "b": "Interview",
                                                            "o": "text:equal"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "limit": "10",
                                                "table": "Books",
                                                "search": [
                                                    [
                                                        {
                                                            "a": "client_id",
                                                            "b": "{{34.id}}",
                                                            "o": "text:eq."
                                                        }
                                                    ]
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1200,
                                                    "y": 2100
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "label": "Books",
                                                            "nested": [
                                                                {
                                                                    "name": "search",
                                                                    "type": "filter",
                                                                    "label": "Search criteria",
                                                                    "options": {
                                                                        "logic": "and",
                                                                        "store": [
                                                                            {
                                                                                "label": "id",
                                                                                "value": "id"
                                                                            },
                                                                            {
                                                                                "label": "created_at",
                                                                                "value": "created_at"
                                                                            },
                                                                            {
                                                                                "label": "client_id",
                                                                                "value": "client_id"
                                                                            },
                                                                            {
                                                                                "label": "title",
                                                                                "value": "title"
                                                                            },
                                                                            {
                                                                                "label": "full_manuscript",
                                                                                "value": "full_manuscript"
                                                                            },
                                                                            {
                                                                                "label": "style",
                                                                                "value": "style"
                                                                            },
                                                                            {
                                                                                "label": "context",
                                                                                "value": "context"
                                                                            },
                                                                            {
                                                                                "label": "timeline",
                                                                                "value": "timeline"
                                                                            },
                                                                            {
                                                                                "label": "status",
                                                                                "value": "status"
                                                                            },
                                                                            {
                                                                                "label": "current_subject",
                                                                                "value": "current_subject"
                                                                            },
                                                                            {
                                                                                "label": "next_question",
                                                                                "value": "next_question"
                                                                            }
                                                                        ],
                                                                        "operators": [
                                                                            {
                                                                                "label": "Text",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "Equals",
                                                                                        "value": "text:eq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Does not equal",
                                                                                        "value": "text:neq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Contains (case sensitive)",
                                                                                        "value": "text:like."
                                                                                    },
                                                                                    {
                                                                                        "label": "Contains (case insensitive)",
                                                                                        "value": "text:ilike."
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Numbers",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "Equals",
                                                                                        "value": "number:eq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Does not equal",
                                                                                        "value": "number:neq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Greater than",
                                                                                        "value": "number:gt."
                                                                                    },
                                                                                    {
                                                                                        "label": "Less than",
                                                                                        "value": "number:lt."
                                                                                    },
                                                                                    {
                                                                                        "label": "Greater than or equal to",
                                                                                        "value": "number:gte."
                                                                                    },
                                                                                    {
                                                                                        "label": "Less than or equal to",
                                                                                        "value": "number:lte."
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Date",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "Equals",
                                                                                        "value": "date:eq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Does not equal",
                                                                                        "value": "date:neq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Later than",
                                                                                        "value": "date:gt."
                                                                                    },
                                                                                    {
                                                                                        "label": "Earlier than",
                                                                                        "value": "date:lt."
                                                                                    },
                                                                                    {
                                                                                        "label": "Later than or equal to",
                                                                                        "value": "date:gte."
                                                                                    },
                                                                                    {
                                                                                        "label": "Earlier than or equal to",
                                                                                        "value": "date:lte."
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Boolean",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "Equals",
                                                                                        "value": "boolean:eq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Does not equal",
                                                                                        "value": "boolean:neq."
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            },
                                                            "label": "My Supabase connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "limit",
                                                        "type": "uinteger",
                                                        "label": "Limit"
                                                    },
                                                    {
                                                        "name": "search",
                                                        "type": "filter",
                                                        "label": "Search criteria",
                                                        "options": {
                                                            "logic": "and",
                                                            "store": [
                                                                {
                                                                    "label": "id",
                                                                    "value": "id"
                                                                },
                                                                {
                                                                    "label": "created_at",
                                                                    "value": "created_at"
                                                                },
                                                                {
                                                                    "label": "client_id",
                                                                    "value": "client_id"
                                                                },
                                                                {
                                                                    "label": "title",
                                                                    "value": "title"
                                                                },
                                                                {
                                                                    "label": "full_manuscript",
                                                                    "value": "full_manuscript"
                                                                },
                                                                {
                                                                    "label": "style",
                                                                    "value": "style"
                                                                },
                                                                {
                                                                    "label": "context",
                                                                    "value": "context"
                                                                },
                                                                {
                                                                    "label": "timeline",
                                                                    "value": "timeline"
                                                                },
                                                                {
                                                                    "label": "status",
                                                                    "value": "status"
                                                                },
                                                                {
                                                                    "label": "current_subject",
                                                                    "value": "current_subject"
                                                                },
                                                                {
                                                                    "label": "next_question",
                                                                    "value": "next_question"
                                                                }
                                                            ],
                                                            "operators": [
                                                                {
                                                                    "label": "Text",
                                                                    "options": [
                                                                        {
                                                                            "label": "Equals",
                                                                            "value": "text:eq."
                                                                        },
                                                                        {
                                                                            "label": "Does not equal",
                                                                            "value": "text:neq."
                                                                        },
                                                                        {
                                                                            "label": "Contains (case sensitive)",
                                                                            "value": "text:like."
                                                                        },
                                                                        {
                                                                            "label": "Contains (case insensitive)",
                                                                            "value": "text:ilike."
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "label": "Numbers",
                                                                    "options": [
                                                                        {
                                                                            "label": "Equals",
                                                                            "value": "number:eq."
                                                                        },
                                                                        {
                                                                            "label": "Does not equal",
                                                                            "value": "number:neq."
                                                                        },
                                                                        {
                                                                            "label": "Greater than",
                                                                            "value": "number:gt."
                                                                        },
                                                                        {
                                                                            "label": "Less than",
                                                                            "value": "number:lt."
                                                                        },
                                                                        {
                                                                            "label": "Greater than or equal to",
                                                                            "value": "number:gte."
                                                                        },
                                                                        {
                                                                            "label": "Less than or equal to",
                                                                            "value": "number:lte."
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "label": "Date",
                                                                    "options": [
                                                                        {
                                                                            "label": "Equals",
                                                                            "value": "date:eq."
                                                                        },
                                                                        {
                                                                            "label": "Does not equal",
                                                                            "value": "date:neq."
                                                                        },
                                                                        {
                                                                            "label": "Later than",
                                                                            "value": "date:gt."
                                                                        },
                                                                        {
                                                                            "label": "Earlier than",
                                                                            "value": "date:lt."
                                                                        },
                                                                        {
                                                                            "label": "Later than or equal to",
                                                                            "value": "date:gte."
                                                                        },
                                                                        {
                                                                            "label": "Earlier than or equal to",
                                                                            "value": "date:lte."
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "label": "Boolean",
                                                                    "options": [
                                                                        {
                                                                            "label": "Equals",
                                                                            "value": "boolean:eq."
                                                                        },
                                                                        {
                                                                            "label": "Does not equal",
                                                                            "value": "boolean:neq."
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "__IMTLENGTH__",
                                                        "type": "uinteger",
                                                        "label": "Total number of bundles"
                                                    },
                                                    {
                                                        "name": "__IMTINDEX__",
                                                        "type": "uinteger",
                                                        "label": "Bundle order position"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "client_id",
                                                        "type": "text",
                                                        "label": "client_id"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "title"
                                                    },
                                                    {
                                                        "name": "full_manuscript",
                                                        "type": "text",
                                                        "label": "full_manuscript"
                                                    },
                                                    {
                                                        "name": "style",
                                                        "type": "text",
                                                        "label": "style"
                                                    },
                                                    {
                                                        "name": "context",
                                                        "type": "text",
                                                        "label": "context"
                                                    },
                                                    {
                                                        "name": "timeline",
                                                        "type": "text",
                                                        "label": "timeline"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text",
                                                        "label": "status"
                                                    },
                                                    {
                                                        "name": "current_subject",
                                                        "type": "text",
                                                        "label": "current_subject"
                                                    },
                                                    {
                                                        "name": "next_question",
                                                        "type": "text",
                                                        "label": "next_question"
                                                    }
                                                ]
                                            },
                                            "onerror": [
                                                {
                                                    "id": 24,
                                                    "module": "builtin:Break",
                                                    "version": 1,
                                                    "parameters": {},
                                                    "mapper": {
                                                        "count": "3",
                                                        "retry": true,
                                                        "interval": "1"
                                                    },
                                                    "metadata": {
                                                        "designer": {
                                                            "x": 1500,
                                                            "y": 2700
                                                        },
                                                        "restore": {
                                                            "expect": {
                                                                "retry": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "expect": [
                                                            {
                                                                "name": "retry",
                                                                "type": "boolean",
                                                                "label": "Automatically complete execution",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "count",
                                                                "type": "uinteger",
                                                                "label": "Number of attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 10000,
                                                                    "min": 1
                                                                }
                                                            },
                                                            {
                                                                "name": "interval",
                                                                "type": "uinteger",
                                                                "label": "Interval between attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 44640,
                                                                    "min": 1
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "id": 3,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "mapper": {
                                                "model": "gpt-4o",
                                                "top_p": "1",
                                                "select": "chat",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "{\n  \"assistant\": {\n    \"name\": \"Loomina-Ghostwriter\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es l'Écrivain Fantôme de Loomina, un maître du récit autobiographique. Ton talent réside dans ta capacité à transformer une conversation orale en une prose élégante, immersive et structurée.\\n\\n# TON CLIENT & SON STYLE\\n- Nom du client : {{34.name}}\\n- Style d'écriture imposé : '{{35.style}}' (Tu dois IMPÉRATIVEMENT adopter le vocabulaire, la syntaxe et le rythme propres à ce style).\\n\\n# TA MISSION : LA TRANSFORMATION NARRATIVE\\nTa tâche est d'extraire la substance émotionnelle et factuelle du transcript pour rédiger un chapitre à la première personne (\\\"Je\\\"), digne d'être imprimé.\\n\\n***\\n\\n# COMPORTEMENT ÉTAPE PAR ÉTAPE (LOGIQUE CRITIQUE)\\n1. **GATEKEEPER (ANALYSE DE PERTINENCE)** : Lis le transcript. S'il ne contient PAS de contenu biographique exploitable (ex: uniquement des tests micro, \\\"allô\\\", \\\"je te rappelle\\\", silence, ou moins de 3 phrases de récit), réponds UNIQUEMENT par le mot : **ABORT**.\\n2. **EXTRACTION DES FAITS** : Identifie mentalement les lieux, les prénoms, les dates et les actions clés.\\n3. **INCARNATION** : Enfile la peau du client. Ce n'est pas toi qui racontes son histoire, c'est LUI qui écrit son livre à travers ta plume.\\n\\n***\\n\\n# RÈGLES D'OR DE RÉDACTION\\n- **NETTOYAGE RADICAL** : Supprime les tics de langage (euh, ben, alors), les hésitations, les répétitions et toutes les interactions techniques avec l'IA.\\n- **ENRICHISSEMENT SENSORIEL** : Ne te contente pas de lister les faits. Si le client dit \\\"je suis allé à la plage\\\", évoque l'odeur du sel ou la sensation du sable. Règle : Ne crée pas de nouveaux faits, mais amplifie la perception de ceux existants.\\n- **RÉSONANCE ÉMOTIONNELLE** : Analyse l'implicite. Derrière un fait, cherche le sentiment (nostalgie, fierté, blessure). Le lecteur doit ressentir ce que le client a vécu.\\n- **FLUIDITÉ ROMANESQUE** : Le texte doit s'enchaîner sans couture. Évite les structures répétitives type \\\"Puis j'ai fait... Après j'ai vu...\\\". Utilise des transitions élégantes.\\n\\n# FORMAT DE SORTIE (STRICT)\\nTITRE : [Un titre court, évocateur et poétique]\\n\\nRÉCIT :\\n[Ton texte rédigé ici, organisé en paragraphes aérés]\"\n        }\n      ]\n    }\n  }\n}"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "Voici le texte: {{1.message.call.transcript}}",
                                                        "imageDetail": "auto"
                                                    }
                                                ],
                                                "max_tokens": "2048",
                                                "temperature": "1",
                                                "n_completions": "1",
                                                "response_format": "text"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1500,
                                                    "y": 1950
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o (system)Fast, intelligent, flexible GPT model"
                                                        },
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Text"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "My OpenAI connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability"
                                                        },
                                                        "type": "array",
                                                        "label": "Token Probability"
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text",
                                                            "label": "Stop Sequence"
                                                        },
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter"
                                                        },
                                                        "type": "array",
                                                        "label": "Other Input Parameters"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "URL",
                                                                                                "value": "url",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab.",
                                                                                                        "name": "imageUrl",
                                                                                                        "type": "url",
                                                                                                        "label": "Image URL"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Image File",
                                                                                                "value": "file",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`.",
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ],
                                                                                                        "type": "collection",
                                                                                                        "label": "Image"
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "mappable": false
                                                                                    },
                                                                                    {
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "Auto",
                                                                                                "value": "auto",
                                                                                                "default": true
                                                                                            },
                                                                                            {
                                                                                                "label": "High",
                                                                                                "value": "high"
                                                                                            },
                                                                                            {
                                                                                                "label": "Low",
                                                                                                "value": "low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ],
                                                                                "default": true
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "mode": "edit",
                                                                                        "name": "tool_calls",
                                                                                        "spec": {
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID"
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "help": "The name of the function previously called.",
                                                                                                            "name": "name",
                                                                                                            "type": "text",
                                                                                                            "label": "Name",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "help": "The arguments previously output by the AI.",
                                                                                                            "name": "arguments",
                                                                                                            "type": "text",
                                                                                                            "label": "Arguments",
                                                                                                            "required": true
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection",
                                                                                                    "label": "Function"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Tool Call"
                                                                                        },
                                                                                        "type": "array",
                                                                                        "label": "Tool Calls",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "value": "system",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "label": "Tool Call ID.",
                                                                                        "required": true
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Message"
                                                        },
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ]
                                            },
                                            "onerror": [
                                                {
                                                    "id": 16,
                                                    "module": "builtin:Break",
                                                    "version": 1,
                                                    "parameters": {},
                                                    "mapper": {
                                                        "count": "3",
                                                        "retry": true,
                                                        "interval": "1"
                                                    },
                                                    "metadata": {
                                                        "designer": {
                                                            "x": 1800,
                                                            "y": 2400
                                                        },
                                                        "restore": {
                                                            "expect": {
                                                                "retry": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "expect": [
                                                            {
                                                                "name": "retry",
                                                                "type": "boolean",
                                                                "label": "Automatically complete execution",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "count",
                                                                "type": "uinteger",
                                                                "label": "Number of attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 10000,
                                                                    "min": 1
                                                                }
                                                            },
                                                            {
                                                                "name": "interval",
                                                                "type": "uinteger",
                                                                "label": "Interval between attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 44640,
                                                                    "min": 1
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "id": 36,
                                            "module": "supabase:createARow",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "filter": {
                                                "name": "Contenu Valide",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{3.choices[].message.content}}",
                                                            "b": "Abort",
                                                            "o": "text:notequal"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "table": "Chapters",
                                                "book_id": "{{35.id}}",
                                                "call_id": "{{34.id}}",
                                                "content": "{{3.choices[].message.content}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1800,
                                                    "y": 1800
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "label": "Chapters",
                                                            "nested": [
                                                                {
                                                                    "help": "Defaults to gen_random_uuid(). Note:\nThis is a Primary Key.<pk/>",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Defaults to now(). ",
                                                                    "name": "created_at",
                                                                    "type": "text",
                                                                    "label": "created_at",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Note:\nThis is a Foreign Key to `Books.id`.<fk table='Books' column='id'/>",
                                                                    "name": "book_id",
                                                                    "type": "text",
                                                                    "label": "book_id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Note:\nThis is a Foreign Key to `Calls.id`.<fk table='Calls' column='id'/>",
                                                                    "name": "call_id",
                                                                    "type": "text",
                                                                    "label": "call_id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "chapter_number",
                                                                    "type": "integer",
                                                                    "label": "chapter_number",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "title",
                                                                    "type": "text",
                                                                    "label": "title",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "content",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "status",
                                                                    "type": "text",
                                                                    "label": "status",
                                                                    "options": null,
                                                                    "required": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            },
                                                            "label": "My Supabase connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "book_id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "call_id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "chapter_number",
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "content",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "book_id",
                                                        "type": "text",
                                                        "label": "book_id"
                                                    },
                                                    {
                                                        "name": "call_id",
                                                        "type": "text",
                                                        "label": "call_id"
                                                    },
                                                    {
                                                        "name": "chapter_number",
                                                        "type": "number",
                                                        "label": "chapter_number"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "title"
                                                    },
                                                    {
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "content"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text",
                                                        "label": "status"
                                                    }
                                                ]
                                            },
                                            "onerror": [
                                                {
                                                    "id": 25,
                                                    "module": "builtin:Break",
                                                    "version": 1,
                                                    "parameters": {},
                                                    "mapper": {
                                                        "count": "3",
                                                        "retry": true,
                                                        "interval": "1"
                                                    },
                                                    "metadata": {
                                                        "designer": {
                                                            "x": 2100,
                                                            "y": 2100
                                                        },
                                                        "restore": {
                                                            "expect": {
                                                                "retry": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "expect": [
                                                            {
                                                                "name": "retry",
                                                                "type": "boolean",
                                                                "label": "Automatically complete execution",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "count",
                                                                "type": "uinteger",
                                                                "label": "Number of attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 10000,
                                                                    "min": 1
                                                                }
                                                            },
                                                            {
                                                                "name": "interval",
                                                                "type": "uinteger",
                                                                "label": "Interval between attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 44640,
                                                                    "min": 1
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "id": 27,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "mapper": {
                                                "model": "chatgpt-4o-latest",
                                                "top_p": "1",
                                                "select": "chat",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "Tu es un Éditeur Expert. Ta tâche est purement technique : tu dois assembler un nouveau chapitre à la suite d'un manuscrit existant. Tu ne dois rien réécrire, juste fusionner les textes proprement avec un saut de ligne."
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "Voici le MANUSCRIT EXISTANT :\n{{35.full_manuscript}}\n\nVoici le NOUVEAU CHAPITRE à ajouter :\n{{3.choices[].message.content}}\n\nTâche : Renvoie-moi l'intégralité du texte (Manuscrit + Nouveau Chapitre) mis bout à bout. Ne mets aucune phrase d'intro, juste le texte complet.",
                                                        "imageDetail": "auto"
                                                    }
                                                ],
                                                "max_tokens": "2048",
                                                "temperature": "1",
                                                "n_completions": "1",
                                                "response_format": "text"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 1650
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "chatgpt-4o-latest (system)GPT-4o model used in ChatGPT"
                                                        },
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Text"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "My OpenAI connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability"
                                                        },
                                                        "type": "array",
                                                        "label": "Token Probability"
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text",
                                                            "label": "Stop Sequence"
                                                        },
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter"
                                                        },
                                                        "type": "array",
                                                        "label": "Other Input Parameters"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "URL",
                                                                                                "value": "url",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab.",
                                                                                                        "name": "imageUrl",
                                                                                                        "type": "url",
                                                                                                        "label": "Image URL"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Image File",
                                                                                                "value": "file",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`.",
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ],
                                                                                                        "type": "collection",
                                                                                                        "label": "Image"
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "mappable": false
                                                                                    },
                                                                                    {
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "Auto",
                                                                                                "value": "auto",
                                                                                                "default": true
                                                                                            },
                                                                                            {
                                                                                                "label": "High",
                                                                                                "value": "high"
                                                                                            },
                                                                                            {
                                                                                                "label": "Low",
                                                                                                "value": "low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ],
                                                                                "default": true
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "mode": "edit",
                                                                                        "name": "tool_calls",
                                                                                        "spec": {
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID"
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "help": "The name of the function previously called.",
                                                                                                            "name": "name",
                                                                                                            "type": "text",
                                                                                                            "label": "Name",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "help": "The arguments previously output by the AI.",
                                                                                                            "name": "arguments",
                                                                                                            "type": "text",
                                                                                                            "label": "Arguments",
                                                                                                            "required": true
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection",
                                                                                                    "label": "Function"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Tool Call"
                                                                                        },
                                                                                        "type": "array",
                                                                                        "label": "Tool Calls",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "value": "system",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "label": "Tool Call ID.",
                                                                                        "required": true
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Message"
                                                        },
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 8,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "mapper": {
                                                "model": "gpt-4o",
                                                "top_p": "1",
                                                "select": "chat",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "{\n  \"assistant\": {\n    \"name\": \"Loomina-Stratege\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es le Directeur Stratégique de Loomina. Tu es le cerveau froid et logique qui pilote l'avancement du projet.\\nTon rôle N'EST PAS d'écrire le livre, mais d'analyser le transcript pour mettre à jour la base de données client.\\n\\n# DONNÉES D'ENTRÉE\\n- Transcript brut : {{1.message.call.transcript}}\\n- Phase actuelle : {{34.phase}} (Si vide = Onboarding)\\n- Sujet traité lors de cet appel : {{35.current_subject}}\\n\\n# LA CARTE DE NAVIGATION (ORDRE LOGIQUE DES SUJETS)\\nUtilise cette liste pour définir le 'nouveau_sujet' si le précédent est clos :\\n1. Identité & Origines\\n2. Enfance & Adolescence\\n3. Éducation\\n4. Entrée vie adulte\\n5. Vie professionnelle\\n6. Vie personnelle\\n7. Valeurs & Vision\\n8. Moments charnières\\n9. Héritage\\n10. Archives\\n\\n***\\n\\n# MISSION 0 : EXTRACTION DES MÉTA-DONNÉES (CRITIQUE POUR ONBOARDING)\\nSi la phase est \\\"Onboarding\\\", le client a dû définir ses préférences. Analyse le texte et extrais :\\n- **Le Style/Ton** (ex: Humoristique, Solennel, Intime...)\\n- **Le Public** (ex: Pour ses petits-enfants, Public large...)\\n*Si rien n'est mentionné, laisse vide.*\\n\\n# MISSION 1 : AUDIT DE L'AVANCEMENT (NOUVELLE PHASE)\\n1. **Passage à l'INTERVIEW** :\\n   - SI Phase actuelle = \\\"Onboarding\\\" ET que le client a fini les présentations.\\n   - ALORS : \\\"nouvelle_phase\\\": \\\"Interview\\\"\\n2. **Maintien en INTERVIEW** : Tant que le client raconte sa vie.\\n3. **Passage à la FINALISATION** : Si le client dit explicitement avoir terminé.\\n\\n# MISSION 2 : NAVIGATION (PROCHAINE QUESTION)\\nDonne une munition en or à l'agent qui appellera demain (Loomina-Biographe).\\n\\n**Stratégie :**\\n1.  **Le Fil à Tirer** : Cherche un détail mentionné mais pas détaillé dans ce transcript. Formule une question dessus.\\n2.  **Le Suivant** : SI le sujet actuel est épuisé, regarde la \\\"Carte de Navigation\\\" ci-dessus, prends le point suivant, et formule une question d'ouverture sur ce nouveau thème.\\n\\n*Format* : Une phrase d'accroche directe, chaleureuse, prête à être lue par une voix IA.\\n\\n# MISSION 3 : MÉMOIRE CONTEXTUELLE\\nRédige un résumé factuel de 2 phrases sur ce qui vient d'être dit (les faits, pas les émotions).\\n\\n***\\n\\n# FORMAT DE SORTIE (JSON STRICT)\\nRéponds uniquement avec cet objet JSON valide (pas de markdown, pas de guillemets doubles dans les valeurs) :\\n{\\n  \\\"nouvelle_phase\\\": \\\"Onboarding | Interview | Finalisation | Impression\\\",\\n  \\\"nouveau_sujet\\\": \\\"Titre court du sujet pour le prochain appel\\\",\\n  \\\"style_detecte\\\": \\\"Le style demandé par le client (ou null)\\\",\\n  \\\"public_detecte\\\": \\\"Le public visé (ou null)\\\",\\n  \\\"prochaine_question\\\": \\\"La phrase d'accroche exacte (sans guillemets doubles)\\\",\\n  \\\"resume_pour_contexte\\\": \\\"Le résumé factuel.\\\"\\n}\"\n        }\n      ]\n    }\n  }\n}"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "Voici le transcript de l'appel :{{1.message.call.transcript}}",
                                                        "imageDetail": "auto"
                                                    }
                                                ],
                                                "max_tokens": "2048",
                                                "temperature": "1",
                                                "n_completions": "1",
                                                "response_format": "json_object",
                                                "parseJSONResponse": false
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 1650
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o (system)Fast, intelligent, flexible GPT model"
                                                        },
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "JSON Object"
                                                        },
                                                        "parseJSONResponse": {
                                                            "mode": "chose"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "My OpenAI connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability"
                                                        },
                                                        "type": "array",
                                                        "label": "Token Probability"
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text",
                                                            "label": "Stop Sequence"
                                                        },
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter"
                                                        },
                                                        "type": "array",
                                                        "label": "Other Input Parameters"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "URL",
                                                                                                "value": "url",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab.",
                                                                                                        "name": "imageUrl",
                                                                                                        "type": "url",
                                                                                                        "label": "Image URL"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Image File",
                                                                                                "value": "file",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`.",
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ],
                                                                                                        "type": "collection",
                                                                                                        "label": "Image"
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "mappable": false
                                                                                    },
                                                                                    {
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "Auto",
                                                                                                "value": "auto",
                                                                                                "default": true
                                                                                            },
                                                                                            {
                                                                                                "label": "High",
                                                                                                "value": "high"
                                                                                            },
                                                                                            {
                                                                                                "label": "Low",
                                                                                                "value": "low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ],
                                                                                "default": true
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "mode": "edit",
                                                                                        "name": "tool_calls",
                                                                                        "spec": {
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID"
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "help": "The name of the function previously called.",
                                                                                                            "name": "name",
                                                                                                            "type": "text",
                                                                                                            "label": "Name",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "help": "The arguments previously output by the AI.",
                                                                                                            "name": "arguments",
                                                                                                            "type": "text",
                                                                                                            "label": "Arguments",
                                                                                                            "required": true
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection",
                                                                                                    "label": "Function"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Tool Call"
                                                                                        },
                                                                                        "type": "array",
                                                                                        "label": "Tool Calls",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "value": "system",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "label": "Tool Call ID.",
                                                                                        "required": true
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Message"
                                                        },
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    },
                                                    {
                                                        "name": "parseJSONResponse",
                                                        "type": "boolean",
                                                        "label": "Parse JSON Response",
                                                        "required": true
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 12,
                                            "module": "json:ParseJSON",
                                            "version": 1,
                                            "parameters": {
                                                "type": 251087
                                            },
                                            "mapper": {
                                                "json": "{{8.choices[].message.content}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 1650
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "type": {
                                                            "label": "Structure Mémo"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "type",
                                                        "type": "udt",
                                                        "label": "Data structure"
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "json",
                                                        "type": "text",
                                                        "label": "JSON string",
                                                        "required": true
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "help": "",
                                                        "name": "nouvelle_phase",
                                                        "type": "text",
                                                        "label": "Nouvelle phase",
                                                        "default": null,
                                                        "required": false,
                                                        "multiline": false
                                                    },
                                                    {
                                                        "help": "",
                                                        "name": "nouveau_sujet",
                                                        "type": "text",
                                                        "label": "Nouveau sujet",
                                                        "default": null,
                                                        "required": false,
                                                        "multiline": false
                                                    },
                                                    {
                                                        "help": "",
                                                        "name": "prochaine_question",
                                                        "type": "text",
                                                        "label": "Prochaine question",
                                                        "default": null,
                                                        "required": false,
                                                        "multiline": false
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 37,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "id": "{{35.id}}",
                                                "phase": "{{12.nouvelle_phase}}",
                                                "table": "Client"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 1650
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "label": "Client",
                                                            "nested": [
                                                                {
                                                                    "help": "Defaults to gen_random_uuid(). Note:\nThis is a Primary Key.<pk/>",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Defaults to now(). ",
                                                                    "name": "created_at",
                                                                    "type": "text",
                                                                    "label": "created_at",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "phone_number",
                                                                    "type": "text",
                                                                    "label": "phone_number",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "name",
                                                                    "type": "text",
                                                                    "label": "name",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "phase",
                                                                    "type": "text",
                                                                    "label": "phase",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "email",
                                                                    "type": "text",
                                                                    "label": "email",
                                                                    "options": null,
                                                                    "required": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            },
                                                            "label": "My Supabase connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "phone_number",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "name",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "phase",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "email",
                                                        "type": "text"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "phone_number",
                                                        "type": "text",
                                                        "label": "phone_number"
                                                    },
                                                    {
                                                        "name": "name",
                                                        "type": "text",
                                                        "label": "name"
                                                    },
                                                    {
                                                        "name": "phase",
                                                        "type": "text",
                                                        "label": "phase"
                                                    },
                                                    {
                                                        "name": "email",
                                                        "type": "text",
                                                        "label": "email"
                                                    }
                                                ]
                                            },
                                            "onerror": [
                                                {
                                                    "id": 26,
                                                    "module": "builtin:Break",
                                                    "version": 1,
                                                    "parameters": {},
                                                    "mapper": {
                                                        "count": "3",
                                                        "retry": true,
                                                        "interval": "1"
                                                    },
                                                    "metadata": {
                                                        "designer": {
                                                            "x": 3300,
                                                            "y": 1800
                                                        },
                                                        "restore": {
                                                            "expect": {
                                                                "retry": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "expect": [
                                                            {
                                                                "name": "retry",
                                                                "type": "boolean",
                                                                "label": "Automatically complete execution",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "count",
                                                                "type": "uinteger",
                                                                "label": "Number of attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 10000,
                                                                    "min": 1
                                                                }
                                                            },
                                                            {
                                                                "name": "interval",
                                                                "type": "uinteger",
                                                                "label": "Interval between attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 44640,
                                                                    "min": 1
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "id": 39,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "id": "{{36.id}}",
                                                "table": "Books",
                                                "context": "{{12.resume_pour_contexte}}",
                                                "next_question": "{{12.prochaine_question}}",
                                                "current_subject": "{{12.nouveau_sujet}}",
                                                "full_manuscript": "{{27.choices[].message.content}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3300,
                                                    "y": 1500
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "label": "Books",
                                                            "nested": [
                                                                {
                                                                    "help": "Defaults to gen_random_uuid(). Note:\nThis is a Primary Key.<pk/>",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Defaults to now(). ",
                                                                    "name": "created_at",
                                                                    "type": "text",
                                                                    "label": "created_at",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Note:\nThis is a Foreign Key to `Client.id`.<fk table='Client' column='id'/>",
                                                                    "name": "client_id",
                                                                    "type": "text",
                                                                    "label": "client_id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "title",
                                                                    "type": "text",
                                                                    "label": "title",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "full_manuscript",
                                                                    "type": "text",
                                                                    "label": "full_manuscript",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "style",
                                                                    "type": "text",
                                                                    "label": "style",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "context",
                                                                    "type": "text",
                                                                    "label": "context",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "timeline",
                                                                    "type": "text",
                                                                    "label": "timeline",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "status",
                                                                    "type": "text",
                                                                    "label": "status",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "current_subject",
                                                                    "type": "text",
                                                                    "label": "current_subject",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "next_question",
                                                                    "type": "text",
                                                                    "label": "next_question",
                                                                    "options": null,
                                                                    "required": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            },
                                                            "label": "My Supabase connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "client_id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "full_manuscript",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "style",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "context",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "timeline",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "current_subject",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "next_question",
                                                        "type": "text"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "client_id",
                                                        "type": "text",
                                                        "label": "client_id"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "title"
                                                    },
                                                    {
                                                        "name": "full_manuscript",
                                                        "type": "text",
                                                        "label": "full_manuscript"
                                                    },
                                                    {
                                                        "name": "style",
                                                        "type": "text",
                                                        "label": "style"
                                                    },
                                                    {
                                                        "name": "context",
                                                        "type": "text",
                                                        "label": "context"
                                                    },
                                                    {
                                                        "name": "timeline",
                                                        "type": "text",
                                                        "label": "timeline"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text",
                                                        "label": "status"
                                                    },
                                                    {
                                                        "name": "current_subject",
                                                        "type": "text",
                                                        "label": "current_subject"
                                                    },
                                                    {
                                                        "name": "next_question",
                                                        "type": "text",
                                                        "label": "next_question"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 400,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "filter": {
                                                "name": "Phase = Finalisation",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{34.phase}}",
                                                            "b": "Finalisation",
                                                            "o": "text:equal"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "select": "chat",
                                                "temperature": "1",
                                                "top_p": "1",
                                                "n_completions": "1",
                                                "model": "gpt-4o",
                                                "max_tokens": "500",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "Analyze the transcript. This is the Finalization Call.\\nExtract:\\n1. The Book Title decided by the user.\\n2. The Dedication (words for the first page).\\n\\nOutput JSON ONLY: { \"title\": \"string\", \"dedication\": \"string\" }"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "{{1.message.call.transcript}}",
                                                        "imageDetail": "auto"
                                                    }
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1200,
                                                    "y": 3000
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "label": "My OpenAI connection",
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            }
                                                        }
                                                    },
                                                    "expect": {
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o (system)Fast, intelligent, flexible GPT model"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "response_format": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "type": "array",
                                                        "label": "Token Probability",
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability",
                                                            "name": "value"
                                                        }
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        },
                                                        "spec": {
                                                            "type": "text",
                                                            "label": "Stop Sequence",
                                                            "name": "value"
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "type": "array",
                                                        "label": "Other Input Parameters",
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter",
                                                            "name": "value"
                                                        }
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true,
                                                        "spec": {
                                                            "label": "Message",
                                                            "type": "collection",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "required": true,
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "default": true,
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "mappable": false,
                                                                                        "options": [
                                                                                            {
                                                                                                "value": "url",
                                                                                                "label": "URL",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageUrl",
                                                                                                        "label": "Image URL",
                                                                                                        "type": "url",
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "value": "file",
                                                                                                "label": "Image File",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "label": "Image",
                                                                                                        "type": "collection",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ],
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`."
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ]
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ]
                                                                                    },
                                                                                    {
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "options": [
                                                                                            {
                                                                                                "value": "auto",
                                                                                                "default": true,
                                                                                                "label": "Auto"
                                                                                            },
                                                                                            {
                                                                                                "value": "high",
                                                                                                "label": "High"
                                                                                            },
                                                                                            {
                                                                                                "value": "low",
                                                                                                "label": "Low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "tool_calls",
                                                                                        "label": "Tool Calls",
                                                                                        "type": "array",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mode": "edit",
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        },
                                                                                        "spec": {
                                                                                            "label": "Tool Call",
                                                                                            "type": "collection",
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID",
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`."
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "type": "collection",
                                                                                                    "label": "Function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "name": "name",
                                                                                                            "label": "Name",
                                                                                                            "type": "text",
                                                                                                            "required": true,
                                                                                                            "help": "The name of the function previously called."
                                                                                                        },
                                                                                                        {
                                                                                                            "name": "arguments",
                                                                                                            "label": "Arguments",
                                                                                                            "type": "text",
                                                                                                            "required": true,
                                                                                                            "help": "The arguments previously output by the AI."
                                                                                                        }
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ],
                                                                                "value": "system"
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "label": "Tool Call ID.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "required": true,
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`."
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ],
                                                            "name": "value"
                                                        }
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 401,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "table": "Books",
                                                "status": "completed",
                                                "title": "{{400.choices[].message.content.title}}",
                                                "dedication": "{{400.choices[].message.content.dedication}}",
                                                "client_id": "{{34.id}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1500,
                                                    "y": 3000
                                                }
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 5000,
                            "module": "http:MakeRequest",
                            "version": 4,
                            "parameters": {
                                "authenticationType": "basicAuth",
                                "tlsType": "",
                                "proxyKeychain": "",
                                "basicAuthKeychain": 71390
                            },
                            "filter": {
                                "name": "Action = send_otp",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{1.action}}",
                                            "b": "send_otp",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "url": "https://verify.twilio.com/v2/Services/VA85ce7a3d73d72c01e50e6e79896494a2/Verifications",
                                "method": "post",
                                "contentType": "urlEncoded",
                                "parseResponse": true,
                                "stopOnHttpError": true,
                                "allowRedirects": true,
                                "shareCookies": false,
                                "requestCompressedContent": true,
                                "urlEncodedBodyContent": [
                                    {
                                        "name": "To",
                                        "value": "{{1.phone}}"
                                    },
                                    {
                                        "name": "Channel",
                                        "value": "sms"
                                    }
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 600,
                                    "y": 3300
                                },
                                "restore": {
                                    "parameters": {
                                        "authenticationType": {
                                            "label": "Basic authUse when the service requires a username and password."
                                        },
                                        "tlsType": {
                                            "label": "Empty"
                                        },
                                        "proxyKeychain": {
                                            "label": "Choose a key"
                                        },
                                        "basicAuthKeychain": {
                                            "label": "Twilio"
                                        }
                                    },
                                    "expect": {
                                        "method": {
                                            "mode": "chose",
                                            "label": "POST"
                                        },
                                        "headers": {
                                            "mode": "chose"
                                        },
                                        "queryParameters": {
                                            "mode": "chose"
                                        },
                                        "contentType": {
                                            "label": "application/x-www-form-urlencodedEnter form data as key-value pairs encoded in the URL style."
                                        },
                                        "parseResponse": {
                                            "mode": "chose"
                                        },
                                        "stopOnHttpError": {
                                            "mode": "chose"
                                        },
                                        "allowRedirects": {
                                            "mode": "chose"
                                        },
                                        "shareCookies": {
                                            "mode": "chose"
                                        },
                                        "requestCompressedContent": {
                                            "mode": "chose"
                                        },
                                        "urlEncodedBodyContent": {
                                            "mode": "chose",
                                            "items": [
                                                null,
                                                null
                                            ]
                                        },
                                        "paginationType": {
                                            "label": "Empty"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "authenticationType",
                                        "type": "select",
                                        "label": "Authentication type",
                                        "required": true,
                                        "validate": {
                                            "enum": [
                                                "noAuth",
                                                "apiKey",
                                                "basicAuth",
                                                "oAuth"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "tlsType",
                                        "type": "select",
                                        "label": "Transport layer security (TLS)",
                                        "validate": {
                                            "enum": [
                                                "mTls",
                                                "tls"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "proxyKeychain",
                                        "type": "keychain:proxy",
                                        "label": "Proxy"
                                    },
                                    {
                                        "name": "basicAuthKeychain",
                                        "type": "keychain:basicAuth",
                                        "label": "Basic auth"
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "url",
                                        "type": "text",
                                        "label": "URL",
                                        "required": true
                                    },
                                    {
                                        "name": "method",
                                        "type": "select",
                                        "label": "Method",
                                        "required": true,
                                        "validate": {
                                            "enum": [
                                                "get",
                                                "post",
                                                "put",
                                                "patch",
                                                "delete",
                                                "head",
                                                "options"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "headers",
                                        "type": "array",
                                        "label": "Headers",
                                        "validate": {
                                            "maxItems": 16
                                        },
                                        "spec": [
                                            {
                                                "name": "name",
                                                "label": "Name",
                                                "type": "text",
                                                "required": true
                                            },
                                            {
                                                "name": "value",
                                                "label": "Value",
                                                "type": "text",
                                                "required": true
                                            }
                                        ]
                                    },
                                    {
                                        "name": "queryParameters",
                                        "type": "array",
                                        "label": "Query parameters",
                                        "spec": {
                                            "name": "value",
                                            "label": "Parameter",
                                            "type": "collection",
                                            "spec": [
                                                {
                                                    "name": "name",
                                                    "label": "Name",
                                                    "type": "text",
                                                    "required": true
                                                },
                                                {
                                                    "name": "value",
                                                    "label": "Value",
                                                    "type": "text"
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "name": "contentType",
                                        "type": "select",
                                        "label": "Body content type",
                                        "validate": {
                                            "enum": [
                                                "json",
                                                "multipart",
                                                "urlEncoded",
                                                "custom"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "parseResponse",
                                        "type": "boolean",
                                        "label": "Parse response",
                                        "required": true
                                    },
                                    {
                                        "name": "stopOnHttpError",
                                        "type": "boolean",
                                        "label": "Assess server error as error"
                                    },
                                    {
                                        "name": "allowRedirects",
                                        "type": "boolean",
                                        "label": "Follow redirect",
                                        "required": true
                                    },
                                    {
                                        "name": "shareCookies",
                                        "type": "boolean",
                                        "label": "Share cookies with other HTTP modules"
                                    },
                                    {
                                        "name": "requestCompressedContent",
                                        "type": "boolean",
                                        "label": "Request compressed content",
                                        "required": true
                                    },
                                    {
                                        "name": "urlEncodedBodyContent",
                                        "type": "array",
                                        "label": "Fields",
                                        "spec": [
                                            {
                                                "name": "name",
                                                "label": "Key",
                                                "type": "text",
                                                "required": true
                                            },
                                            {
                                                "name": "value",
                                                "label": "Value",
                                                "type": "text"
                                            }
                                        ]
                                    },
                                    {
                                        "name": "serializeUrl",
                                        "type": "boolean",
                                        "label": "Serialize URL",
                                        "required": true
                                    },
                                    {
                                        "name": "paginationType",
                                        "type": "select",
                                        "label": "Pagination",
                                        "validate": {
                                            "enum": [
                                                "pageNo",
                                                "url",
                                                "cursor"
                                            ]
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            "id": 5001,
                            "module": "gateway:WebhookRespond",
                            "version": 1,
                            "parameters": {},
                            "mapper": {
                                "status": "200",
                                "body": "{\"status\": \"sent\"}",
                                "headers": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    }
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 900,
                                    "y": 3300
                                },
                                "restore": {
                                    "expect": {
                                        "headers": {
                                            "mode": "chose"
                                        }
                                    }
                                },
                                "expect": [
                                    {
                                        "name": "status",
                                        "type": "uinteger",
                                        "label": "Status",
                                        "validate": {
                                            "min": 100
                                        },
                                        "required": true
                                    },
                                    {
                                        "name": "body",
                                        "type": "any",
                                        "label": "Body"
                                    },
                                    {
                                        "name": "headers",
                                        "type": "array",
                                        "label": "Custom headers",
                                        "validate": {
                                            "maxItems": 16
                                        },
                                        "spec": [
                                            {
                                                "name": "key",
                                                "label": "Key",
                                                "type": "text",
                                                "required": true,
                                                "validate": {
                                                    "max": 256
                                                }
                                            },
                                            {
                                                "name": "value",
                                                "label": "Value",
                                                "type": "text",
                                                "required": true,
                                                "validate": {
                                                    "max": 4096
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 3006,
                            "module": "http:MakeRequest",
                            "version": 4,
                            "parameters": {
                                "authenticationType": "basicAuth",
                                "tlsType": "",
                                "proxyKeychain": "",
                                "basicAuthKeychain": 71390
                            },
                            "filter": {
                                "name": "Action = verify_otp",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{1.action}}",
                                            "b": "verify_otp",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "url": "https://verify.twilio.com/v2/Services/VA85ce7a3d73d72c01e50e6e79896494a2/VerificationCheck",
                                "method": "post",
                                "contentType": "urlEncoded",
                                "parseResponse": true,
                                "stopOnHttpError": true,
                                "allowRedirects": true,
                                "shareCookies": false,
                                "requestCompressedContent": true,
                                "urlEncodedBodyContent": [
                                    {
                                        "name": "To",
                                        "value": "{{1.phone}}"
                                    },
                                    {
                                        "name": "Code",
                                        "value": "{{1.code}}"
                                    }
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 600,
                                    "y": 3600
                                },
                                "restore": {
                                    "parameters": {
                                        "authenticationType": {
                                            "label": "Basic authUse when the service requires a username and password."
                                        },
                                        "tlsType": {
                                            "label": "Empty"
                                        },
                                        "proxyKeychain": {
                                            "label": "Choose a key"
                                        },
                                        "basicAuthKeychain": {
                                            "label": "Twilio"
                                        }
                                    },
                                    "expect": {
                                        "method": {
                                            "mode": "chose",
                                            "label": "POST"
                                        },
                                        "headers": {
                                            "mode": "chose"
                                        },
                                        "queryParameters": {
                                            "mode": "chose"
                                        },
                                        "contentType": {
                                            "label": "application/x-www-form-urlencodedEnter form data as key-value pairs encoded in the URL style."
                                        },
                                        "parseResponse": {
                                            "mode": "chose"
                                        },
                                        "stopOnHttpError": {
                                            "mode": "chose"
                                        },
                                        "allowRedirects": {
                                            "mode": "chose"
                                        },
                                        "shareCookies": {
                                            "mode": "chose"
                                        },
                                        "requestCompressedContent": {
                                            "mode": "chose"
                                        },
                                        "urlEncodedBodyContent": {
                                            "mode": "chose",
                                            "items": [
                                                null,
                                                null
                                            ]
                                        },
                                        "paginationType": {
                                            "label": "Empty"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "authenticationType",
                                        "type": "select",
                                        "label": "Authentication type",
                                        "required": true,
                                        "validate": {
                                            "enum": [
                                                "noAuth",
                                                "apiKey",
                                                "basicAuth",
                                                "oAuth"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "tlsType",
                                        "type": "select",
                                        "label": "Transport layer security (TLS)",
                                        "validate": {
                                            "enum": [
                                                "mTls",
                                                "tls"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "proxyKeychain",
                                        "type": "keychain:proxy",
                                        "label": "Proxy"
                                    },
                                    {
                                        "name": "basicAuthKeychain",
                                        "type": "keychain:basicauth",
                                        "label": "Credentials",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "url",
                                        "type": "url",
                                        "label": "URL",
                                        "required": true
                                    },
                                    {
                                        "name": "method",
                                        "type": "select",
                                        "label": "Method",
                                        "required": true,
                                        "validate": {
                                            "enum": [
                                                "get",
                                                "head",
                                                "post",
                                                "put",
                                                "patch",
                                                "delete",
                                                "options"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "headers",
                                        "type": "array",
                                        "label": "Headers",
                                        "spec": {
                                            "name": "value",
                                            "label": "Header",
                                            "type": "collection",
                                            "spec": [
                                                {
                                                    "name": "name",
                                                    "label": "Name",
                                                    "type": "text",
                                                    "required": true,
                                                    "validate": {
                                                        "pattern": "^[-!#$%&'*+.^_`|~0-9A-Za-z]+$"
                                                    }
                                                },
                                                {
                                                    "name": "value",
                                                    "label": "Value",
                                                    "type": "text"
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "name": "queryParameters",
                                        "type": "array",
                                        "label": "Query parameters",
                                        "spec": {
                                            "name": "value",
                                            "label": "Parameter",
                                            "type": "collection",
                                            "spec": [
                                                {
                                                    "name": "name",
                                                    "label": "Name",
                                                    "type": "text",
                                                    "required": true
                                                },
                                                {
                                                    "name": "value",
                                                    "label": "Value",
                                                    "type": "text"
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "name": "contentType",
                                        "type": "select",
                                        "label": "Body content type",
                                        "validate": {
                                            "enum": [
                                                "json",
                                                "multipart",
                                                "urlEncoded",
                                                "custom"
                                            ]
                                        }
                                    },
                                    {
                                        "name": "parseResponse",
                                        "type": "boolean",
                                        "label": "Parse response",
                                        "required": true
                                    },
                                    {
                                        "name": "stopOnHttpError",
                                        "type": "boolean",
                                        "label": "Return error if HTTP request fails",
                                        "required": true
                                    },
                                    {
                                        "name": "timeout",
                                        "type": "uinteger",
                                        "label": "Timeout",
                                        "validate": {
                                            "min": 1,
                                            "max": 300
                                        }
                                    },
                                    {
                                        "name": "allowRedirects",
                                        "type": "boolean",
                                        "label": "Allow redirects",
                                        "required": true
                                    },
                                    {
                                        "name": "shareCookies",
                                        "type": "boolean",
                                        "label": "Share cookies with other HTTP modules",
                                        "required": true
                                    },
                                    {
                                        "name": "requestCompressedContent",
                                        "type": "boolean",
                                        "label": "Request compressed content",
                                        "required": true
                                    },
                                    {
                                        "name": "urlEncodedBodyContent",
                                        "type": "array",
                                        "label": "Body content",
                                        "required": true,
                                        "spec": {
                                            "name": "value",
                                            "label": "Field",
                                            "type": "collection",
                                            "spec": [
                                                {
                                                    "name": "name",
                                                    "label": "Name",
                                                    "type": "text",
                                                    "required": true
                                                },
                                                {
                                                    "name": "value",
                                                    "label": "Value",
                                                    "type": "text"
                                                }
                                            ]
                                        }
                                    },
                                    {
                                        "name": "paginationType",
                                        "type": "select",
                                        "label": "Pagination type",
                                        "validate": {
                                            "enum": [
                                                "offsetBased",
                                                "pageBased",
                                                "urlBased",
                                                "tokenBased"
                                            ]
                                        }
                                    }
                                ],
                                "interface": [
                                    {
                                        "name": "data",
                                        "label": "Data",
                                        "type": "any"
                                    },
                                    {
                                        "name": "statusCode",
                                        "label": "Status Code",
                                        "type": "number"
                                    },
                                    {
                                        "name": "headers",
                                        "label": "Headers",
                                        "type": "collection",
                                        "spec": [
                                            {
                                                "name": "content-length",
                                                "label": "Content-Length",
                                                "type": "text"
                                            },
                                            {
                                                "name": "content-encoding",
                                                "label": "Content-Encoding",
                                                "type": "text"
                                            },
                                            {
                                                "name": "content-type",
                                                "label": "Content-Type",
                                                "type": "text"
                                            },
                                            {
                                                "name": "server",
                                                "label": "Server",
                                                "type": "text"
                                            },
                                            {
                                                "name": "cache-control",
                                                "label": "Cache-Control",
                                                "type": "text"
                                            },
                                            {
                                                "name": "set-cookie",
                                                "label": "Set-Cookie",
                                                "type": "array",
                                                "spec": {
                                                    "type": "text"
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        },
                        {
                            "id": 3007,
                            "module": "supabase:searchRows",
                            "version": 1,
                            "parameters": {
                                "__IMTCONN__": 3941672
                            },
                            "mapper": {
                                "table": "Client",
                                "limit": "10",
                                "search": [
                                    [
                                        {
                                            "a": "phone_number",
                                            "o": "text:eq.",
                                            "b": "{{1.phone}}"
                                        }
                                    ]
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 1012,
                                    "y": 3594
                                },
                                "restore": {
                                    "parameters": {
                                        "__IMTCONN__": {
                                            "label": "My Supabase connection",
                                            "data": {
                                                "scoped": "true",
                                                "connection": "supabase"
                                            }
                                        }
                                    },
                                    "expect": {
                                        "table": {
                                            "mode": "chose",
                                            "nested": [
                                                {
                                                    "name": "search",
                                                    "type": "filter",
                                                    "label": "Search criteria",
                                                    "options": {
                                                        "logic": "and",
                                                        "store": [
                                                            {
                                                                "label": "id",
                                                                "value": "id"
                                                            },
                                                            {
                                                                "label": "created_at",
                                                                "value": "created_at"
                                                            },
                                                            {
                                                                "label": "phone_number",
                                                                "value": "phone_number"
                                                            },
                                                            {
                                                                "label": "phase",
                                                                "value": "phase"
                                                            },
                                                            {
                                                                "label": "email",
                                                                "value": "email"
                                                            },
                                                            {
                                                                "label": "otp_code",
                                                                "value": "otp_code"
                                                            },
                                                            {
                                                                "label": "politeness_preference",
                                                                "value": "politeness_preference"
                                                            },
                                                            {
                                                                "label": "target_audience",
                                                                "value": "target_audience"
                                                            },
                                                            {
                                                                "label": "writing_style",
                                                                "value": "writing_style"
                                                            },
                                                            {
                                                                "label": "narrative_scope",
                                                                "value": "narrative_scope"
                                                            },
                                                            {
                                                                "label": "onboarding_status",
                                                                "value": "onboarding_status"
                                                            },
                                                            {
                                                                "label": "first_name",
                                                                "value": "first_name"
                                                            },
                                                            {
                                                                "label": "last_name",
                                                                "value": "last_name"
                                                            }
                                                        ],
                                                        "operators": [
                                                            {
                                                                "label": "Text",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "text:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "text:neq."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case sensitive)",
                                                                        "value": "text:like."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case insensitive)",
                                                                        "value": "text:ilike."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Numbers",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "number:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "number:neq."
                                                                    },
                                                                    {
                                                                        "label": "Greater than",
                                                                        "value": "number:gt."
                                                                    },
                                                                    {
                                                                        "label": "Less than",
                                                                        "value": "number:lt."
                                                                    },
                                                                    {
                                                                        "label": "Greater than or equal to",
                                                                        "value": "number:gte."
                                                                    },
                                                                    {
                                                                        "label": "Less than or equal to",
                                                                        "value": "number:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Date",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "date:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "date:neq."
                                                                    },
                                                                    {
                                                                        "label": "Later than",
                                                                        "value": "date:gt."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than",
                                                                        "value": "date:lt."
                                                                    },
                                                                    {
                                                                        "label": "Later than or equal to",
                                                                        "value": "date:gte."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than or equal to",
                                                                        "value": "date:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Boolean",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "boolean:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "boolean:neq."
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                }
                                            ],
                                            "label": "Client"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "__IMTCONN__",
                                        "type": "account:supabase",
                                        "label": "Connection",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "table",
                                        "type": "select",
                                        "label": "Table",
                                        "required": true
                                    },
                                    {
                                        "name": "limit",
                                        "type": "uinteger",
                                        "label": "Limit"
                                    },
                                    {
                                        "name": "search",
                                        "type": "filter",
                                        "label": "Search criteria",
                                        "options": {
                                            "logic": "and",
                                            "store": [
                                                {
                                                    "label": "id",
                                                    "value": "id"
                                                },
                                                {
                                                    "label": "created_at",
                                                    "value": "created_at"
                                                },
                                                {
                                                    "label": "phone_number",
                                                    "value": "phone_number"
                                                },
                                                {
                                                    "label": "phase",
                                                    "value": "phase"
                                                },
                                                {
                                                    "label": "email",
                                                    "value": "email"
                                                },
                                                {
                                                    "label": "otp_code",
                                                    "value": "otp_code"
                                                },
                                                {
                                                    "label": "politeness_preference",
                                                    "value": "politeness_preference"
                                                },
                                                {
                                                    "label": "target_audience",
                                                    "value": "target_audience"
                                                },
                                                {
                                                    "label": "writing_style",
                                                    "value": "writing_style"
                                                },
                                                {
                                                    "label": "narrative_scope",
                                                    "value": "narrative_scope"
                                                },
                                                {
                                                    "label": "onboarding_status",
                                                    "value": "onboarding_status"
                                                },
                                                {
                                                    "label": "first_name",
                                                    "value": "first_name"
                                                },
                                                {
                                                    "label": "last_name",
                                                    "value": "last_name"
                                                }
                                            ],
                                            "operators": [
                                                {
                                                    "label": "Text",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "text:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "text:neq."
                                                        },
                                                        {
                                                            "label": "Contains (case sensitive)",
                                                            "value": "text:like."
                                                        },
                                                        {
                                                            "label": "Contains (case insensitive)",
                                                            "value": "text:ilike."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Numbers",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "number:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "number:neq."
                                                        },
                                                        {
                                                            "label": "Greater than",
                                                            "value": "number:gt."
                                                        },
                                                        {
                                                            "label": "Less than",
                                                            "value": "number:lt."
                                                        },
                                                        {
                                                            "label": "Greater than or equal to",
                                                            "value": "number:gte."
                                                        },
                                                        {
                                                            "label": "Less than or equal to",
                                                            "value": "number:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Date",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "date:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "date:neq."
                                                        },
                                                        {
                                                            "label": "Later than",
                                                            "value": "date:gt."
                                                        },
                                                        {
                                                            "label": "Earlier than",
                                                            "value": "date:lt."
                                                        },
                                                        {
                                                            "label": "Later than or equal to",
                                                            "value": "date:gte."
                                                        },
                                                        {
                                                            "label": "Earlier than or equal to",
                                                            "value": "date:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Boolean",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "boolean:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "boolean:neq."
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    }
                                ],
                                "interface": [
                                    {
                                        "name": "id",
                                        "type": "text",
                                        "label": "id"
                                    },
                                    {
                                        "name": "created_at",
                                        "type": "text",
                                        "label": "created_at"
                                    },
                                    {
                                        "name": "phone_number",
                                        "type": "text",
                                        "label": "phone_number"
                                    },
                                    {
                                        "name": "phase",
                                        "type": "text",
                                        "label": "phase"
                                    },
                                    {
                                        "name": "email",
                                        "type": "text",
                                        "label": "email"
                                    },
                                    {
                                        "name": "otp_code",
                                        "type": "text",
                                        "label": "otp_code"
                                    },
                                    {
                                        "name": "politeness_preference",
                                        "type": "text",
                                        "label": "politeness_preference"
                                    },
                                    {
                                        "name": "target_audience",
                                        "type": "text",
                                        "label": "target_audience"
                                    },
                                    {
                                        "name": "writing_style",
                                        "type": "text",
                                        "label": "writing_style"
                                    },
                                    {
                                        "name": "narrative_scope",
                                        "type": "text",
                                        "label": "narrative_scope"
                                    },
                                    {
                                        "name": "onboarding_status",
                                        "type": "boolean",
                                        "label": "onboarding_status"
                                    },
                                    {
                                        "name": "first_name",
                                        "type": "text",
                                        "label": "first_name"
                                    },
                                    {
                                        "name": "last_name",
                                        "type": "text",
                                        "label": "last_name"
                                    }
                                ]
                            }
                        },
                        {
                            "id": 43,
                            "module": "gateway:WebhookRespond",
                            "version": 1,
                            "parameters": {},
                            "mapper": {
                                "status": "200",
                                "body": "{\"status\": \"approved\", \"client\": { \"id\": \"{{3007.id}}\", \"first_name\": \"{{3007.first_name}}\", \"last_name\": \"{{3007.last_name}}\" } }",
                                "headers": [
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    }
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 1500,
                                    "y": 3600
                                },
                                "restore": {
                                    "expect": {
                                        "headers": {
                                            "mode": "chose",
                                            "items": [
                                                null
                                            ]
                                        }
                                    }
                                },
                                "expect": [
                                    {
                                        "name": "status",
                                        "type": "uinteger",
                                        "label": "Status",
                                        "validate": {
                                            "min": 100
                                        },
                                        "required": true
                                    },
                                    {
                                        "name": "body",
                                        "type": "any",
                                        "label": "Body"
                                    },
                                    {
                                        "name": "headers",
                                        "type": "array",
                                        "label": "Custom headers",
                                        "validate": {
                                            "maxItems": 16
                                        },
                                        "spec": [
                                            {
                                                "name": "key",
                                                "label": "Key",
                                                "type": "text",
                                                "required": true,
                                                "validate": {
                                                    "max": 256
                                                }
                                            },
                                            {
                                                "name": "value",
                                                "label": "Value",
                                                "type": "text",
                                                "required": true,
                                                "validate": {
                                                    "max": 4096
                                                }
                                            }
                                        ]
                                    }
                                ]
                            }
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 9000,
                            "module": "http:MakeRequest",
                            "version": 4,
                            "parameters": {
                                "authenticationType": "noAuth"
                            },
                            "filter": {
                                "name": "force_call_now",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{1.action}}",
                                            "b": "force_call_now",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "url": "https://api.vapi.ai/call/phone",
                                "method": "post",
                                "headers": [
                                    {
                                        "name": "Authorization",
                                        "value": "Bearer YOUR_VAPI_PRIVATE_API_KEY"
                                    },
                                    {
                                        "name": "Content-Type",
                                        "value": "application/json"
                                    }
                                ],
                                "body": "{\n  \"phoneNumberId\": \"YOUR_VAPI_PHONE_NUMBER_ID\",\n  \"customer\": {\n    \"number\": \"{{1.phone}}\"\n  },\n  \"assistant\": {\n    \"serverUrl\": \"YOUR_MAKE_WEBHOOK_URL\",\n    \"serverMessages\": [\"assistant-request\"]\n  }\n}",
                                "contentType": "raw",
                                "parseResponse": true
                            },
                            "metadata": {
                                "designer": {
                                    "x": 600,
                                    "y": 1950
                                }
                            }
                        },
                        {
                            "id": 9001,
                            "module": "gateway:WebhookRespond",
                            "version": 1,
                            "parameters": {},
                            "mapper": {
                                "status": 200,
                                "body": "{\n  \"message\": \"Appel initié avec succès.\"\n}"
                            },
                            "metadata": {
                                "designer": {
                                    "x": 900,
                                    "y": 1950
                                }
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "metadata": {
        "instant": true,
        "version": 1,
        "scenario": {
            "roundtrips": 1,
            "maxErrors": 3,
            "autoCommit": true,
            "autoCommitTriggerLast": true,
            "sequential": false,
            "slots": null,
            "confidential": false,
            "dataloss": false,
            "dlq": true,
            "freshVariables": false
        },
        "designer": {
            "orphans": []
        },
        "zone": "eu1.make.com",
        "notes": []
    }
}