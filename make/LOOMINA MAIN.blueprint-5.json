{
    "name": "LOOMINA MAIN",
    "flow": [
        {
            "id": 1,
            "module": "gateway:CustomWebHook",
            "version": 1,
            "parameters": {
                "hook": 2188533,
                "maxResults": 1
            },
            "mapper": {},
            "metadata": {
                "designer": {
                    "x": 0,
                    "y": 1500
                },
                "restore": {
                    "parameters": {
                        "hook": {
                            "data": {
                                "editable": "true"
                            },
                            "label": "My gateway-webhook webhook"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "hook",
                        "type": "hook:gateway-webhook",
                        "label": "Webhook",
                        "required": true
                    },
                    {
                        "name": "maxResults",
                        "type": "number",
                        "label": "Maximum number of results"
                    }
                ],
                "interface": [
                    {
                        "name": "message",
                        "spec": [
                            {
                                "name": "timestamp",
                                "type": "number"
                            },
                            {
                                "name": "type",
                                "type": "text"
                            },
                            {
                                "name": "conversation",
                                "spec": {
                                    "spec": [
                                        {
                                            "name": "role",
                                            "type": "text"
                                        },
                                        {
                                            "name": "content",
                                            "type": "text"
                                        }
                                    ],
                                    "type": "collection"
                                },
                                "type": "array"
                            },
                            {
                                "name": "messages",
                                "spec": {
                                    "spec": [
                                        {
                                            "name": "role",
                                            "type": "text"
                                        },
                                        {
                                            "name": "message",
                                            "type": "text"
                                        },
                                        {
                                            "name": "time",
                                            "type": "number"
                                        },
                                        {
                                            "name": "secondsFromStart",
                                            "type": "number"
                                        }
                                    ],
                                    "type": "collection"
                                },
                                "type": "array"
                            },
                            {
                                "name": "messagesOpenAIFormatted",
                                "type": "array"
                            },
                            {
                                "name": "artifact",
                                "spec": [
                                    {
                                        "name": "messages",
                                        "spec": {
                                            "spec": [
                                                {
                                                    "name": "role",
                                                    "type": "text"
                                                },
                                                {
                                                    "name": "message",
                                                    "type": "text"
                                                },
                                                {
                                                    "name": "time",
                                                    "type": "number"
                                                },
                                                {
                                                    "name": "secondsFromStart",
                                                    "type": "number"
                                                }
                                            ],
                                            "type": "collection"
                                        },
                                        "type": "array"
                                    },
                                    {
                                        "name": "messagesOpenAIFormatted",
                                        "spec": {
                                            "spec": [
                                                {
                                                    "name": "role",
                                                    "type": "text"
                                                },
                                                {
                                                    "name": "content",
                                                    "type": "text"
                                                }
                                            ],
                                            "type": "collection"
                                        },
                                        "type": "array"
                                    }
                                ],
                                "type": "collection"
                            },
                            {
                                "name": "transcript",
                                "type": "text"
                            },
                            {
                                "name": "recordingUrl",
                                "type": "text"
                            },
                            {
                                "name": "cost",
                                "type": "number"
                            },
                            {
                                "name": "durationSeconds",
                                "type": "number"
                            },
                            {
                                "name": "call",
                                "spec": [
                                    {
                                        "name": "transcript",
                                        "type": "text"
                                    },
                                    {
                                        "name": "recordingUrl",
                                        "type": "text"
                                    },
                                    {
                                        "name": "durationSeconds",
                                        "type": "number"
                                    },
                                    {
                                        "name": "id",
                                        "type": "text"
                                    },
                                    {
                                        "name": "orgId",
                                        "type": "text"
                                    },
                                    {
                                        "name": "createdAt",
                                        "type": "text"
                                    },
                                    {
                                        "name": "updatedAt",
                                        "type": "text"
                                    },
                                    {
                                        "name": "type",
                                        "type": "text"
                                    },
                                    {
                                        "name": "cost",
                                        "type": "number"
                                    },
                                    {
                                        "name": "monitor",
                                        "spec": [
                                            {
                                                "name": "listenUrl",
                                                "type": "text"
                                            },
                                            {
                                                "name": "controlUrl",
                                                "type": "text"
                                            }
                                        ],
                                        "type": "collection"
                                    },
                                    {
                                        "name": "transport",
                                        "spec": [
                                            {
                                                "name": "conversationType",
                                                "type": "text"
                                            },
                                            {
                                                "name": "provider",
                                                "type": "text"
                                            },
                                            {
                                                "name": "callSid",
                                                "type": "text"
                                            },
                                            {
                                                "name": "accountSid",
                                                "type": "text"
                                            },
                                            {
                                                "name": "callToken",
                                                "type": "text"
                                            }
                                        ],
                                        "type": "collection"
                                    },
                                    {
                                        "name": "phoneCallProvider",
                                        "type": "text"
                                    },
                                    {
                                        "name": "phoneCallProviderId",
                                        "type": "text"
                                    },
                                    {
                                        "name": "phoneCallTransport",
                                        "type": "text"
                                    },
                                    {
                                        "name": "status",
                                        "type": "text"
                                    },
                                    {
                                        "name": "assistant",
                                        "spec": [
                                            {
                                                "name": "name",
                                                "type": "text"
                                            },
                                            {
                                                "name": "transcriber",
                                                "spec": [
                                                    {
                                                        "name": "provider",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "language",
                                                        "type": "text"
                                                    }
                                                ],
                                                "type": "collection"
                                            },
                                            {
                                                "name": "model",
                                                "spec": [
                                                    {
                                                        "name": "model",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "spec": [
                                                                {
                                                                    "name": "content",
                                                                    "type": "text"
                                                                },
                                                                {
                                                                    "name": "role",
                                                                    "type": "text"
                                                                }
                                                            ],
                                                            "type": "collection"
                                                        },
                                                        "type": "array"
                                                    },
                                                    {
                                                        "name": "provider",
                                                        "type": "text"
                                                    }
                                                ],
                                                "type": "collection"
                                            },
                                            {
                                                "name": "voice",
                                                "spec": [
                                                    {
                                                        "name": "provider",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "voiceId",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text"
                                                    }
                                                ],
                                                "type": "collection"
                                            },
                                            {
                                                "name": "firstMessage",
                                                "type": "text"
                                            },
                                            {
                                                "name": "firstMessageMode",
                                                "type": "text"
                                            },
                                            {
                                                "name": "silenceTimeoutSeconds",
                                                "type": "number"
                                            }
                                        ],
                                        "type": "collection"
                                    },
                                    {
                                        "name": "phoneNumberId",
                                        "type": "text"
                                    },
                                    {
                                        "name": "customer",
                                        "spec": [
                                            {
                                                "name": "number",
                                                "type": "text"
                                            }
                                        ],
                                        "type": "collection"
                                    }
                                ],
                                "type": "collection"
                            },
                            {
                                "name": "phoneNumber",
                                "spec": [
                                    {
                                        "name": "id",
                                        "type": "text"
                                    },
                                    {
                                        "name": "orgId",
                                        "type": "text"
                                    },
                                    {
                                        "name": "number",
                                        "type": "text"
                                    },
                                    {
                                        "name": "createdAt",
                                        "type": "text"
                                    },
                                    {
                                        "name": "updatedAt",
                                        "type": "text"
                                    },
                                    {
                                        "name": "twilioAccountSid",
                                        "type": "text"
                                    },
                                    {
                                        "name": "name",
                                        "type": "text"
                                    },
                                    {
                                        "name": "provider",
                                        "type": "text"
                                    },
                                    {
                                        "name": "server",
                                        "spec": [
                                            {
                                                "name": "url",
                                                "type": "text"
                                            },
                                            {
                                                "name": "timeoutSeconds",
                                                "type": "number"
                                            },
                                            {
                                                "name": "headers",
                                                "spec": [],
                                                "type": "collection"
                                            }
                                        ],
                                        "type": "collection"
                                    },
                                    {
                                        "name": "status",
                                        "type": "text"
                                    }
                                ],
                                "type": "collection"
                            },
                            {
                                "name": "customer",
                                "spec": [
                                    {
                                        "name": "number",
                                        "type": "text"
                                    }
                                ],
                                "type": "collection"
                            },
                            {
                                "name": "assistant",
                                "spec": [
                                    {
                                        "name": "name",
                                        "type": "text"
                                    },
                                    {
                                        "name": "transcriber",
                                        "spec": [
                                            {
                                                "name": "provider",
                                                "type": "text"
                                            },
                                            {
                                                "name": "model",
                                                "type": "text"
                                            },
                                            {
                                                "name": "language",
                                                "type": "text"
                                            }
                                        ],
                                        "type": "collection"
                                    },
                                    {
                                        "name": "model",
                                        "spec": [
                                            {
                                                "name": "model",
                                                "type": "text"
                                            },
                                            {
                                                "name": "messages",
                                                "spec": {
                                                    "spec": [
                                                        {
                                                            "name": "content",
                                                            "type": "text"
                                                        },
                                                        {
                                                            "name": "role",
                                                            "type": "text"
                                                        }
                                                    ],
                                                    "type": "collection"
                                                },
                                                "type": "array"
                                            },
                                            {
                                                "name": "provider",
                                                "type": "text"
                                            }
                                        ],
                                        "type": "collection"
                                    },
                                    {
                                        "name": "voice",
                                        "spec": [
                                            {
                                                "name": "provider",
                                                "type": "text"
                                            },
                                            {
                                                "name": "voiceId",
                                                "type": "text"
                                            },
                                            {
                                                "name": "model",
                                                "type": "text"
                                            }
                                        ],
                                        "type": "collection"
                                    },
                                    {
                                        "name": "firstMessage",
                                        "type": "text"
                                    },
                                    {
                                        "name": "firstMessageMode",
                                        "type": "text"
                                    },
                                    {
                                        "name": "silenceTimeoutSeconds",
                                        "type": "number"
                                    }
                                ],
                                "type": "collection"
                            }
                        ],
                        "type": "collection"
                    }
                ],
                "advanced": true
            }
        },
        {
            "id": 5,
            "module": "builtin:BasicRouter",
            "version": 1,
            "mapper": null,
            "metadata": {
                "designer": {
                    "x": 300,
                    "y": 1500
                }
            },
            "routes": [
                {
                    "flow": [
                        {
                            "id": 28,
                            "module": "supabase:searchRows",
                            "version": 1,
                            "parameters": {
                                "__IMTCONN__": 3941672
                            },
                            "filter": {
                                "name": "assistant-request",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{1.message.type}}",
                                            "b": "assistant-request",
                                            "o": "text:equal"
                                        }
                                    ],
                                    [
                                        {
                                            "a": "{{1.message.type}}",
                                            "b": "Assistant-Request",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "limit": "1",
                                "table": "Client",
                                "search": [
                                    [
                                        {
                                            "a": "phone_number",
                                            "b": "{{1.message.customer.number}}",
                                            "o": "text:eq."
                                        }
                                    ]
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 600,
                                    "y": 450
                                },
                                "restore": {
                                    "expect": {
                                        "table": {
                                            "mode": "chose",
                                            "label": "Client",
                                            "nested": [
                                                {
                                                    "name": "search",
                                                    "type": "filter",
                                                    "label": "Search criteria",
                                                    "options": {
                                                        "logic": "and",
                                                        "store": [
                                                            {
                                                                "label": "id",
                                                                "value": "id"
                                                            },
                                                            {
                                                                "label": "created_at",
                                                                "value": "created_at"
                                                            },
                                                            {
                                                                "label": "phone_number",
                                                                "value": "phone_number"
                                                            },
                                                            {
                                                                "label": "first_name",
                                                                "value": "first_name"
                                                            },
                                                            {
                                                                "label": "last_name",
                                                                "value": "last_name"
                                                            },
                                                            {
                                                                "label": "phase",
                                                                "value": "phase"
                                                            },
                                                            {
                                                                "label": "email",
                                                                "value": "email"
                                                            }
                                                        ],
                                                        "operators": [
                                                            {
                                                                "label": "Text",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "text:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "text:neq."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case sensitive)",
                                                                        "value": "text:like."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case insensitive)",
                                                                        "value": "text:ilike."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Numbers",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "number:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "number:neq."
                                                                    },
                                                                    {
                                                                        "label": "Greater than",
                                                                        "value": "number:gt."
                                                                    },
                                                                    {
                                                                        "label": "Less than",
                                                                        "value": "number:lt."
                                                                    },
                                                                    {
                                                                        "label": "Greater than or equal to",
                                                                        "value": "number:gte."
                                                                    },
                                                                    {
                                                                        "label": "Less than or equal to",
                                                                        "value": "number:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Date",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "date:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "date:neq."
                                                                    },
                                                                    {
                                                                        "label": "Later than",
                                                                        "value": "date:gt."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than",
                                                                        "value": "date:lt."
                                                                    },
                                                                    {
                                                                        "label": "Later than or equal to",
                                                                        "value": "date:gte."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than or equal to",
                                                                        "value": "date:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Boolean",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "boolean:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "boolean:neq."
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    "parameters": {
                                        "__IMTCONN__": {
                                            "data": {
                                                "scoped": "true",
                                                "connection": "supabase"
                                            },
                                            "label": "My Supabase connection"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "__IMTCONN__",
                                        "type": "account:supabase",
                                        "label": "Connection",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "table",
                                        "type": "select",
                                        "label": "Table",
                                        "required": true
                                    },
                                    {
                                        "name": "limit",
                                        "type": "uinteger",
                                        "label": "Limit"
                                    },
                                    {
                                        "name": "search",
                                        "type": "filter",
                                        "label": "Search criteria",
                                        "options": {
                                            "logic": "and",
                                            "store": [
                                                {
                                                    "label": "id",
                                                    "value": "id"
                                                },
                                                {
                                                    "label": "created_at",
                                                    "value": "created_at"
                                                },
                                                {
                                                    "label": "phone_number",
                                                    "value": "phone_number"
                                                },
                                                {
                                                    "label": "first_name",
                                                    "value": "first_name"
                                                },
                                                {
                                                    "label": "last_name",
                                                    "value": "last_name"
                                                },
                                                {
                                                    "label": "phase",
                                                    "value": "phase"
                                                },
                                                {
                                                    "label": "email",
                                                    "value": "email"
                                                }
                                            ],
                                            "operators": [
                                                {
                                                    "label": "Text",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "text:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "text:neq."
                                                        },
                                                        {
                                                            "label": "Contains (case sensitive)",
                                                            "value": "text:like."
                                                        },
                                                        {
                                                            "label": "Contains (case insensitive)",
                                                            "value": "text:ilike."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Numbers",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "number:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "number:neq."
                                                        },
                                                        {
                                                            "label": "Greater than",
                                                            "value": "number:gt."
                                                        },
                                                        {
                                                            "label": "Less than",
                                                            "value": "number:lt."
                                                        },
                                                        {
                                                            "label": "Greater than or equal to",
                                                            "value": "number:gte."
                                                        },
                                                        {
                                                            "label": "Less than or equal to",
                                                            "value": "number:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Date",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "date:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "date:neq."
                                                        },
                                                        {
                                                            "label": "Later than",
                                                            "value": "date:gt."
                                                        },
                                                        {
                                                            "label": "Earlier than",
                                                            "value": "date:lt."
                                                        },
                                                        {
                                                            "label": "Later than or equal to",
                                                            "value": "date:gte."
                                                        },
                                                        {
                                                            "label": "Earlier than or equal to",
                                                            "value": "date:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Boolean",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "boolean:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "boolean:neq."
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    }
                                ],
                                "interface": [
                                    {
                                        "name": "__IMTLENGTH__",
                                        "type": "uinteger",
                                        "label": "Total number of bundles"
                                    },
                                    {
                                        "name": "__IMTINDEX__",
                                        "type": "uinteger",
                                        "label": "Bundle order position"
                                    },
                                    {
                                        "name": "id",
                                        "type": "text",
                                        "label": "id"
                                    },
                                    {
                                        "name": "created_at",
                                        "type": "text",
                                        "label": "created_at"
                                    },
                                    {
                                        "name": "phone_number",
                                        "type": "text",
                                        "label": "phone_number"
                                    },
                                    {
                                        "name": "phase",
                                        "type": "text",
                                        "label": "phase"
                                    },
                                    {
                                        "name": "email",
                                        "type": "text",
                                        "label": "email"
                                    },
                                    {
                                        "name": "otp_code",
                                        "type": "text",
                                        "label": "otp_code"
                                    },
                                    {
                                        "name": "politeness_preference",
                                        "type": "text",
                                        "label": "politeness_preference"
                                    },
                                    {
                                        "name": "target_audience",
                                        "type": "text",
                                        "label": "target_audience"
                                    },
                                    {
                                        "name": "writing_style",
                                        "type": "text",
                                        "label": "writing_style"
                                    },
                                    {
                                        "name": "narrative_scope",
                                        "type": "text",
                                        "label": "narrative_scope"
                                    },
                                    {
                                        "name": "onboarding_status",
                                        "type": "boolean",
                                        "label": "onboarding_status"
                                    },
                                    {
                                        "name": "first_name",
                                        "type": "text",
                                        "label": "first_name"
                                    },
                                    {
                                        "name": "last_name",
                                        "type": "text",
                                        "label": "last_name"
                                    }
                                ]
                            }
                        },
                        {
                            "id": 14,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "filter": {
                                "name": "find client",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{28.phone_number}}",
                                            "b": "{{1.message.customer.number}}",
                                            "o": "text:equal"
                                        }
                                    ]
                                ]
                            },
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 900,
                                    "y": 450
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 15,
                                            "module": "gateway:WebhookRespond",
                                            "version": 1,
                                            "parameters": {},
                                            "filter": {
                                                "name": "Client Inconnu",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{28.id}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "body": "{\n  \"assistant\": {\n    \"transcriber\": {\"provider\": \"deepgram\", \"model\": \"nova-2\", \"language\": \"fr\"}, \"silenceTimeoutSeconds\": 60,\n    \"firstMessageMode\": \"assistant-speaks-first\",\n    \"name\": \"Loomina-Unknown\",\n    \"voice\": {\"provider\": \"11labs\", \"voiceId\": \"Qrl71rx6Yg8RvyPYRGCQ\", \"model\": \"eleven_turbo_v2_5\"},\n    \"endCallPhrases\": [\"##END_CALL##\"],\n    \"firstMessage\": \"Bonjour ! Ici Loomina, votre biographe personnel. Je ne crois pas avoir dj ce numro dans mes carnets. C'est la toute premire fois que nous nous parlons, n'est-ce pas ? Quel est votre prnom ?\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es Loomina, une IA biographe.\\n\\n# RGLES CRITIQUES\\n- Tes rponses doivent faire 1  2 phrases MAX.\\n- Ne rpte jamais ce message d'accueil si l'utilisateur a dj rpondu.\\n- Sois directe et chaleureuse.\\n\\n# GESTION DE FIN D'APPEL\\nSI l'utilisateur dit qu'il doit partir ou raccrocher : Termine poliment puis AJOUTE le token de fin d'appel. Ne le prononce pas.\\nExemple : 'Au revoir et  trs bientt ! ##END_CALL##'.\\n\\n# OBJECTIF\\nAccueille l'inconnu et demande son prnom. Ensuite, explique ton rle (IA biographe) et demande quel style d'criture il prfre.\"}\n      ]\n    }\n  }\n}",
                                                "status": "200",
                                                "headers": []
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1000,
                                                    "y": -74
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "headers": {
                                                            "mode": "chose"
                                                        }
                                                    }
                                                },
                                                "expect": [
                                                    {
                                                        "name": "status",
                                                        "type": "uinteger",
                                                        "label": "Status",
                                                        "required": true,
                                                        "validate": {
                                                            "min": 100
                                                        }
                                                    },
                                                    {
                                                        "name": "body",
                                                        "type": "any",
                                                        "label": "Body"
                                                    },
                                                    {
                                                        "name": "headers",
                                                        "spec": [
                                                            {
                                                                "name": "key",
                                                                "type": "text",
                                                                "label": "Key",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 256
                                                                }
                                                            },
                                                            {
                                                                "name": "value",
                                                                "type": "text",
                                                                "label": "Value",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 4096
                                                                }
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Custom headers",
                                                        "validate": {
                                                            "maxItems": 16
                                                        }
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 17,
                                            "module": "builtin:BasicRouter",
                                            "version": 1,
                                            "parameters": {
                                                "else": 0
                                            },
                                            "filter": {
                                                "name": "Client Trouv",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{28.id}}",
                                                            "o": "exist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": null,
                                            "metadata": {
                                                "designer": {
                                                    "x": 1200,
                                                    "y": 600
                                                }
                                            },
                                            "routes": [
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 32,
                                                            "module": "supabase:searchRows",
                                                            "version": 1,
                                                            "parameters": {
                                                                "__IMTCONN__": 3941672
                                                            },
                                                            "filter": {
                                                                "name": "Phase = Interview",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{28.phase}}",
                                                                            "b": "Interview",
                                                                            "o": "text:equal"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "limit": "100",
                                                                "table": "Books",
                                                                "search": [
                                                                    [
                                                                        {
                                                                            "a": "client_id",
                                                                            "b": "{{28.id}}",
                                                                            "o": "text:eq."
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1500,
                                                                    "y": 300
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "table": {
                                                                            "mode": "chose",
                                                                            "label": "Books",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "search",
                                                                                    "type": "filter",
                                                                                    "label": "Search criteria",
                                                                                    "options": {
                                                                                        "logic": "and",
                                                                                        "store": [
                                                                                            {
                                                                                                "label": "id",
                                                                                                "value": "id"
                                                                                            },
                                                                                            {
                                                                                                "label": "created_at",
                                                                                                "value": "created_at"
                                                                                            },
                                                                                            {
                                                                                                "label": "client_id",
                                                                                                "value": "client_id"
                                                                                            },
                                                                                            {
                                                                                                "label": "title",
                                                                                                "value": "title"
                                                                                            },
                                                                                            {
                                                                                                "label": "full_manuscript",
                                                                                                "value": "full_manuscript"
                                                                                            },
                                                                                            {
                                                                                                "label": "style",
                                                                                                "value": "style"
                                                                                            },
                                                                                            {
                                                                                                "label": "context",
                                                                                                "value": "context"
                                                                                            },
                                                                                            {
                                                                                                "label": "timeline",
                                                                                                "value": "timeline"
                                                                                            },
                                                                                            {
                                                                                                "label": "status",
                                                                                                "value": "status"
                                                                                            },
                                                                                            {
                                                                                                "label": "current_subject",
                                                                                                "value": "current_subject"
                                                                                            },
                                                                                            {
                                                                                                "label": "next_question",
                                                                                                "value": "next_question"
                                                                                            }
                                                                                        ],
                                                                                        "operators": [
                                                                                            {
                                                                                                "label": "Text",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "text:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "text:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Contains (case sensitive)",
                                                                                                        "value": "text:like."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Contains (case insensitive)",
                                                                                                        "value": "text:ilike."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Numbers",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "number:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "number:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Greater than",
                                                                                                        "value": "number:gt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Less than",
                                                                                                        "value": "number:lt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Greater than or equal to",
                                                                                                        "value": "number:gte."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Less than or equal to",
                                                                                                        "value": "number:lte."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Date",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "date:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "date:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Later than",
                                                                                                        "value": "date:gt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Earlier than",
                                                                                                        "value": "date:lt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Later than or equal to",
                                                                                                        "value": "date:gte."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Earlier than or equal to",
                                                                                                        "value": "date:lte."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Boolean",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "boolean:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "boolean:neq."
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "parameters": {
                                                                        "__IMTCONN__": {
                                                                            "data": {
                                                                                "scoped": "true",
                                                                                "connection": "supabase"
                                                                            },
                                                                            "label": "My Supabase connection"
                                                                        }
                                                                    }
                                                                },
                                                                "parameters": [
                                                                    {
                                                                        "name": "__IMTCONN__",
                                                                        "type": "account:supabase",
                                                                        "label": "Connection",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "expect": [
                                                                    {
                                                                        "name": "table",
                                                                        "type": "select",
                                                                        "label": "Table",
                                                                        "required": true
                                                                    },
                                                                    {
                                                                        "name": "limit",
                                                                        "type": "uinteger",
                                                                        "label": "Limit"
                                                                    },
                                                                    {
                                                                        "name": "search",
                                                                        "type": "filter",
                                                                        "label": "Search criteria",
                                                                        "options": {
                                                                            "logic": "and",
                                                                            "store": [
                                                                                {
                                                                                    "label": "id",
                                                                                    "value": "id"
                                                                                },
                                                                                {
                                                                                    "label": "created_at",
                                                                                    "value": "created_at"
                                                                                },
                                                                                {
                                                                                    "label": "client_id",
                                                                                    "value": "client_id"
                                                                                },
                                                                                {
                                                                                    "label": "title",
                                                                                    "value": "title"
                                                                                },
                                                                                {
                                                                                    "label": "full_manuscript",
                                                                                    "value": "full_manuscript"
                                                                                },
                                                                                {
                                                                                    "label": "style",
                                                                                    "value": "style"
                                                                                },
                                                                                {
                                                                                    "label": "context",
                                                                                    "value": "context"
                                                                                },
                                                                                {
                                                                                    "label": "timeline",
                                                                                    "value": "timeline"
                                                                                },
                                                                                {
                                                                                    "label": "status",
                                                                                    "value": "status"
                                                                                },
                                                                                {
                                                                                    "label": "current_subject",
                                                                                    "value": "current_subject"
                                                                                },
                                                                                {
                                                                                    "label": "next_question",
                                                                                    "value": "next_question"
                                                                                }
                                                                            ],
                                                                            "operators": [
                                                                                {
                                                                                    "label": "Text",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "text:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "text:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Contains (case sensitive)",
                                                                                            "value": "text:like."
                                                                                        },
                                                                                        {
                                                                                            "label": "Contains (case insensitive)",
                                                                                            "value": "text:ilike."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Numbers",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "number:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "number:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Greater than",
                                                                                            "value": "number:gt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Less than",
                                                                                            "value": "number:lt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Greater than or equal to",
                                                                                            "value": "number:gte."
                                                                                        },
                                                                                        {
                                                                                            "label": "Less than or equal to",
                                                                                            "value": "number:lte."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Date",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "date:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "date:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Later than",
                                                                                            "value": "date:gt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Earlier than",
                                                                                            "value": "date:lt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Later than or equal to",
                                                                                            "value": "date:gte."
                                                                                        },
                                                                                        {
                                                                                            "label": "Earlier than or equal to",
                                                                                            "value": "date:lte."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Boolean",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "boolean:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "boolean:neq."
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "interface": [
                                                                    {
                                                                        "name": "__IMTLENGTH__",
                                                                        "type": "uinteger",
                                                                        "label": "Total number of bundles"
                                                                    },
                                                                    {
                                                                        "name": "__IMTINDEX__",
                                                                        "type": "uinteger",
                                                                        "label": "Bundle order position"
                                                                    },
                                                                    {
                                                                        "name": "id",
                                                                        "type": "text",
                                                                        "label": "id"
                                                                    },
                                                                    {
                                                                        "name": "created_at",
                                                                        "type": "text",
                                                                        "label": "created_at"
                                                                    },
                                                                    {
                                                                        "name": "client_id",
                                                                        "type": "text",
                                                                        "label": "client_id"
                                                                    },
                                                                    {
                                                                        "name": "title",
                                                                        "type": "text",
                                                                        "label": "title"
                                                                    },
                                                                    {
                                                                        "name": "full_manuscript",
                                                                        "type": "text",
                                                                        "label": "full_manuscript"
                                                                    },
                                                                    {
                                                                        "name": "style",
                                                                        "type": "text",
                                                                        "label": "style"
                                                                    },
                                                                    {
                                                                        "name": "context",
                                                                        "type": "text",
                                                                        "label": "context"
                                                                    },
                                                                    {
                                                                        "name": "timeline",
                                                                        "type": "text",
                                                                        "label": "timeline"
                                                                    },
                                                                    {
                                                                        "name": "status",
                                                                        "type": "text",
                                                                        "label": "status"
                                                                    },
                                                                    {
                                                                        "name": "current_subject",
                                                                        "type": "text",
                                                                        "label": "current_subject"
                                                                    },
                                                                    {
                                                                        "name": "next_question",
                                                                        "type": "text",
                                                                        "label": "next_question"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        {
                                                            "id": 7,
                                                            "module": "gateway:WebhookRespond",
                                                            "version": 1,
                                                            "parameters": {},
                                                            "mapper": {
                                                                "body": "{\n  \"assistant\": {\n    \"transcriber\": {\n      \"provider\": \"deepgram\",\n      \"model\": \"nova-3\",\n      \"language\": \"fr\"\n    },\n    \"firstMessageMode\": \"assistant-speaks-first\",\n    \"name\": \"Loomina-Biographe\",\n    \"voice\": {\n      \"provider\": \"11labs\",\n      \"voiceId\": \"Qrl71rx6Yg8RvyPYRGCQ\",\n      \"model\": \"eleven_turbo_v2_5\"\n    },\n    \"endCallPhrases\": [\"##END_CALL##\"],\n    \"firstMessage\": \"Bonjour {{ifempty(28.first_name; \\ + \"cher utilisateur\\\")}}. {{if(32.next_question; 32.next_question; \\ + \"Je suis ravi de vous retrouver. Je relisais nos dernires notes... Prt  replonger dans vos souvenirs ?\")}}\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es Loomina, un partenaire de conversation empathique et psychologue...\"\n        }\n      ],\n      \"tools\": [\n        {\n          \"type\": \"endCall\",\n          \"messages\": [\n            {\n              \"type\": \"request-start\",\n              \"content\": \"C'tait un plaisir d'changer avec vous.  trs bientt !\"\n            }\n          ]\n        }\n      ]\n    },\n    \"hooks\": [\n      {\n        \"on\": \"customer.speech.timeout\",\n        \"options\": {\n          \"timeoutSeconds\": 60,\n          \"triggerMaxCount\": 1,\n          \"triggerResetMode\": \"onUserSpeech\"\n        },\n        \"do\": [\n          {\n            \"type\": \"say\",\n            \"exact\": \"tes-vous toujours l ?\"\n          }\n        ]\n      }\n    ]\n  }\n}",
                                                                "status": "200",
                                                                "headers": []
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1800,
                                                                    "y": 300
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "headers": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "expect": [
                                                                    {
                                                                        "name": "status",
                                                                        "type": "uinteger",
                                                                        "label": "Status",
                                                                        "required": true,
                                                                        "validate": {
                                                                            "min": 100
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "body",
                                                                        "type": "any",
                                                                        "label": "Body"
                                                                    },
                                                                    {
                                                                        "name": "headers",
                                                                        "spec": [
                                                                            {
                                                                                "name": "key",
                                                                                "type": "text",
                                                                                "label": "Key",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 256
                                                                                }
                                                                            },
                                                                            {
                                                                                "name": "value",
                                                                                "type": "text",
                                                                                "label": "Value",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 4096
                                                                                }
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Custom headers",
                                                                        "validate": {
                                                                            "maxItems": 16
                                                                        }
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 18,
                                                            "module": "gateway:WebhookRespond",
                                                            "version": 1,
                                                            "parameters": {},
                                                            "filter": {
                                                                "name": "Phase = Onboarding",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{28.phase}}",
                                                                            "b": "Onboarding",
                                                                            "o": "text:equal"
                                                                        }
                                                                    ],
                                                                    [
                                                                        {
                                                                            "a": "{{28.phase}}",
                                                                            "o": "notexist"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "body": "{\n  \"assistant\": {\n    \"transcriber\": {\n      \"provider\": \"deepgram\",\n      \"model\": \"nova-3\",\n      \"language\": \"fr\"\n    },\n    \"firstMessageMode\": \"assistant-speaks-first\",\n    \"name\": \"Loomina-Onboarding\",\n    \"voice\": {\n      \"provider\": \"11labs\",\n      \"voiceId\": \"Qrl71rx6Yg8RvyPYRGCQ\",\n      \"model\": \"eleven_turbo_v2_5\"\n    },\n    \"firstMessage\": \"Bonjour {{28.first_name}}, et bienvenue sur Loomina. Je suis ravi de faire votre connaissance. Avant de commencer l'criture de votre livre, j'aimerais apprendre  mieux vous connatre. tes-vous prt  commencer l'aventure ?\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es Loomina, l'IA biographe empathique. Tu effectues l'onboarding de {{28.first_name}}.\\n\\n# OBJECTIF\\nCrer une premire impression chaleureuse et rassurante, tout en collectant les prfrences essentielles pour personnaliser l'exprience.\\n\\n# TON & POSTURE\\n- CHALEUREUX et ENVELOPPANT : C'est une premire rencontre, l'utilisateur peut tre intimid.\\n- PATIENT : Laisse des silences, ne presse jamais.\\n- VALIDANT : Chaque rponse mrite une reconnaissance sincre (\\\"C'est un trs beau choix\\\", \\\"Je comprends parfaitement\\\").\\n- NATUREL : Parle comme un ami bienveillant, pas comme un formulaire.\\n\\n# FLUX DE L'ONBOARDING\\n\\n## 1. ACCUEIL (aprs le \\\"Oui\\\" initial)\\n\\\"Merveilleux. Juste deux petites choses avant de commencer : je suis l pour vous couter  votre rythme, sans pression. Et pour que notre change soit fluide, essayons simplement de ne pas nous couper la parole. a vous va ?\\\"\\n\\n## 2. CHECKLIST  COMPLTER (dans l'ordre)\\nPose ces questions une par une, en validant chaque rponse avant de passer  la suivante :\\n\\n| lment | Question suggre |\\n|---------|-------------------|\\n| **Politesse** | \\\"Pour que vous soyez le plus  l'aise, prfrez-vous qu'on se tutoie ou qu'on se vouvoie ?\\\" |\\n| **Destinataire** | \\\" qui souhaitez-vous ddier ce livre ? Est-ce un hritage pour vos proches, ou une dmarche plus personnelle, pour vous-mme ?\\\" |\\n| **Style** | \\\"Pour le ton du rcit : prfrez-vous garder votre spontanit naturelle, ou souhaitez-vous un texte retravaill, plus littraire ?\\\" |\\n| **Premier souvenir** | \\\"Parfait, nous avons de bonnes bases. Maintenant, dtendez-vous... Par quel souvenir aimeriez-vous commencer ?\\\" |\\n\\n## 3. TRANSITION VERS LA PREMIRE SESSION\\nUne fois le premier souvenir voqu, guide doucement vers l'exploration :\\n\\\"C'est un point de dpart magnifique. Fermez les yeux si vous le souhaitez... et racontez-moi ce qui vous revient.\\\"\\n\\n# GESTION DES CAS PARTICULIERS\\n\\n**Silence ou incomprhension :**\\n \\\"Pardon, je n'ai pas bien entendu. Vous pouvez rpter ?\\\"\\n\\n**Hsitation de l'utilisateur :**\\n \\\"Prenez votre temps, il n'y a pas de mauvaise rponse.\\\"\\n\\n**Utilisateur press ou veut partir :**\\n Conclus chaleureusement puis utilise la fonction endCall.\\nExemple : \\\"Aucun souci, prenez soin de vous. J'ai hte de vous retrouver.  trs bientt !\\\"\\n\\n# ADAPTATION EN TEMPS REL\\n- Ds que le choix Tu/Vous est fait, adapte immdiatement ton langage.\\n- Si l'utilisateur plaisante, sois lger. S'il est mu, sois doux.\\n\\n# RGLES ABSOLUES\\n- UNE SEULE question  la fois.\\n- Ne jamais brusquer ou presser.\\n- Toujours valider avant de passer  la suite.\"\n        }\n      ],\n      \"tools\": [\n        {\n          \"type\": \"endCall\",\n          \"messages\": [\n            {\n              \"type\": \"request-start\",\n              \"content\": \"C'tait un plaisir de faire votre connaissance.  trs bientt pour notre premire sance !\"\n            }\n          ]\n        }\n      ]\n    },\n    \"hooks\": [\n      {\n        \"on\": \"customer.speech.timeout\",\n        \"options\": {\n          \"timeoutSeconds\": 60,\n          \"triggerMaxCount\": 1,\n          \"triggerResetMode\": \"onUserSpeech\"\n        },\n        \"do\": [\n          {\n            \"type\": \"say\",\n            \"exact\": \"tes-vous toujours l ?\"\n          }\n        ]\n      }\n    ]\n  }\n}",
                                                                "status": "200",
                                                                "headers": []
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1828,
                                                                    "y": 586
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "headers": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "expect": [
                                                                    {
                                                                        "name": "status",
                                                                        "type": "uinteger",
                                                                        "label": "Status",
                                                                        "required": true,
                                                                        "validate": {
                                                                            "min": 100
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "body",
                                                                        "type": "any",
                                                                        "label": "Body"
                                                                    },
                                                                    {
                                                                        "name": "headers",
                                                                        "spec": [
                                                                            {
                                                                                "name": "key",
                                                                                "type": "text",
                                                                                "label": "Key",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 256
                                                                                }
                                                                            },
                                                                            {
                                                                                "name": "value",
                                                                                "type": "text",
                                                                                "label": "Value",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 4096
                                                                                }
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Custom headers",
                                                                        "validate": {
                                                                            "maxItems": 16
                                                                        }
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    "flow": [
                                                        {
                                                            "id": 40,
                                                            "module": "supabase:searchRows",
                                                            "version": 1,
                                                            "parameters": {
                                                                "__IMTCONN__": 3941672
                                                            },
                                                            "filter": {
                                                                "name": "Phase = Clture",
                                                                "conditions": [
                                                                    [
                                                                        {
                                                                            "a": "{{28.phase}}",
                                                                            "b": "Finalisation",
                                                                            "o": "text:equal"
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "mapper": {
                                                                "limit": "100",
                                                                "table": "Books",
                                                                "search": [
                                                                    [
                                                                        {
                                                                            "a": "client_id",
                                                                            "b": "{{28.id}}",
                                                                            "o": "text:eq."
                                                                        }
                                                                    ]
                                                                ]
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1500,
                                                                    "y": 900
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "table": {
                                                                            "mode": "chose",
                                                                            "label": "Books",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "search",
                                                                                    "type": "filter",
                                                                                    "label": "Search criteria",
                                                                                    "options": {
                                                                                        "logic": "and",
                                                                                        "store": [
                                                                                            {
                                                                                                "label": "id",
                                                                                                "value": "id"
                                                                                            },
                                                                                            {
                                                                                                "label": "created_at",
                                                                                                "value": "created_at"
                                                                                            },
                                                                                            {
                                                                                                "label": "client_id",
                                                                                                "value": "client_id"
                                                                                            },
                                                                                            {
                                                                                                "label": "title",
                                                                                                "value": "title"
                                                                                            },
                                                                                            {
                                                                                                "label": "full_manuscript",
                                                                                                "value": "full_manuscript"
                                                                                            },
                                                                                            {
                                                                                                "label": "style",
                                                                                                "value": "style"
                                                                                            },
                                                                                            {
                                                                                                "label": "context",
                                                                                                "value": "context"
                                                                                            },
                                                                                            {
                                                                                                "label": "timeline",
                                                                                                "value": "timeline"
                                                                                            },
                                                                                            {
                                                                                                "label": "status",
                                                                                                "value": "status"
                                                                                            },
                                                                                            {
                                                                                                "label": "current_subject",
                                                                                                "value": "current_subject"
                                                                                            },
                                                                                            {
                                                                                                "label": "next_question",
                                                                                                "value": "next_question"
                                                                                            }
                                                                                        ],
                                                                                        "operators": [
                                                                                            {
                                                                                                "label": "Text",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "text:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "text:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Contains (case sensitive)",
                                                                                                        "value": "text:like."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Contains (case insensitive)",
                                                                                                        "value": "text:ilike."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Numbers",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "number:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "number:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Greater than",
                                                                                                        "value": "number:gt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Less than",
                                                                                                        "value": "number:lt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Greater than or equal to",
                                                                                                        "value": "number:gte."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Less than or equal to",
                                                                                                        "value": "number:lte."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Date",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "date:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "date:neq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Later than",
                                                                                                        "value": "date:gt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Earlier than",
                                                                                                        "value": "date:lt."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Later than or equal to",
                                                                                                        "value": "date:gte."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Earlier than or equal to",
                                                                                                        "value": "date:lte."
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Boolean",
                                                                                                "options": [
                                                                                                    {
                                                                                                        "label": "Equals",
                                                                                                        "value": "boolean:eq."
                                                                                                    },
                                                                                                    {
                                                                                                        "label": "Does not equal",
                                                                                                        "value": "boolean:neq."
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "parameters": {
                                                                        "__IMTCONN__": {
                                                                            "data": {
                                                                                "scoped": "true",
                                                                                "connection": "supabase"
                                                                            },
                                                                            "label": "My Supabase connection"
                                                                        }
                                                                    }
                                                                },
                                                                "parameters": [
                                                                    {
                                                                        "name": "__IMTCONN__",
                                                                        "type": "account:supabase",
                                                                        "label": "Connection",
                                                                        "required": true
                                                                    }
                                                                ],
                                                                "expect": [
                                                                    {
                                                                        "name": "table",
                                                                        "type": "select",
                                                                        "label": "Table",
                                                                        "required": true
                                                                    },
                                                                    {
                                                                        "name": "limit",
                                                                        "type": "uinteger",
                                                                        "label": "Limit"
                                                                    },
                                                                    {
                                                                        "name": "search",
                                                                        "type": "filter",
                                                                        "label": "Search criteria",
                                                                        "options": {
                                                                            "logic": "and",
                                                                            "store": [
                                                                                {
                                                                                    "label": "id",
                                                                                    "value": "id"
                                                                                },
                                                                                {
                                                                                    "label": "created_at",
                                                                                    "value": "created_at"
                                                                                },
                                                                                {
                                                                                    "label": "client_id",
                                                                                    "value": "client_id"
                                                                                },
                                                                                {
                                                                                    "label": "title",
                                                                                    "value": "title"
                                                                                },
                                                                                {
                                                                                    "label": "full_manuscript",
                                                                                    "value": "full_manuscript"
                                                                                },
                                                                                {
                                                                                    "label": "style",
                                                                                    "value": "style"
                                                                                },
                                                                                {
                                                                                    "label": "context",
                                                                                    "value": "context"
                                                                                },
                                                                                {
                                                                                    "label": "timeline",
                                                                                    "value": "timeline"
                                                                                },
                                                                                {
                                                                                    "label": "status",
                                                                                    "value": "status"
                                                                                },
                                                                                {
                                                                                    "label": "current_subject",
                                                                                    "value": "current_subject"
                                                                                },
                                                                                {
                                                                                    "label": "next_question",
                                                                                    "value": "next_question"
                                                                                }
                                                                            ],
                                                                            "operators": [
                                                                                {
                                                                                    "label": "Text",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "text:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "text:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Contains (case sensitive)",
                                                                                            "value": "text:like."
                                                                                        },
                                                                                        {
                                                                                            "label": "Contains (case insensitive)",
                                                                                            "value": "text:ilike."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Numbers",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "number:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "number:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Greater than",
                                                                                            "value": "number:gt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Less than",
                                                                                            "value": "number:lt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Greater than or equal to",
                                                                                            "value": "number:gte."
                                                                                        },
                                                                                        {
                                                                                            "label": "Less than or equal to",
                                                                                            "value": "number:lte."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Date",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "date:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "date:neq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Later than",
                                                                                            "value": "date:gt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Earlier than",
                                                                                            "value": "date:lt."
                                                                                        },
                                                                                        {
                                                                                            "label": "Later than or equal to",
                                                                                            "value": "date:gte."
                                                                                        },
                                                                                        {
                                                                                            "label": "Earlier than or equal to",
                                                                                            "value": "date:lte."
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    "label": "Boolean",
                                                                                    "options": [
                                                                                        {
                                                                                            "label": "Equals",
                                                                                            "value": "boolean:eq."
                                                                                        },
                                                                                        {
                                                                                            "label": "Does not equal",
                                                                                            "value": "boolean:neq."
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                ],
                                                                "interface": [
                                                                    {
                                                                        "name": "__IMTLENGTH__",
                                                                        "type": "uinteger",
                                                                        "label": "Total number of bundles"
                                                                    },
                                                                    {
                                                                        "name": "__IMTINDEX__",
                                                                        "type": "uinteger",
                                                                        "label": "Bundle order position"
                                                                    },
                                                                    {
                                                                        "name": "id",
                                                                        "type": "text",
                                                                        "label": "id"
                                                                    },
                                                                    {
                                                                        "name": "created_at",
                                                                        "type": "text",
                                                                        "label": "created_at"
                                                                    },
                                                                    {
                                                                        "name": "client_id",
                                                                        "type": "text",
                                                                        "label": "client_id"
                                                                    },
                                                                    {
                                                                        "name": "title",
                                                                        "type": "text",
                                                                        "label": "title"
                                                                    },
                                                                    {
                                                                        "name": "full_manuscript",
                                                                        "type": "text",
                                                                        "label": "full_manuscript"
                                                                    },
                                                                    {
                                                                        "name": "style",
                                                                        "type": "text",
                                                                        "label": "style"
                                                                    },
                                                                    {
                                                                        "name": "context",
                                                                        "type": "text",
                                                                        "label": "context"
                                                                    },
                                                                    {
                                                                        "name": "timeline",
                                                                        "type": "text",
                                                                        "label": "timeline"
                                                                    },
                                                                    {
                                                                        "name": "status",
                                                                        "type": "text",
                                                                        "label": "status"
                                                                    },
                                                                    {
                                                                        "name": "current_subject",
                                                                        "type": "text",
                                                                        "label": "current_subject"
                                                                    },
                                                                    {
                                                                        "name": "next_question",
                                                                        "type": "text",
                                                                        "label": "next_question"
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        {
                                                            "id": 19,
                                                            "module": "gateway:WebhookRespond",
                                                            "version": 1,
                                                            "parameters": {},
                                                            "mapper": {
                                                                "body": "{ \"assistantId\": \"3178f840-20b8-4371-9664-d43400e70973\" }",
                                                                "status": "200",
                                                                "headers": []
                                                            },
                                                            "metadata": {
                                                                "designer": {
                                                                    "x": 1945,
                                                                    "y": 898
                                                                },
                                                                "restore": {
                                                                    "expect": {
                                                                        "headers": {
                                                                            "mode": "chose"
                                                                        }
                                                                    }
                                                                },
                                                                "expect": [
                                                                    {
                                                                        "name": "status",
                                                                        "type": "uinteger",
                                                                        "label": "Status",
                                                                        "required": true,
                                                                        "validate": {
                                                                            "min": 100
                                                                        }
                                                                    },
                                                                    {
                                                                        "name": "body",
                                                                        "type": "any",
                                                                        "label": "Body"
                                                                    },
                                                                    {
                                                                        "name": "headers",
                                                                        "spec": [
                                                                            {
                                                                                "name": "key",
                                                                                "type": "text",
                                                                                "label": "Key",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 256
                                                                                }
                                                                            },
                                                                            {
                                                                                "name": "value",
                                                                                "type": "text",
                                                                                "label": "Value",
                                                                                "required": true,
                                                                                "validate": {
                                                                                    "max": 4096
                                                                                }
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Custom headers",
                                                                        "validate": {
                                                                            "maxItems": 16
                                                                        }
                                                                    }
                                                                ],
                                                                "advanced": true
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    "flow": [
                        {
                            "id": 34,
                            "module": "supabase:searchRows",
                            "version": 1,
                            "parameters": {
                                "__IMTCONN__": 3941672
                            },
                            "filter": {
                                "name": "end_of_call",
                                "conditions": [
                                    [
                                        {
                                            "a": "{{1.message.type}}",
                                            "b": "end-of-call-report",
                                            "o": "text:equal"
                                        }
                                    ],
                                    [
                                        {
                                            "a": "{{1.message.call.durationSeconds}}",
                                            "b": "0",
                                            "o": "number:gt"
                                        }
                                    ]
                                ]
                            },
                            "mapper": {
                                "limit": "10",
                                "table": "Client",
                                "search": [
                                    [
                                        {
                                            "a": "phone_number",
                                            "b": "{{1.message.call.customer.number}}",
                                            "o": "text:eq."
                                        }
                                    ]
                                ]
                            },
                            "metadata": {
                                "designer": {
                                    "x": 600,
                                    "y": 2100
                                },
                                "restore": {
                                    "expect": {
                                        "table": {
                                            "mode": "chose",
                                            "label": "Client",
                                            "nested": [
                                                {
                                                    "name": "search",
                                                    "type": "filter",
                                                    "label": "Search criteria",
                                                    "options": {
                                                        "logic": "and",
                                                        "store": [
                                                            {
                                                                "label": "id",
                                                                "value": "id"
                                                            },
                                                            {
                                                                "label": "created_at",
                                                                "value": "created_at"
                                                            },
                                                            {
                                                                "label": "phone_number",
                                                                "value": "phone_number"
                                                            },
                                                            {
                                                                "label": "name",
                                                                "value": "name"
                                                            },
                                                            {
                                                                "label": "phase",
                                                                "value": "phase"
                                                            },
                                                            {
                                                                "label": "email",
                                                                "value": "email"
                                                            }
                                                        ],
                                                        "operators": [
                                                            {
                                                                "label": "Text",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "text:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "text:neq."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case sensitive)",
                                                                        "value": "text:like."
                                                                    },
                                                                    {
                                                                        "label": "Contains (case insensitive)",
                                                                        "value": "text:ilike."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Numbers",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "number:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "number:neq."
                                                                    },
                                                                    {
                                                                        "label": "Greater than",
                                                                        "value": "number:gt."
                                                                    },
                                                                    {
                                                                        "label": "Less than",
                                                                        "value": "number:lt."
                                                                    },
                                                                    {
                                                                        "label": "Greater than or equal to",
                                                                        "value": "number:gte."
                                                                    },
                                                                    {
                                                                        "label": "Less than or equal to",
                                                                        "value": "number:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Date",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "date:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "date:neq."
                                                                    },
                                                                    {
                                                                        "label": "Later than",
                                                                        "value": "date:gt."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than",
                                                                        "value": "date:lt."
                                                                    },
                                                                    {
                                                                        "label": "Later than or equal to",
                                                                        "value": "date:gte."
                                                                    },
                                                                    {
                                                                        "label": "Earlier than or equal to",
                                                                        "value": "date:lte."
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                "label": "Boolean",
                                                                "options": [
                                                                    {
                                                                        "label": "Equals",
                                                                        "value": "boolean:eq."
                                                                    },
                                                                    {
                                                                        "label": "Does not equal",
                                                                        "value": "boolean:neq."
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        }
                                    },
                                    "parameters": {
                                        "__IMTCONN__": {
                                            "data": {
                                                "scoped": "true",
                                                "connection": "supabase"
                                            },
                                            "label": "My Supabase connection"
                                        }
                                    }
                                },
                                "parameters": [
                                    {
                                        "name": "__IMTCONN__",
                                        "type": "account:supabase",
                                        "label": "Connection",
                                        "required": true
                                    }
                                ],
                                "expect": [
                                    {
                                        "name": "table",
                                        "type": "select",
                                        "label": "Table",
                                        "required": true
                                    },
                                    {
                                        "name": "limit",
                                        "type": "uinteger",
                                        "label": "Limit"
                                    },
                                    {
                                        "name": "search",
                                        "type": "filter",
                                        "label": "Search criteria",
                                        "options": {
                                            "logic": "and",
                                            "store": [
                                                {
                                                    "label": "id",
                                                    "value": "id"
                                                },
                                                {
                                                    "label": "created_at",
                                                    "value": "created_at"
                                                },
                                                {
                                                    "label": "phone_number",
                                                    "value": "phone_number"
                                                },
                                                {
                                                    "label": "name",
                                                    "value": "name"
                                                },
                                                {
                                                    "label": "phase",
                                                    "value": "phase"
                                                },
                                                {
                                                    "label": "email",
                                                    "value": "email"
                                                }
                                            ],
                                            "operators": [
                                                {
                                                    "label": "Text",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "text:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "text:neq."
                                                        },
                                                        {
                                                            "label": "Contains (case sensitive)",
                                                            "value": "text:like."
                                                        },
                                                        {
                                                            "label": "Contains (case insensitive)",
                                                            "value": "text:ilike."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Numbers",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "number:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "number:neq."
                                                        },
                                                        {
                                                            "label": "Greater than",
                                                            "value": "number:gt."
                                                        },
                                                        {
                                                            "label": "Less than",
                                                            "value": "number:lt."
                                                        },
                                                        {
                                                            "label": "Greater than or equal to",
                                                            "value": "number:gte."
                                                        },
                                                        {
                                                            "label": "Less than or equal to",
                                                            "value": "number:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Date",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "date:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "date:neq."
                                                        },
                                                        {
                                                            "label": "Later than",
                                                            "value": "date:gt."
                                                        },
                                                        {
                                                            "label": "Earlier than",
                                                            "value": "date:lt."
                                                        },
                                                        {
                                                            "label": "Later than or equal to",
                                                            "value": "date:gte."
                                                        },
                                                        {
                                                            "label": "Earlier than or equal to",
                                                            "value": "date:lte."
                                                        }
                                                    ]
                                                },
                                                {
                                                    "label": "Boolean",
                                                    "options": [
                                                        {
                                                            "label": "Equals",
                                                            "value": "boolean:eq."
                                                        },
                                                        {
                                                            "label": "Does not equal",
                                                            "value": "boolean:neq."
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    }
                                ],
                                "interface": [
                                    {
                                        "name": "__IMTLENGTH__",
                                        "type": "uinteger",
                                        "label": "Total number of bundles"
                                    },
                                    {
                                        "name": "__IMTINDEX__",
                                        "type": "uinteger",
                                        "label": "Bundle order position"
                                    },
                                    {
                                        "name": "id",
                                        "type": "text",
                                        "label": "id"
                                    },
                                    {
                                        "name": "created_at",
                                        "type": "text",
                                        "label": "created_at"
                                    },
                                    {
                                        "name": "phone_number",
                                        "type": "text",
                                        "label": "phone_number"
                                    },
                                    {
                                        "name": "name",
                                        "type": "text",
                                        "label": "name"
                                    },
                                    {
                                        "name": "phase",
                                        "type": "text",
                                        "label": "phase"
                                    },
                                    {
                                        "name": "email",
                                        "type": "text",
                                        "label": "email"
                                    }
                                ]
                            }
                        },
                        {
                            "id": 700,
                            "module": "supabase:createARow",
                            "version": 1,
                            "parameters": {
                                "__IMTCONN__": 3941672
                            },
                            "mapper": {
                                "cost": "{{ifempty(1.message.cost; ifempty(1.message.artifact.cost; 1.message.call.cost; 0))}}",
                                "table": "Calls",
                                "status": "completed",
                                "duration": "{{round(ifempty(1.message.durationSeconds; ifempty(1.message.artifact.durationSeconds; 1.message.call.durationSeconds; 0)))}}",
                                "client_id": "{{34.id}}",
                                "transcript": "{{ifempty(1.message.transcript; ifempty(1.message.artifact.transcript; 1.message.call.transcript))}}",
                                "recording_url": "{{ifempty(1.message.recordingUrl; ifempty(1.message.artifact.recordingUrl; 1.message.call.recordingUrl))}}"
                            },
                            "metadata": {
                                "designer": {
                                    "x": 900,
                                    "y": 2100
                                }
                            }
                        },
                        {
                            "id": 300,
                            "module": "builtin:BasicRouter",
                            "version": 1,
                            "parameters": {
                                "else": 0
                            },
                            "mapper": null,
                            "metadata": {
                                "designer": {
                                    "x": 1200,
                                    "y": 2100
                                }
                            },
                            "routes": [
                                {
                                    "flow": [
                                        {
                                            "id": 200,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "filter": {
                                                "name": "Phase = Onboarding",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{34.phase}}",
                                                            "b": "Onboarding",
                                                            "o": "text:equal"
                                                        }
                                                    ],
                                                    [
                                                        {
                                                            "a": "{{34.phase}}",
                                                            "o": "notexist"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "model": "gpt-4o",
                                                "top_p": "1",
                                                "select": "chat",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "Analyze the transcript. Extract Onboarding Data.\\n\\nCRITICAL RULE: Check for these 3 fields: 1) Politeness, 2) Target Audience, 3) Writing Style.\\nIF ALL 3 ARE PRESENT (non-null), YOU MUST SET \"onboarding_complete\": true.\\n\\nTry to extract \"Starting Subject\" into \"narrative_scope\", but it is OPTIONAL. Absence of Subject does NOT stop completion.\\n\\nOutput RAW JSON ONLY. DO NOT uses backticks. DO NOT use markdown code blocks.\\nExample: { \"politeness_preference\": \"tu\" ... }"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "{{ifempty(1.message.transcript; ifempty(1.message.artifact.transcript; 1.message.call.transcript; \"(Empty Transcript)\"))}}",
                                                        "imageDetail": "auto"
                                                    }
                                                ],
                                                "max_tokens": "500",
                                                "temperature": "1",
                                                "n_completions": "1"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1500,
                                                    "y": 1200
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o (system)Fast, intelligent, flexible GPT model"
                                                        },
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "My OpenAI connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability"
                                                        },
                                                        "type": "array",
                                                        "label": "Token Probability"
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text",
                                                            "label": "Stop Sequence"
                                                        },
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter"
                                                        },
                                                        "type": "array",
                                                        "label": "Other Input Parameters"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "URL",
                                                                                                "value": "url",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab.",
                                                                                                        "name": "imageUrl",
                                                                                                        "type": "url",
                                                                                                        "label": "Image URL"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Image File",
                                                                                                "value": "file",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`.",
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ],
                                                                                                        "type": "collection",
                                                                                                        "label": "Image"
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "mappable": false
                                                                                    },
                                                                                    {
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "Auto",
                                                                                                "value": "auto",
                                                                                                "default": true
                                                                                            },
                                                                                            {
                                                                                                "label": "High",
                                                                                                "value": "high"
                                                                                            },
                                                                                            {
                                                                                                "label": "Low",
                                                                                                "value": "low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ],
                                                                                "default": true
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "mode": "edit",
                                                                                        "name": "tool_calls",
                                                                                        "spec": {
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID"
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "help": "The name of the function previously called.",
                                                                                                            "name": "name",
                                                                                                            "type": "text",
                                                                                                            "label": "Name",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "help": "The arguments previously output by the AI.",
                                                                                                            "name": "arguments",
                                                                                                            "type": "text",
                                                                                                            "label": "Arguments",
                                                                                                            "required": true
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection",
                                                                                                    "label": "Function"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Tool Call"
                                                                                        },
                                                                                        "type": "array",
                                                                                        "label": "Tool Calls",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "value": "system",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "label": "Tool Call ID.",
                                                                                        "required": true
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Message"
                                                        },
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 701,
                                            "module": "json:ParseJSON",
                                            "version": 1,
                                            "parameters": {
                                                "type": ""
                                            },
                                            "mapper": {
                                                "json": "{{replace(replace(replace(200.choices[].message.content; \"```json\"; \"\"); \"```\"; \"\"); \"\\n\"; \"\")}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1800,
                                                    "y": 1200
                                                }
                                            }
                                        },
                                        {
                                            "id": 201,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "id": "{{34.id}}",
                                                "phase": "{{if(701.onboarding_complete = true; \"Interview\"; ifempty(34.phase; \"Onboarding\"))}}",
                                                "table": "Client",
                                                "writing_style": "{{701.writing_style}}",
                                                "narrative_scope": "{{701.narrative_scope}}",
                                                "target_audience": "{{701.target_audience}}",
                                                "onboarding_status": "{{701.onboarding_complete}}",
                                                "politeness_preference": "{{701.politeness_preference}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 1200
                                                }
                                            }
                                        },
                                        {
                                            "id": 8555,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "table": "Books",
                                                "title": "Biographie",
                                                "client_id": "{{34.id}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 1200
                                                }
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 35,
                                            "module": "supabase:searchRows",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "filter": {
                                                "name": "Phase = Interview",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{34.phase}}",
                                                            "b": "Interview",
                                                            "o": "text:equal"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "limit": "10",
                                                "table": "Books",
                                                "search": [
                                                    [
                                                        {
                                                            "a": "client_id",
                                                            "b": "{{34.id}}",
                                                            "o": "text:eq."
                                                        }
                                                    ]
                                                ]
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1597,
                                                    "y": 2100
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "label": "Books",
                                                            "nested": [
                                                                {
                                                                    "name": "search",
                                                                    "type": "filter",
                                                                    "label": "Search criteria",
                                                                    "options": {
                                                                        "logic": "and",
                                                                        "store": [
                                                                            {
                                                                                "label": "id",
                                                                                "value": "id"
                                                                            },
                                                                            {
                                                                                "label": "created_at",
                                                                                "value": "created_at"
                                                                            },
                                                                            {
                                                                                "label": "client_id",
                                                                                "value": "client_id"
                                                                            },
                                                                            {
                                                                                "label": "title",
                                                                                "value": "title"
                                                                            },
                                                                            {
                                                                                "label": "full_manuscript",
                                                                                "value": "full_manuscript"
                                                                            },
                                                                            {
                                                                                "label": "style",
                                                                                "value": "style"
                                                                            },
                                                                            {
                                                                                "label": "context",
                                                                                "value": "context"
                                                                            },
                                                                            {
                                                                                "label": "timeline",
                                                                                "value": "timeline"
                                                                            },
                                                                            {
                                                                                "label": "status",
                                                                                "value": "status"
                                                                            },
                                                                            {
                                                                                "label": "current_subject",
                                                                                "value": "current_subject"
                                                                            },
                                                                            {
                                                                                "label": "next_question",
                                                                                "value": "next_question"
                                                                            }
                                                                        ],
                                                                        "operators": [
                                                                            {
                                                                                "label": "Text",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "Equals",
                                                                                        "value": "text:eq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Does not equal",
                                                                                        "value": "text:neq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Contains (case sensitive)",
                                                                                        "value": "text:like."
                                                                                    },
                                                                                    {
                                                                                        "label": "Contains (case insensitive)",
                                                                                        "value": "text:ilike."
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Numbers",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "Equals",
                                                                                        "value": "number:eq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Does not equal",
                                                                                        "value": "number:neq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Greater than",
                                                                                        "value": "number:gt."
                                                                                    },
                                                                                    {
                                                                                        "label": "Less than",
                                                                                        "value": "number:lt."
                                                                                    },
                                                                                    {
                                                                                        "label": "Less than or equal to",
                                                                                        "value": "number:lte."
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Date",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "Equals",
                                                                                        "value": "date:eq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Does not equal",
                                                                                        "value": "date:neq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Later than",
                                                                                        "value": "date:gt."
                                                                                    },
                                                                                    {
                                                                                        "label": "Earlier than",
                                                                                        "value": "date:lt."
                                                                                    },
                                                                                    {
                                                                                        "label": "Later than or equal to",
                                                                                        "value": "date:gte."
                                                                                    },
                                                                                    {
                                                                                        "label": "Earlier than or equal to",
                                                                                        "value": "date:lte."
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Boolean",
                                                                                "options": [
                                                                                    {
                                                                                        "label": "Equals",
                                                                                        "value": "boolean:eq."
                                                                                    },
                                                                                    {
                                                                                        "label": "Does not equal",
                                                                                        "value": "boolean:neq."
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            },
                                                            "label": "My Supabase connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "limit",
                                                        "type": "uinteger",
                                                        "label": "Limit"
                                                    },
                                                    {
                                                        "name": "search",
                                                        "type": "filter",
                                                        "label": "Search criteria",
                                                        "options": {
                                                            "logic": "and",
                                                            "store": [
                                                                {
                                                                    "label": "id",
                                                                    "value": "id"
                                                                },
                                                                {
                                                                    "label": "created_at",
                                                                    "value": "created_at"
                                                                },
                                                                {
                                                                    "label": "client_id",
                                                                    "value": "client_id"
                                                                },
                                                                {
                                                                    "label": "title",
                                                                    "value": "title"
                                                                },
                                                                {
                                                                    "label": "full_manuscript",
                                                                    "value": "full_manuscript"
                                                                },
                                                                {
                                                                    "label": "style",
                                                                    "value": "style"
                                                                },
                                                                {
                                                                    "label": "context",
                                                                    "value": "context"
                                                                },
                                                                {
                                                                    "label": "timeline",
                                                                    "value": "timeline"
                                                                },
                                                                {
                                                                    "label": "status",
                                                                    "value": "status"
                                                                },
                                                                {
                                                                    "label": "current_subject",
                                                                    "value": "current_subject"
                                                                },
                                                                {
                                                                    "label": "next_question",
                                                                    "value": "next_question"
                                                                }
                                                            ],
                                                            "operators": [
                                                                {
                                                                    "label": "Text",
                                                                    "options": [
                                                                        {
                                                                            "label": "Equals",
                                                                            "value": "text:eq."
                                                                        },
                                                                        {
                                                                            "label": "Does not equal",
                                                                            "value": "text:neq."
                                                                        },
                                                                        {
                                                                            "label": "Contains (case sensitive)",
                                                                            "value": "text:like."
                                                                        },
                                                                        {
                                                                            "label": "Contains (case insensitive)",
                                                                            "value": "text:ilike."
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "label": "Numbers",
                                                                    "options": [
                                                                        {
                                                                            "label": "Equals",
                                                                            "value": "number:eq."
                                                                        },
                                                                        {
                                                                            "label": "Does not equal",
                                                                            "value": "number:neq."
                                                                        },
                                                                        {
                                                                            "label": "Greater than",
                                                                            "value": "number:gt."
                                                                        },
                                                                        {
                                                                            "label": "Less than",
                                                                            "value": "number:lt."
                                                                        },
                                                                        {
                                                                            "label": "Greater than or equal to",
                                                                            "value": "number:gte."
                                                                        },
                                                                        {
                                                                            "label": "Less than or equal to",
                                                                            "value": "number:lte."
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "label": "Date",
                                                                    "options": [
                                                                        {
                                                                            "label": "Equals",
                                                                            "value": "date:eq."
                                                                        },
                                                                        {
                                                                            "label": "Does not equal",
                                                                            "value": "date:neq."
                                                                        },
                                                                        {
                                                                            "label": "Later than",
                                                                            "value": "date:gt."
                                                                        },
                                                                        {
                                                                            "label": "Earlier than",
                                                                            "value": "date:lt."
                                                                        },
                                                                        {
                                                                            "label": "Later than or equal to",
                                                                            "value": "date:gte."
                                                                        },
                                                                        {
                                                                            "label": "Earlier than or equal to",
                                                                            "value": "date:lte."
                                                                        }
                                                                    ]
                                                                },
                                                                {
                                                                    "label": "Boolean",
                                                                    "options": [
                                                                        {
                                                                            "label": "Equals",
                                                                            "value": "boolean:eq."
                                                                        },
                                                                        {
                                                                            "label": "Does not equal",
                                                                            "value": "boolean:neq."
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "__IMTLENGTH__",
                                                        "type": "uinteger",
                                                        "label": "Total number of bundles"
                                                    },
                                                    {
                                                        "name": "__IMTINDEX__",
                                                        "type": "uinteger",
                                                        "label": "Bundle order position"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "client_id",
                                                        "type": "text",
                                                        "label": "client_id"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "title"
                                                    },
                                                    {
                                                        "name": "full_manuscript",
                                                        "type": "text",
                                                        "label": "full_manuscript"
                                                    },
                                                    {
                                                        "name": "style",
                                                        "type": "text",
                                                        "label": "style"
                                                    },
                                                    {
                                                        "name": "context",
                                                        "type": "text",
                                                        "label": "context"
                                                    },
                                                    {
                                                        "name": "timeline",
                                                        "type": "text",
                                                        "label": "timeline"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text",
                                                        "label": "status"
                                                    },
                                                    {
                                                        "name": "current_subject",
                                                        "type": "text",
                                                        "label": "current_subject"
                                                    },
                                                    {
                                                        "name": "next_question",
                                                        "type": "text",
                                                        "label": "next_question"
                                                    },
                                                    {
                                                        "name": "chapter_count",
                                                        "type": "uinteger",
                                                        "label": "chapter_count"
                                                    }
                                                ]
                                            },
                                            "onerror": [
                                                {
                                                    "id": 24,
                                                    "module": "builtin:Break",
                                                    "version": 1,
                                                    "parameters": {},
                                                    "mapper": {
                                                        "count": "3",
                                                        "retry": true,
                                                        "interval": "1"
                                                    },
                                                    "metadata": {
                                                        "designer": {
                                                            "x": 1800,
                                                            "y": 2700
                                                        },
                                                        "restore": {
                                                            "expect": {
                                                                "retry": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "expect": [
                                                            {
                                                                "name": "retry",
                                                                "type": "boolean",
                                                                "label": "Automatically complete execution",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "count",
                                                                "type": "uinteger",
                                                                "label": "Number of attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 10000,
                                                                    "min": 1
                                                                }
                                                            },
                                                            {
                                                                "name": "interval",
                                                                "type": "uinteger",
                                                                "label": "Interval between attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 44640,
                                                                    "min": 1
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "id": 3,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "mapper": {
                                                "model": "gpt-4o",
                                                "top_p": "1",
                                                "select": "chat",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "Tu es l'crivain Fantme de Loomina, un matre du rcit autobiographique. Ton talent rside dans ta capacit  transformer une conversation orale en une prose lgante, immersive et structure.\n\n# TON CLIENT & SON STYLE\n- Nom du client : {{34.name}}\n- Style d'criture impos : '{{35.style}}' (Tu dois IMPRATIVEMENT adopter le vocabulaire, la syntaxe et le rythme propres  ce style).\n\n# TA MISSION : LA TRANSFORMATION NARRATIVE\nTa tche est d'extraire la substance motionnelle et factuelle du transcript pour rdiger un chapitre  la premire personne (\"Je\"), digne d'tre imprim. Tu transformes chaque appel en une \"Story\" (un rcit).\n\n***\n\n# COMPORTEMENT TAPE PAR TAPE (LOGIQUE CRITIQUE)\n1. **ANALYSE DE LA VALEUR** : Avant d'crire, demande-toi : \"Le client a-t-il racont un souvenir, une anecdote ou un fait sur sa vie ?\".\n2. **EXTRACTION DES FAITS** : Identifie mentalement les lieux, les prnoms, les dates et les actions cls.\n3. **INCARNATION** : Enfile la peau du client. Ce n'est pas toi qui racontes son histoire, c'est LUI qui crit son livre  travers ta plume.\n\n***\n\n# RGLES D'OR DE RDACTION\n- **NETTOYAGE RADICAL** : Supprime les tics de langage (euh, ben, alors), les hsitations, les rptitions et toutes les interactions techniques avec l'IA.\n- **ENRICHISSEMENT SENSORIEL** : Ne te contente pas de lister les faits. Si le client dit \"je suis all  la plage\", voque l'odeur du sel ou la sensation du sable. Rgle : Ne cre pas de nouveaux faits, mais amplifie la perception de ceux existants.\n- **RSONANCE MOTIONNELLE** : Analyse l'implicite. Derrire un fait, cherche le sentiment (nostalgie, fiert, blessure). Le lecteur doit ressentir ce que le client a vcu.\n- **FLUIDIT ROMANESQUE** : Le texte doit s'enchaner sans couture. vite les structures rptitives type \"Puis j'ai fait... Aprs j'ai vu...\". Utilise des transitions lgantes.\n\n# CRITRE D'ABANDON (CRUCIAL)\n- Si le transcript est VIDE, ou contient UNIQUEMENT des salutations courtes (ex: \"All ?\", \"Oui bonjour\", \"a va ?\") sans aucune anecdote ou rcit de vie,\n- Si le client ne parle que de problmes techniques (ex: \"Je ne t'entends pas\", \"Rpte\"),\n- ALORS tu dois IMPRATIVEMENT rpondre avec ce JSON spcial : { \"title\": \"ABORT\", \"content\": \"ABORT\" }\n\n# GESTION DES CONTENUS COURTS MAIS VALIDES\n- Si le client raconte un fait, mme court (ex: \"J'ai mang une pomme ce matin\"), c'est VALIDE. Fais-en un court instant de vie.\n\n# FORMAT DE SORTIE (JSON STRICT)\nTu dois rpondre UNIQUEMENT avec un JSON valide respectant cette structure : { \"title\": \"[Un titre court, vocateur ou 'ABORT']\", \"content\": \"[Ton texte rdig ici ou 'ABORT']\" }"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "Voici le texte: {{1.message.call.transcript}}",
                                                        "imageDetail": "auto"
                                                    }
                                                ],
                                                "max_tokens": "2048",
                                                "temperature": "1",
                                                "n_completions": "1",
                                                "response_format": "json_object"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1800,
                                                    "y": 1950
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o (system)Fast, intelligent, flexible GPT model"
                                                        },
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Text"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "My OpenAI connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability"
                                                        },
                                                        "type": "array",
                                                        "label": "Token Probability"
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text",
                                                            "label": "Stop Sequence"
                                                        },
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter"
                                                        },
                                                        "type": "array",
                                                        "label": "Other Input Parameters"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "URL",
                                                                                                "value": "url",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab.",
                                                                                                        "name": "imageUrl",
                                                                                                        "type": "url",
                                                                                                        "label": "Image URL"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Image File",
                                                                                                "value": "file",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`.",
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ],
                                                                                                        "type": "collection",
                                                                                                        "label": "Image"
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "mappable": false
                                                                                    },
                                                                                    {
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "Auto",
                                                                                                "value": "auto",
                                                                                                "default": true
                                                                                            },
                                                                                            {
                                                                                                "label": "High",
                                                                                                "value": "high"
                                                                                            },
                                                                                            {
                                                                                                "label": "Low",
                                                                                                "value": "low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ],
                                                                                "default": true
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "mode": "edit",
                                                                                        "name": "tool_calls",
                                                                                        "spec": {
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID"
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "help": "The name of the function previously called.",
                                                                                                            "name": "name",
                                                                                                            "type": "text",
                                                                                                            "label": "Name",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "help": "The arguments previously output by the AI.",
                                                                                                            "name": "arguments",
                                                                                                            "type": "text",
                                                                                                            "label": "Arguments",
                                                                                                            "required": true
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection",
                                                                                                    "label": "Function"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Tool Call"
                                                                                        },
                                                                                        "type": "array",
                                                                                        "label": "Tool Calls",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "value": "system",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "label": "Tool Call ID.",
                                                                                        "required": true
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Message"
                                                        },
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ]
                                            },
                                            "onerror": [
                                                {
                                                    "id": 16,
                                                    "module": "builtin:Break",
                                                    "version": 1,
                                                    "parameters": {},
                                                    "mapper": {
                                                        "count": "3",
                                                        "retry": true,
                                                        "interval": "1"
                                                    },
                                                    "metadata": {
                                                        "designer": {
                                                            "x": 2100,
                                                            "y": 2400
                                                        },
                                                        "restore": {
                                                            "expect": {
                                                                "retry": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "expect": [
                                                            {
                                                                "name": "retry",
                                                                "type": "boolean",
                                                                "label": "Automatically complete execution",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "count",
                                                                "type": "uinteger",
                                                                "label": "Number of attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 10000,
                                                                    "min": 1
                                                                }
                                                            },
                                                            {
                                                                "name": "interval",
                                                                "type": "uinteger",
                                                                "label": "Interval between attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 44640,
                                                                    "min": 1
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "id": 702,
                                            "module": "json:ParseJSON",
                                            "version": 1,
                                            "parameters": {
                                                "type": ""
                                            },
                                            "mapper": {
                                                "json": "{{replace(replace(replace(3.choices[].message.content; \"```json\"; \"\"); \"```\"; \"\"); \"\\n\"; \"\")}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2087,
                                                    "y": 1848
                                                },
                                                "interface": [
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "title"
                                                    },
                                                    {
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "content"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 36,
                                            "module": "supabase:createARow",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "filter": {
                                                "name": "Contenu Valide",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{702.content}}",
                                                            "b": "ABORT",
                                                            "o": "text:notequal"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "table": "Chapters",
                                                "title": "{{702.title}}",
                                                "status": "draft",
                                                "book_id": "{{35.id}}",
                                                "call_id": "{{700.id}}",
                                                "content": "{{702.content}}",
                                                "chapter_number": "{{35.chapter_count + 1}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2400,
                                                    "y": 1800
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "label": "Chapters",
                                                            "nested": [
                                                                {
                                                                    "help": "Defaults to gen_random_uuid(). Note:\nThis is a Primary Key.<pk/>",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Defaults to now(). ",
                                                                    "name": "created_at",
                                                                    "type": "text",
                                                                    "label": "created_at",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Note:\nThis is a Foreign Key to `Books.id`.<fk table='Books' column='id'/>",
                                                                    "name": "book_id",
                                                                    "type": "text",
                                                                    "label": "book_id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Note:\nThis is a Foreign Key to `Calls.id`.<fk table='Calls' column='id'/>",
                                                                    "name": "call_id",
                                                                    "type": "text",
                                                                    "label": "call_id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "chapter_number",
                                                                    "type": "integer",
                                                                    "label": "chapter_number",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "title",
                                                                    "type": "text",
                                                                    "label": "title",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "content",
                                                                    "type": "text",
                                                                    "label": "content",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "status",
                                                                    "type": "text",
                                                                    "label": "status",
                                                                    "options": null,
                                                                    "required": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            },
                                                            "label": "My Supabase connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "book_id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "call_id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "chapter_number",
                                                        "type": "integer"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "content",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "book_id",
                                                        "type": "text",
                                                        "label": "book_id"
                                                    },
                                                    {
                                                        "name": "call_id",
                                                        "type": "text",
                                                        "label": "call_id"
                                                    },
                                                    {
                                                        "name": "chapter_number",
                                                        "type": "number",
                                                        "label": "chapter_number"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "title"
                                                    },
                                                    {
                                                        "name": "content",
                                                        "type": "text",
                                                        "label": "content"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text",
                                                        "label": "status"
                                                    }
                                                ]
                                            },
                                            "onerror": [
                                                {
                                                    "id": 25,
                                                    "module": "builtin:Break",
                                                    "version": 1,
                                                    "parameters": {},
                                                    "mapper": {
                                                        "count": "3",
                                                        "retry": true,
                                                        "interval": "1"
                                                    },
                                                    "metadata": {
                                                        "designer": {
                                                            "x": 2700,
                                                            "y": 2100
                                                        },
                                                        "restore": {
                                                            "expect": {
                                                                "retry": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "expect": [
                                                            {
                                                                "name": "retry",
                                                                "type": "boolean",
                                                                "label": "Automatically complete execution",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "count",
                                                                "type": "uinteger",
                                                                "label": "Number of attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 10000,
                                                                    "min": 1
                                                                }
                                                            },
                                                            {
                                                                "name": "interval",
                                                                "type": "uinteger",
                                                                "label": "Interval between attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 44640,
                                                                    "min": 1
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "id": 27,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "mapper": {
                                                "model": "chatgpt-4o-latest",
                                                "top_p": "1",
                                                "select": "chat",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "Tu es un diteur Expert. Ta tche est purement technique : tu dois assembler un nouveau chapitre  la suite d'un manuscrit existant. Tu ne dois rien rcrire, juste fusionner les textes proprement avec un saut de ligne."
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "Voici le MANUSCRIT EXISTANT :\n{{35.full_manuscript}}\n\nVoici le NOUVEAU CHAPITRE  ajouter :\n{{702.content}}\n\nTche : Renvoie-moi l'intgralit du texte (Manuscrit + Nouveau Chapitre) mis bout  bout. Ne mets aucune phrase d'intro, juste le texte complet.",
                                                        "imageDetail": "auto"
                                                    }
                                                ],
                                                "max_tokens": "2048",
                                                "temperature": "1",
                                                "n_completions": "1",
                                                "response_format": "text"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2700,
                                                    "y": 1650
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "chatgpt-4o-latest (system)GPT-4o model used in ChatGPT"
                                                        },
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "Text"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "My OpenAI connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability"
                                                        },
                                                        "type": "array",
                                                        "label": "Token Probability"
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text",
                                                            "label": "Stop Sequence"
                                                        },
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter"
                                                        },
                                                        "type": "array",
                                                        "label": "Other Input Parameters"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "URL",
                                                                                                "value": "url",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab.",
                                                                                                        "name": "imageUrl",
                                                                                                        "type": "url",
                                                                                                        "label": "Image URL"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Image File",
                                                                                                "value": "file",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`.",
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ],
                                                                                                        "type": "collection",
                                                                                                        "label": "Image"
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "mappable": false
                                                                                    },
                                                                                    {
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "Auto",
                                                                                                "value": "auto",
                                                                                                "default": true
                                                                                            },
                                                                                            {
                                                                                                "label": "High",
                                                                                                "value": "high"
                                                                                            },
                                                                                            {
                                                                                                "label": "Low",
                                                                                                "value": "low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ],
                                                                                "default": true
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "mode": "edit",
                                                                                        "name": "tool_calls",
                                                                                        "spec": {
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID"
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "help": "The name of the function previously called.",
                                                                                                            "name": "name",
                                                                                                            "type": "text",
                                                                                                            "label": "Name",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "help": "The arguments previously output by the AI.",
                                                                                                            "name": "arguments",
                                                                                                            "type": "text",
                                                                                                            "label": "Arguments",
                                                                                                            "required": true
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection",
                                                                                                    "label": "Function"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Tool Call"
                                                                                        },
                                                                                        "type": "array",
                                                                                        "label": "Tool Calls",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "value": "system",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "label": "Tool Call ID.",
                                                                                        "required": true
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Message"
                                                        },
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 8,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "mapper": {
                                                "model": "gpt-4o",
                                                "top_p": "1",
                                                "select": "chat",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "{\n  \"assistant\": {\n    \"name\": \"Loomina-Stratege\",\n    \"model\": {\n      \"provider\": \"openai\",\n      \"model\": \"gpt-4o\",\n      \"messages\": [\n        {\n          \"role\": \"system\",\n          \"content\": \"Tu es le Directeur Stratgique de Loomina. Tu es le cerveau froid et logique qui pilote l'avancement du projet.\\nTon rle N'EST PAS d'crire le livre, mais d'analyser le transcript pour mettre  jour la base de donnes client.\\n\\n# DONNES D'ENTRE\\n- Transcript brut : {{1.message.call.transcript}}\\n- Phase actuelle : {{34.phase}} (Si vide = Onboarding)\\n- Sujet trait lors de cet appel : {{35.current_subject}}\\n\\n# LA CARTE DE NAVIGATION (ORDRE LOGIQUE DES SUJETS)\\nUtilise cette liste pour dfinir le 'nouveau_sujet' si le prcdent est clos :\\n1. Identit & Origines\\n2. Enfance & Adolescence\\n3. ducation\\n4. Entre vie adulte\\n5. Vie professionnelle\\n6. Vie personnelle\\n7. Valeurs & Vision\\n8. Moments charnires\\n9. Hritage\\n10. Archives\\n\\n***\\n\\n# MISSION 0 : EXTRACTION DES MTA-DONNES (CRITIQUE POUR ONBOARDING)\\nSi la phase est \\\"Onboarding\\\", le client a d dfinir ses prfrences. Analyse le texte et extrais :\\n- **Le Style/Ton** (ex: Humoristique, Solennel, Intime...)\\n- **Le Public** (ex: Pour ses petits-enfants, Public large...)\\n*Si rien n'est mentionn, laisse vide.*\\n\\n# MISSION 1 : AUDIT DE L'AVANCEMENT (NOUVELLE PHASE)\\n1. **Passage  l'INTERVIEW** :\\n   - SI Phase actuelle = \\\"Onboarding\\\" ET que le client a fini les prsentations.\\n   - ALORS : \\\"nouvelle_phase\\\": \\\"Interview\\\"\\n2. **Maintien en INTERVIEW** : Tant que le client raconte sa vie.\\n3. **Passage  la FINALISATION** : Si le client dit explicitement avoir termin.\\n\\n# MISSION 2 : NAVIGATION (PROCHAINE QUESTION)\\nDonne une munition en or  l'agent qui appellera demain (Loomina-Biographe).\\n\\n**Stratgie :**\\n1.  **Le Fil  Tirer** : Cherche un dtail mentionn mais pas dtaill dans ce transcript. Formule une question dessus.\\n2.  **Le Suivant** : SI le sujet actuel est puis, regarde la \\\"Carte de Navigation\\\" ci-dessus, prends le point suivant, et formule une question d'ouverture sur ce nouveau thme.\\n\\n*Format* : Une phrase d'accroche directe, chaleureuse, prte  tre lue par une voix IA.\\n\\n# MISSION 3 : MMOIRE CONTEXTUELLE\\nRdige un rsum factuel de 2 phrases sur ce qui vient d'tre dit (les faits, pas les motions).\\n\\n***\\n\\n# FORMAT DE SORTIE (JSON STRICT)\\nRponds uniquement avec cet objet JSON valide (pas de markdown, pas de guillemets doubles dans les valeurs) :\\n{\\n  \\\"nouvelle_phase\\\": \\\"Onboarding | Interview | Finalisation | Impression\\\",\\n  \\\"nouveau_sujet\\\": \\\"Titre court du sujet pour le prochain appel\\\",\\n  \\\"style_detecte\\\": \\\"Le style demand par le client (ou null)\\\",\\n  \\\"public_detecte\\\": \\\"Le public vis (ou null)\\\",\\n  \\\"prochaine_question\\\": \\\"La phrase d'accroche exacte (sans guillemets doubles)\\\",\\n  \\\"resume_pour_contexte\\\": \\\"Le rsum factuel.\\\"\\n}\"\n        }\n      ]\n    }\n  }\n}"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "Voici le transcript de l'appel :{{1.message.call.transcript}}",
                                                        "imageDetail": "auto"
                                                    }
                                                ],
                                                "max_tokens": "2048",
                                                "temperature": "1",
                                                "n_completions": "1",
                                                "response_format": "json_object",
                                                "parseJSONResponse": false
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3000,
                                                    "y": 1650
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o (system)Fast, intelligent, flexible GPT model"
                                                        },
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose",
                                                            "label": "JSON Object"
                                                        },
                                                        "parseJSONResponse": {
                                                            "mode": "chose"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "My OpenAI connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability"
                                                        },
                                                        "type": "array",
                                                        "label": "Token Probability"
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text",
                                                            "label": "Stop Sequence"
                                                        },
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter"
                                                        },
                                                        "type": "array",
                                                        "label": "Other Input Parameters"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "URL",
                                                                                                "value": "url",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab.",
                                                                                                        "name": "imageUrl",
                                                                                                        "type": "url",
                                                                                                        "label": "Image URL"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Image File",
                                                                                                "value": "file",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`.",
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ],
                                                                                                        "type": "collection",
                                                                                                        "label": "Image"
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "mappable": false
                                                                                    },
                                                                                    {
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "Auto",
                                                                                                "value": "auto",
                                                                                                "default": true
                                                                                            },
                                                                                            {
                                                                                                "label": "High",
                                                                                                "value": "high"
                                                                                            },
                                                                                            {
                                                                                                "label": "Low",
                                                                                                "value": "low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ],
                                                                                "default": true
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "mode": "edit",
                                                                                        "name": "tool_calls",
                                                                                        "spec": {
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID"
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "help": "The name of the function previously called.",
                                                                                                            "name": "name",
                                                                                                            "type": "text",
                                                                                                            "label": "Name",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "help": "The arguments previously output by the AI.",
                                                                                                            "name": "arguments",
                                                                                                            "type": "text",
                                                                                                            "label": "Arguments",
                                                                                                            "required": true
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection",
                                                                                                    "label": "Function"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Tool Call"
                                                                                        },
                                                                                        "type": "array",
                                                                                        "label": "Tool Calls",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "value": "system",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "label": "Tool Call ID.",
                                                                                        "required": true
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Message"
                                                        },
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    },
                                                    {
                                                        "name": "parseJSONResponse",
                                                        "type": "boolean",
                                                        "label": "Parse JSON Response",
                                                        "required": true
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ],
                                                "advanced": true
                                            }
                                        },
                                        {
                                            "id": 12,
                                            "module": "json:ParseJSON",
                                            "version": 1,
                                            "parameters": {
                                                "type": 251087
                                            },
                                            "mapper": {
                                                "json": "{{8.choices[].message.content}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3300,
                                                    "y": 1650
                                                },
                                                "restore": {
                                                    "parameters": {
                                                        "type": {
                                                            "label": "Structure Mmo"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "type",
                                                        "type": "udt",
                                                        "label": "Data structure"
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "json",
                                                        "type": "text",
                                                        "label": "JSON string",
                                                        "required": true
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "help": "",
                                                        "name": "nouvelle_phase",
                                                        "type": "text",
                                                        "label": "Nouvelle phase",
                                                        "default": null,
                                                        "required": false,
                                                        "multiline": false
                                                    },
                                                    {
                                                        "help": "",
                                                        "name": "nouveau_sujet",
                                                        "type": "text",
                                                        "label": "Nouveau sujet",
                                                        "default": null,
                                                        "required": false,
                                                        "multiline": false
                                                    },
                                                    {
                                                        "help": "",
                                                        "name": "prochaine_question",
                                                        "type": "text",
                                                        "label": "Prochaine question",
                                                        "default": null,
                                                        "required": false,
                                                        "multiline": false
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 37,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "id": "{{34.id}}",
                                                "phase": "{{12.nouvelle_phase}}",
                                                "table": "Client"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3600,
                                                    "y": 1650
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "label": "Client",
                                                            "nested": [
                                                                {
                                                                    "help": "Defaults to gen_random_uuid(). Note:\nThis is a Primary Key.<pk/>",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Defaults to now(). ",
                                                                    "name": "created_at",
                                                                    "type": "text",
                                                                    "label": "created_at",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "phone_number",
                                                                    "type": "text",
                                                                    "label": "phone_number",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "name",
                                                                    "type": "text",
                                                                    "label": "name",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "phase",
                                                                    "type": "text",
                                                                    "label": "phase",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "email",
                                                                    "type": "text",
                                                                    "label": "email",
                                                                    "options": null,
                                                                    "required": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            },
                                                            "label": "My Supabase connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "phone_number",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "name",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "phase",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "email",
                                                        "type": "text"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "phone_number",
                                                        "type": "text",
                                                        "label": "phone_number"
                                                    },
                                                    {
                                                        "name": "phase",
                                                        "type": "text",
                                                        "label": "phase"
                                                    },
                                                    {
                                                        "name": "email",
                                                        "type": "text",
                                                        "label": "email"
                                                    },
                                                    {
                                                        "name": "otp_code",
                                                        "type": "text",
                                                        "label": "otp_code"
                                                    },
                                                    {
                                                        "name": "politeness_preference",
                                                        "type": "text",
                                                        "label": "politeness_preference"
                                                    },
                                                    {
                                                        "name": "target_audience",
                                                        "type": "text",
                                                        "label": "target_audience"
                                                    },
                                                    {
                                                        "name": "writing_style",
                                                        "type": "text",
                                                        "label": "writing_style"
                                                    },
                                                    {
                                                        "name": "narrative_scope",
                                                        "type": "text",
                                                        "label": "narrative_scope"
                                                    },
                                                    {
                                                        "name": "onboarding_status",
                                                        "type": "boolean",
                                                        "label": "onboarding_status"
                                                    },
                                                    {
                                                        "name": "first_name",
                                                        "type": "text",
                                                        "label": "first_name"
                                                    },
                                                    {
                                                        "name": "last_name",
                                                        "type": "text",
                                                        "label": "last_name"
                                                    }
                                                ]
                                            },
                                            "onerror": [
                                                {
                                                    "id": 26,
                                                    "module": "builtin:Break",
                                                    "version": 1,
                                                    "parameters": {},
                                                    "mapper": {
                                                        "count": "3",
                                                        "retry": true,
                                                        "interval": "1"
                                                    },
                                                    "metadata": {
                                                        "designer": {
                                                            "x": 3900,
                                                            "y": 1800
                                                        },
                                                        "restore": {
                                                            "expect": {
                                                                "retry": {
                                                                    "mode": "chose"
                                                                }
                                                            }
                                                        },
                                                        "expect": [
                                                            {
                                                                "name": "retry",
                                                                "type": "boolean",
                                                                "label": "Automatically complete execution",
                                                                "required": true
                                                            },
                                                            {
                                                                "name": "count",
                                                                "type": "uinteger",
                                                                "label": "Number of attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 10000,
                                                                    "min": 1
                                                                }
                                                            },
                                                            {
                                                                "name": "interval",
                                                                "type": "uinteger",
                                                                "label": "Interval between attempts",
                                                                "required": true,
                                                                "validate": {
                                                                    "max": 44640,
                                                                    "min": 1
                                                                }
                                                            }
                                                        ]
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            "id": 39,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "id": "{{35.id}}",
                                                "table": "Books",
                                                "context": "{{12.resume_pour_contexte}}",
                                                "next_question": "{{12.prochaine_question}}",
                                                "current_subject": "{{12.nouveau_sujet}}",
                                                "full_manuscript": "{{27.choices[].message.content}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 3900,
                                                    "y": 1500
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "table": {
                                                            "mode": "chose",
                                                            "label": "Books",
                                                            "nested": [
                                                                {
                                                                    "help": "Defaults to gen_random_uuid(). Note:\nThis is a Primary Key.<pk/>",
                                                                    "name": "id",
                                                                    "type": "text",
                                                                    "label": "id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Defaults to now(). ",
                                                                    "name": "created_at",
                                                                    "type": "text",
                                                                    "label": "created_at",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "Note:\nThis is a Foreign Key to `Client.id`.<fk table='Client' column='id'/>",
                                                                    "name": "client_id",
                                                                    "type": "text",
                                                                    "label": "client_id",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "title",
                                                                    "type": "text",
                                                                    "label": "title",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "full_manuscript",
                                                                    "type": "text",
                                                                    "label": "full_manuscript",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "style",
                                                                    "type": "text",
                                                                    "label": "style",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "context",
                                                                    "type": "text",
                                                                    "label": "context",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "timeline",
                                                                    "type": "text",
                                                                    "label": "timeline",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "status",
                                                                    "type": "text",
                                                                    "label": "status",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "current_subject",
                                                                    "type": "text",
                                                                    "label": "current_subject",
                                                                    "options": null,
                                                                    "required": false
                                                                },
                                                                {
                                                                    "help": "",
                                                                    "name": "next_question",
                                                                    "type": "text",
                                                                    "label": "next_question",
                                                                    "options": null,
                                                                    "required": false
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "supabase"
                                                            },
                                                            "label": "My Supabase connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:supabase",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "table",
                                                        "type": "select",
                                                        "label": "Table",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "client_id",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "full_manuscript",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "style",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "context",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "timeline",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "current_subject",
                                                        "type": "text"
                                                    },
                                                    {
                                                        "name": "next_question",
                                                        "type": "text"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "id"
                                                    },
                                                    {
                                                        "name": "created_at",
                                                        "type": "text",
                                                        "label": "created_at"
                                                    },
                                                    {
                                                        "name": "client_id",
                                                        "type": "text",
                                                        "label": "client_id"
                                                    },
                                                    {
                                                        "name": "title",
                                                        "type": "text",
                                                        "label": "title"
                                                    },
                                                    {
                                                        "name": "full_manuscript",
                                                        "type": "text",
                                                        "label": "full_manuscript"
                                                    },
                                                    {
                                                        "name": "style",
                                                        "type": "text",
                                                        "label": "style"
                                                    },
                                                    {
                                                        "name": "context",
                                                        "type": "text",
                                                        "label": "context"
                                                    },
                                                    {
                                                        "name": "timeline",
                                                        "type": "text",
                                                        "label": "timeline"
                                                    },
                                                    {
                                                        "name": "status",
                                                        "type": "text",
                                                        "label": "status"
                                                    },
                                                    {
                                                        "name": "current_subject",
                                                        "type": "text",
                                                        "label": "current_subject"
                                                    },
                                                    {
                                                        "name": "next_question",
                                                        "type": "text",
                                                        "label": "next_question"
                                                    }
                                                ]
                                            }
                                        }
                                    ]
                                },
                                {
                                    "flow": [
                                        {
                                            "id": 400,
                                            "module": "openai-gpt-3:CreateCompletion",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3732225
                                            },
                                            "filter": {
                                                "name": "Phase = Finalisation",
                                                "conditions": [
                                                    [
                                                        {
                                                            "a": "{{34.phase}}",
                                                            "b": "Finalisation",
                                                            "o": "text:equal"
                                                        }
                                                    ]
                                                ]
                                            },
                                            "mapper": {
                                                "model": "gpt-4o",
                                                "top_p": "1",
                                                "select": "chat",
                                                "messages": [
                                                    {
                                                        "role": "system",
                                                        "content": "Analyze the transcript. This is the Finalization Call.\\nExtract:\\n1. The Book Title decided by the user.\\n2. The Dedication (words for the first page).\\n\\nOutput JSON ONLY: { \"title\": \"string\", \"dedication\": \"string\" }"
                                                    },
                                                    {
                                                        "role": "user",
                                                        "content": "{{1.message.call.transcript}}",
                                                        "imageDetail": "auto"
                                                    }
                                                ],
                                                "max_tokens": "500",
                                                "temperature": "1",
                                                "n_completions": "1"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1500,
                                                    "y": 3000
                                                },
                                                "restore": {
                                                    "expect": {
                                                        "stop": {
                                                            "mode": "chose"
                                                        },
                                                        "model": {
                                                            "mode": "chose",
                                                            "label": "gpt-4o (system)Fast, intelligent, flexible GPT model"
                                                        },
                                                        "select": {
                                                            "label": "Create a Chat Completion (GPT and o1 models)"
                                                        },
                                                        "messages": {
                                                            "mode": "chose",
                                                            "items": [
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "Developer / System"
                                                                    }
                                                                },
                                                                {
                                                                    "role": {
                                                                        "mode": "chose",
                                                                        "label": "User"
                                                                    },
                                                                    "imageDetail": {
                                                                        "mode": "chose",
                                                                        "label": "Auto"
                                                                    },
                                                                    "imageInputType": {
                                                                        "mode": "chose",
                                                                        "label": "Empty"
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "logit_bias": {
                                                            "mode": "chose"
                                                        },
                                                        "tool_choice": {
                                                            "mode": "chose",
                                                            "label": "Empty"
                                                        },
                                                        "response_format": {
                                                            "mode": "chose"
                                                        },
                                                        "additionalParameters": {
                                                            "mode": "chose"
                                                        }
                                                    },
                                                    "parameters": {
                                                        "__IMTCONN__": {
                                                            "data": {
                                                                "scoped": "true",
                                                                "connection": "openai-gpt-3"
                                                            },
                                                            "label": "My OpenAI connection"
                                                        }
                                                    }
                                                },
                                                "parameters": [
                                                    {
                                                        "name": "__IMTCONN__",
                                                        "type": "account:openai-gpt-3",
                                                        "label": "Connection",
                                                        "required": true
                                                    }
                                                ],
                                                "expect": [
                                                    {
                                                        "name": "select",
                                                        "type": "select",
                                                        "label": "Select Method",
                                                        "required": true,
                                                        "validate": {
                                                            "enum": [
                                                                "chat",
                                                                "prompt"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "temperature",
                                                        "type": "number",
                                                        "label": "Temperature",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "top_p",
                                                        "type": "number",
                                                        "label": "Top P",
                                                        "validate": {
                                                            "max": 1,
                                                            "min": 0
                                                        }
                                                    },
                                                    {
                                                        "name": "n_completions",
                                                        "type": "number",
                                                        "label": "Number"
                                                    },
                                                    {
                                                        "name": "frequency_penalty",
                                                        "type": "number",
                                                        "label": "Frequency Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "presence_penalty",
                                                        "type": "number",
                                                        "label": "Presence Penalty",
                                                        "validate": {
                                                            "max": 2,
                                                            "min": -2
                                                        }
                                                    },
                                                    {
                                                        "name": "logit_bias",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "token",
                                                                    "type": "text",
                                                                    "label": "Token ID",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "probability",
                                                                    "type": "number",
                                                                    "label": "Probability",
                                                                    "required": true,
                                                                    "validate": {
                                                                        "max": 100,
                                                                        "min": -100
                                                                    }
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Token Probability"
                                                        },
                                                        "type": "array",
                                                        "label": "Token Probability"
                                                    },
                                                    {
                                                        "name": "seed",
                                                        "type": "integer",
                                                        "label": "Seed"
                                                    },
                                                    {
                                                        "name": "tool_choice",
                                                        "type": "select",
                                                        "label": "Tool Choice",
                                                        "validate": {
                                                            "enum": [
                                                                "none",
                                                                "auto",
                                                                "required"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "stop",
                                                        "spec": {
                                                            "name": "value",
                                                            "type": "text",
                                                            "label": "Stop Sequence"
                                                        },
                                                        "type": "array",
                                                        "label": "Stop Sequences",
                                                        "validate": {
                                                            "maxItems": 4
                                                        }
                                                    },
                                                    {
                                                        "name": "additionalParameters",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "key",
                                                                    "type": "text",
                                                                    "label": "Parameter Name",
                                                                    "required": true
                                                                },
                                                                {
                                                                    "name": "type",
                                                                    "type": "select",
                                                                    "label": "Input Type",
                                                                    "options": [
                                                                        {
                                                                            "label": "Text",
                                                                            "value": "text",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "text",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ],
                                                                            "default": true
                                                                        },
                                                                        {
                                                                            "label": "Number",
                                                                            "value": "number",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "number",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Boolean",
                                                                            "value": "boolean",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "boolean",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Date",
                                                                            "value": "date",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "date",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            "label": "Any",
                                                                            "value": "any",
                                                                            "nested": [
                                                                                {
                                                                                    "name": "value",
                                                                                    "type": "any",
                                                                                    "label": "Parameter Value"
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Input Parameter"
                                                        },
                                                        "type": "array",
                                                        "label": "Other Input Parameters"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "select",
                                                        "label": "Model",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "max_tokens",
                                                        "type": "uinteger",
                                                        "label": "Max Output Tokens"
                                                    },
                                                    {
                                                        "name": "messages",
                                                        "spec": {
                                                            "name": "value",
                                                            "spec": [
                                                                {
                                                                    "name": "role",
                                                                    "type": "select",
                                                                    "label": "Role",
                                                                    "options": {
                                                                        "store": [
                                                                            {
                                                                                "label": "User",
                                                                                "value": "user",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "name": "imageInputType",
                                                                                        "type": "select",
                                                                                        "label": "Image Input Type",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "URL",
                                                                                                "value": "url",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "help": "Make sure to use a publicly accessible URL.\nYou can test if your image is publicly accessible by opening the link in an incognito tab.",
                                                                                                        "name": "imageUrl",
                                                                                                        "type": "url",
                                                                                                        "label": "Image URL"
                                                                                                    }
                                                                                                ]
                                                                                            },
                                                                                            {
                                                                                                "label": "Image File",
                                                                                                "value": "file",
                                                                                                "nested": [
                                                                                                    {
                                                                                                        "name": "imageFile",
                                                                                                        "spec": [
                                                                                                            {
                                                                                                                "help": "Accepted extensions: `.jpg`, `.jpeg`, `.png`, `.webp` and `.gif`.",
                                                                                                                "name": "imageFilename",
                                                                                                                "type": "filename",
                                                                                                                "label": "Image Filename",
                                                                                                                "semantic": "file:name",
                                                                                                                "extension": [
                                                                                                                    "jpg",
                                                                                                                    "jpeg",
                                                                                                                    "png",
                                                                                                                    "webp",
                                                                                                                    "gif"
                                                                                                                ]
                                                                                                            },
                                                                                                            {
                                                                                                                "name": "imageData",
                                                                                                                "type": "buffer",
                                                                                                                "label": "Image Data",
                                                                                                                "semantic": "file:data"
                                                                                                            }
                                                                                                        ],
                                                                                                        "type": "collection",
                                                                                                        "label": "Image"
                                                                                                    }
                                                                                                ]
                                                                                            }
                                                                                        ],
                                                                                        "mappable": false
                                                                                    },
                                                                                    {
                                                                                        "help": "Recommended value: `Auto`",
                                                                                        "name": "imageDetail",
                                                                                        "type": "select",
                                                                                        "label": "Image Detail",
                                                                                        "options": [
                                                                                            {
                                                                                                "label": "Auto",
                                                                                                "value": "auto",
                                                                                                "default": true
                                                                                            },
                                                                                            {
                                                                                                "label": "High",
                                                                                                "value": "high"
                                                                                            },
                                                                                            {
                                                                                                "label": "Low",
                                                                                                "value": "low"
                                                                                            }
                                                                                        ]
                                                                                    }
                                                                                ],
                                                                                "default": true
                                                                            },
                                                                            {
                                                                                "label": "Assistant",
                                                                                "value": "assistant",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    },
                                                                                    {
                                                                                        "mode": "edit",
                                                                                        "name": "tool_calls",
                                                                                        "spec": {
                                                                                            "spec": [
                                                                                                {
                                                                                                    "name": "type",
                                                                                                    "type": "hidden",
                                                                                                    "default": "function"
                                                                                                },
                                                                                                {
                                                                                                    "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                                    "name": "id",
                                                                                                    "type": "text",
                                                                                                    "label": "Tool call ID"
                                                                                                },
                                                                                                {
                                                                                                    "name": "function",
                                                                                                    "spec": [
                                                                                                        {
                                                                                                            "help": "The name of the function previously called.",
                                                                                                            "name": "name",
                                                                                                            "type": "text",
                                                                                                            "label": "Name",
                                                                                                            "required": true
                                                                                                        },
                                                                                                        {
                                                                                                            "help": "The arguments previously output by the AI.",
                                                                                                            "name": "arguments",
                                                                                                            "type": "text",
                                                                                                            "label": "Arguments",
                                                                                                            "required": true
                                                                                                        }
                                                                                                    ],
                                                                                                    "type": "collection",
                                                                                                    "label": "Function"
                                                                                                }
                                                                                            ],
                                                                                            "type": "collection",
                                                                                            "label": "Tool Call"
                                                                                        },
                                                                                        "type": "array",
                                                                                        "label": "Tool Calls",
                                                                                        "labels": {
                                                                                            "add": "Add tool call"
                                                                                        },
                                                                                        "mappable": {
                                                                                            "help": "You can map the entire `Choices[]: Message.Tool Calls` array from a previous Create a Completion module here."
                                                                                        }
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Developer / System",
                                                                                "value": "system",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "Text content of the message on behalf of the selected __Role__.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content"
                                                                                    }
                                                                                ]
                                                                            },
                                                                            {
                                                                                "label": "Tool",
                                                                                "value": "tool",
                                                                                "nested": [
                                                                                    {
                                                                                        "help": "The return of the function. This role should only be used when you have processed a previous function call and want to send the output of the function execution back to the AI.",
                                                                                        "name": "content",
                                                                                        "type": "text",
                                                                                        "label": "Text Content",
                                                                                        "required": true
                                                                                    },
                                                                                    {
                                                                                        "help": "Map this directly from the output of a previous **Create a Completion** module. Look for `Choices[]: Message.Tool Calls[]: ID`.",
                                                                                        "name": "tool_call_id",
                                                                                        "type": "text",
                                                                                        "label": "Tool Call ID.",
                                                                                        "required": true
                                                                                    }
                                                                                ]
                                                                            }
                                                                        ]
                                                                    },
                                                                    "required": true
                                                                }
                                                            ],
                                                            "type": "collection",
                                                            "label": "Message"
                                                        },
                                                        "type": "array",
                                                        "label": "Messages",
                                                        "required": true
                                                    },
                                                    {
                                                        "name": "response_format",
                                                        "type": "select",
                                                        "label": "Response Format",
                                                        "validate": {
                                                            "enum": [
                                                                "text",
                                                                "json_object"
                                                            ]
                                                        }
                                                    },
                                                    {
                                                        "name": "prediction",
                                                        "type": "text",
                                                        "label": "Predicted Outputs"
                                                    }
                                                ],
                                                "interface": [
                                                    {
                                                        "name": "result",
                                                        "type": "any",
                                                        "label": "Result"
                                                    },
                                                    {
                                                        "name": "id",
                                                        "type": "text",
                                                        "label": "ID"
                                                    },
                                                    {
                                                        "name": "object",
                                                        "type": "text",
                                                        "label": "Object"
                                                    },
                                                    {
                                                        "name": "created",
                                                        "type": "date",
                                                        "label": "Created"
                                                    },
                                                    {
                                                        "name": "model",
                                                        "type": "text",
                                                        "label": "Model"
                                                    },
                                                    {
                                                        "name": "choices",
                                                        "spec": [
                                                            {
                                                                "name": "text",
                                                                "type": "text",
                                                                "label": "Text"
                                                            },
                                                            {
                                                                "name": "index",
                                                                "type": "number",
                                                                "label": "Index"
                                                            },
                                                            {
                                                                "name": "logprobs",
                                                                "type": "text",
                                                                "label": "Log Probs"
                                                            },
                                                            {
                                                                "name": "finish_reason",
                                                                "type": "text",
                                                                "label": "Finish Reason"
                                                            },
                                                            {
                                                                "name": "message",
                                                                "spec": [
                                                                    {
                                                                        "name": "role",
                                                                        "type": "text",
                                                                        "label": "Role"
                                                                    },
                                                                    {
                                                                        "name": "content",
                                                                        "type": "text",
                                                                        "label": "Content"
                                                                    },
                                                                    {
                                                                        "name": "tool_calls",
                                                                        "spec": [
                                                                            {
                                                                                "name": "id",
                                                                                "type": "text",
                                                                                "label": "ID"
                                                                            },
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "function",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "name",
                                                                                        "type": "text",
                                                                                        "label": "Name"
                                                                                    },
                                                                                    {
                                                                                        "name": "arguments",
                                                                                        "type": "text",
                                                                                        "label": "Arguments"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "Function"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Tool Calls"
                                                                    },
                                                                    {
                                                                        "name": "refusal",
                                                                        "type": "text",
                                                                        "label": "Refusal"
                                                                    },
                                                                    {
                                                                        "name": "annotations",
                                                                        "spec": [
                                                                            {
                                                                                "name": "type",
                                                                                "type": "text",
                                                                                "label": "Type"
                                                                            },
                                                                            {
                                                                                "name": "url_citation",
                                                                                "spec": [
                                                                                    {
                                                                                        "name": "end_index",
                                                                                        "type": "number",
                                                                                        "label": "End Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "start_index",
                                                                                        "type": "number",
                                                                                        "label": "Start Index"
                                                                                    },
                                                                                    {
                                                                                        "name": "title",
                                                                                        "type": "text",
                                                                                        "label": "Title"
                                                                                    },
                                                                                    {
                                                                                        "name": "url",
                                                                                        "type": "text",
                                                                                        "label": "URL"
                                                                                    }
                                                                                ],
                                                                                "type": "collection",
                                                                                "label": "URL Citation"
                                                                            }
                                                                        ],
                                                                        "type": "array",
                                                                        "label": "Annotations"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Message"
                                                            }
                                                        ],
                                                        "type": "array",
                                                        "label": "Choices"
                                                    },
                                                    {
                                                        "name": "usage",
                                                        "spec": [
                                                            {
                                                                "name": "prompt_tokens",
                                                                "type": "number",
                                                                "label": "Prompt Tokens"
                                                            },
                                                            {
                                                                "name": "completion_tokens",
                                                                "type": "text",
                                                                "label": "Completion Tokens"
                                                            },
                                                            {
                                                                "name": "total_tokens",
                                                                "type": "number",
                                                                "label": "Total Tokens"
                                                            },
                                                            {
                                                                "name": "prompt_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "cached_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Cached Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "image_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Image Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Prompt Tokens Details"
                                                            },
                                                            {
                                                                "name": "completion_tokens_details",
                                                                "spec": [
                                                                    {
                                                                        "name": "reasoning_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Reasoning Tokens"
                                                                    },
                                                                    {
                                                                        "name": "text_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Text Tokens"
                                                                    },
                                                                    {
                                                                        "name": "audio_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Audio Tokens"
                                                                    },
                                                                    {
                                                                        "name": "accepted_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Accepted Prediction Tokens"
                                                                    },
                                                                    {
                                                                        "name": "rejected_prediction_tokens",
                                                                        "type": "uinteger",
                                                                        "label": "Rejected Prediction Tokens"
                                                                    }
                                                                ],
                                                                "type": "collection",
                                                                "label": "Completion Tokens Details"
                                                            }
                                                        ],
                                                        "type": "collection",
                                                        "label": "Usage"
                                                    },
                                                    {
                                                        "name": "service_tier",
                                                        "type": "text",
                                                        "label": "Service Tier"
                                                    },
                                                    {
                                                        "name": "system_fingerprint",
                                                        "type": "text",
                                                        "label": "System Fingerprint"
                                                    }
                                                ]
                                            }
                                        },
                                        {
                                            "id": 402,
                                            "module": "json:ParseJSON",
                                            "version": 1,
                                            "parameters": {
                                                "type": ""
                                            },
                                            "mapper": {
                                                "json": "{{400.choices[].message.content}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 1800,
                                                    "y": 3000
                                                }
                                            }
                                        },
                                        {
                                            "id": 401,
                                            "module": "supabase:upsertARecord",
                                            "version": 1,
                                            "parameters": {
                                                "__IMTCONN__": 3941672
                                            },
                                            "mapper": {
                                                "table": "Books",
                                                "title": "{{402.title}}",
                                                "status": "completed",
                                                "client_id": "{{34.id}}",
                                                "dedication": "{{402.dedication}}"
                                            },
                                            "metadata": {
                                                "designer": {
                                                    "x": 2100,
                                                    "y": 3000
                                                }
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ],
    "metadata": {
        "instant": true,
        "version": 1,
        "scenario": {
            "roundtrips": 1,
            "maxErrors": 3,
            "autoCommit": true,
            "autoCommitTriggerLast": true,
            "sequential": false,
            "slots": null,
            "confidential": false,
            "dataloss": false,
            "dlq": true,
            "freshVariables": false
        },
        "designer": {
            "orphans": []
        },
        "zone": "eu1.make.com",
        "notes": []
    }
}